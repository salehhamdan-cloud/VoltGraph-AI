(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function a0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bp={exports:{}},sl={},Gp={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ii=Symbol.for("react.element"),u0=Symbol.for("react.portal"),c0=Symbol.for("react.fragment"),d0=Symbol.for("react.strict_mode"),f0=Symbol.for("react.profiler"),p0=Symbol.for("react.provider"),h0=Symbol.for("react.context"),m0=Symbol.for("react.forward_ref"),g0=Symbol.for("react.suspense"),y0=Symbol.for("react.memo"),v0=Symbol.for("react.lazy"),Fc=Symbol.iterator;function x0(e){return e===null||typeof e!="object"?null:(e=Fc&&e[Fc]||e["@@iterator"],typeof e=="function"?e:null)}var zp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hp=Object.assign,Bp={};function yo(e,t,n){this.props=e,this.context=t,this.refs=Bp,this.updater=n||zp}yo.prototype.isReactComponent={};yo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};yo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qp(){}qp.prototype=yo.prototype;function Su(e,t,n){this.props=e,this.context=t,this.refs=Bp,this.updater=n||zp}var Eu=Su.prototype=new qp;Eu.constructor=Su;Hp(Eu,yo.prototype);Eu.isPureReactComponent=!0;var Vc=Array.isArray,$p=Object.prototype.hasOwnProperty,Tu={current:null},Op={key:!0,ref:!0,__self:!0,__source:!0};function Jp(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)$p.call(t,r)&&!Op.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(u===1)o.children=n;else if(1<u){for(var d=Array(u),c=0;c<u;c++)d[c]=arguments[c+2];o.children=d}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)o[r]===void 0&&(o[r]=u[r]);return{$$typeof:Ii,type:e,key:i,ref:s,props:o,_owner:Tu.current}}function _0(e,t){return{$$typeof:Ii,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function wu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ii}function C0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var bc=/\/+/g;function Dl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?C0(""+e.key):t.toString(36)}function ss(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Ii:case u0:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+Dl(s,0):r,Vc(o)?(n="",e!=null&&(n=e.replace(bc,"$&/")+"/"),ss(o,t,n,"",function(c){return c})):o!=null&&(wu(o)&&(o=_0(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(bc,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",Vc(e))for(var u=0;u<e.length;u++){i=e[u];var d=r+Dl(i,u);s+=ss(i,t,n,d,o)}else if(d=x0(e),typeof d=="function")for(e=d.call(e),u=0;!(i=e.next()).done;)i=i.value,d=r+Dl(i,u++),s+=ss(i,t,n,d,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function bi(e,t,n){if(e==null)return e;var r=[],o=0;return ss(e,r,"","",function(i){return t.call(n,i,o++)}),r}function S0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var at={current:null},ls={transition:null},E0={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:ls,ReactCurrentOwner:Tu};function Yp(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:bi,forEach:function(e,t,n){bi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bi(e,function(){t++}),t},toArray:function(e){return bi(e,function(t){return t})||[]},only:function(e){if(!wu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Component=yo;pe.Fragment=c0;pe.Profiler=f0;pe.PureComponent=Su;pe.StrictMode=d0;pe.Suspense=g0;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E0;pe.act=Yp;pe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Hp({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Tu.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)$p.call(t,d)&&!Op.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var c=0;c<d;c++)u[c]=arguments[c+2];r.children=u}return{$$typeof:Ii,type:e.type,key:o,ref:i,props:r,_owner:s}};pe.createContext=function(e){return e={$$typeof:h0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:p0,_context:e},e.Consumer=e};pe.createElement=Jp;pe.createFactory=function(e){var t=Jp.bind(null,e);return t.type=e,t};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:m0,render:e}};pe.isValidElement=wu;pe.lazy=function(e){return{$$typeof:v0,_payload:{_status:-1,_result:e},_init:S0}};pe.memo=function(e,t){return{$$typeof:y0,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=ls.transition;ls.transition={};try{e()}finally{ls.transition=t}};pe.unstable_act=Yp;pe.useCallback=function(e,t){return at.current.useCallback(e,t)};pe.useContext=function(e){return at.current.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e){return at.current.useDeferredValue(e)};pe.useEffect=function(e,t){return at.current.useEffect(e,t)};pe.useId=function(){return at.current.useId()};pe.useImperativeHandle=function(e,t,n){return at.current.useImperativeHandle(e,t,n)};pe.useInsertionEffect=function(e,t){return at.current.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return at.current.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return at.current.useMemo(e,t)};pe.useReducer=function(e,t,n){return at.current.useReducer(e,t,n)};pe.useRef=function(e){return at.current.useRef(e)};pe.useState=function(e){return at.current.useState(e)};pe.useSyncExternalStore=function(e,t,n){return at.current.useSyncExternalStore(e,t,n)};pe.useTransition=function(){return at.current.useTransition()};pe.version="18.3.1";Gp.exports=pe;var K=Gp.exports;const T0=a0(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0=K,N0=Symbol.for("react.element"),I0=Symbol.for("react.fragment"),A0=Object.prototype.hasOwnProperty,k0=w0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P0={key:!0,ref:!0,__self:!0,__source:!0};function Wp(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)A0.call(t,r)&&!P0.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:N0,type:e,key:i,ref:s,props:o,_owner:k0.current}}sl.Fragment=I0;sl.jsx=Wp;sl.jsxs=Wp;bp.exports=sl;var m=bp.exports,da={},Kp={exports:{}},Rt={},Xp={exports:{}},Qp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,G){var H=L.length;L.push(G);e:for(;0<H;){var j=H-1>>>1,ne=L[j];if(0<o(ne,G))L[j]=G,L[H]=ne,H=j;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var G=L[0],H=L.pop();if(H!==G){L[0]=H;e:for(var j=0,ne=L.length,Ve=ne>>>1;j<Ve;){var ce=2*(j+1)-1,le=L[ce],he=ce+1,Ge=L[he];if(0>o(le,H))he<ne&&0>o(Ge,le)?(L[j]=Ge,L[he]=H,j=he):(L[j]=le,L[ce]=H,j=ce);else if(he<ne&&0>o(Ge,H))L[j]=Ge,L[he]=H,j=he;else break e}}return G}function o(L,G){var H=L.sortIndex-G.sortIndex;return H!==0?H:L.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var d=[],c=[],f=1,p=null,h=3,g=!1,v=!1,T=!1,U=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(L){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=L)r(c),G.sortIndex=G.expirationTime,t(d,G);else break;G=n(c)}}function E(L){if(T=!1,_(L),!v)if(n(d)!==null)v=!0,M(k);else{var G=n(c);G!==null&&O(E,G.startTime-L)}}function k(L,G){v=!1,T&&(T=!1,y(z),z=-1),g=!0;var H=h;try{for(_(G),p=n(d);p!==null&&(!(p.expirationTime>G)||L&&!se());){var j=p.callback;if(typeof j=="function"){p.callback=null,h=p.priorityLevel;var ne=j(p.expirationTime<=G);G=e.unstable_now(),typeof ne=="function"?p.callback=ne:p===n(d)&&r(d),_(G)}else r(d);p=n(d)}if(p!==null)var Ve=!0;else{var ce=n(c);ce!==null&&O(E,ce.startTime-G),Ve=!1}return Ve}finally{p=null,h=H,g=!1}}var N=!1,R=null,z=-1,J=5,B=-1;function se(){return!(e.unstable_now()-B<J)}function ue(){if(R!==null){var L=e.unstable_now();B=L;var G=!0;try{G=R(!0,L)}finally{G?ve():(N=!1,R=null)}}else N=!1}var ve;if(typeof x=="function")ve=function(){x(ue)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,D=P.port2;P.port1.onmessage=ue,ve=function(){D.postMessage(null)}}else ve=function(){U(ue,0)};function M(L){R=L,N||(N=!0,ve())}function O(L,G){z=U(function(){L(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,M(k))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var H=h;h=G;try{return L()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var H=h;h=L;try{return G()}finally{h=H}},e.unstable_scheduleCallback=function(L,G,H){var j=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?j+H:j):H=j,L){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=H+ne,L={id:f++,callback:G,priorityLevel:L,startTime:H,expirationTime:ne,sortIndex:-1},H>j?(L.sortIndex=H,t(c,L),n(d)===null&&L===n(c)&&(T?(y(z),z=-1):T=!0,O(E,H-j))):(L.sortIndex=ne,t(d,L),v||g||(v=!0,M(k))),L},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(L){var G=h;return function(){var H=h;h=G;try{return L.apply(this,arguments)}finally{h=H}}}})(Qp);Xp.exports=Qp;var R0=Xp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0=K,kt=R0;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zp=new Set,oi={};function Ar(e,t){lo(e,t),lo(e+"Capture",t)}function lo(e,t){for(oi[e]=t,e=0;e<t.length;e++)Zp.add(t[e])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fa=Object.prototype.hasOwnProperty,D0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gc={},zc={};function L0(e){return fa.call(zc,e)?!0:fa.call(Gc,e)?!1:D0.test(e)?zc[e]=!0:(Gc[e]=!0,!1)}function U0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function F0(e,t,n,r){if(t===null||typeof t>"u"||U0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ut(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ke[e]=new ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ke[t]=new ut(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ke[e]=new ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ke[e]=new ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ke[e]=new ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ke[e]=new ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ke[e]=new ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ke[e]=new ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ke[e]=new ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nu=/[\-:]([a-z])/g;function Iu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nu,Iu);Ke[t]=new ut(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nu,Iu);Ke[t]=new ut(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nu,Iu);Ke[t]=new ut(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ke[e]=new ut(e,1,!1,e.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ke[e]=new ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function Au(e,t,n,r){var o=Ke.hasOwnProperty(t)?Ke[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(F0(t,n,o,r)&&(n=null),r||o===null?L0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Mn=M0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gi=Symbol.for("react.element"),Vr=Symbol.for("react.portal"),br=Symbol.for("react.fragment"),ku=Symbol.for("react.strict_mode"),pa=Symbol.for("react.profiler"),jp=Symbol.for("react.provider"),eh=Symbol.for("react.context"),Pu=Symbol.for("react.forward_ref"),ha=Symbol.for("react.suspense"),ma=Symbol.for("react.suspense_list"),Ru=Symbol.for("react.memo"),Hn=Symbol.for("react.lazy"),th=Symbol.for("react.offscreen"),Hc=Symbol.iterator;function Ao(e){return e===null||typeof e!="object"?null:(e=Hc&&e[Hc]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,Ll;function zo(e){if(Ll===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ll=t&&t[1]||""}return`
`+Ll+e}var Ul=!1;function Fl(e,t){if(!e||Ul)return"";Ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,u=i.length-1;1<=s&&0<=u&&o[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(o[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||o[s]!==i[u]){var d=`
`+o[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=s&&0<=u);break}}}finally{Ul=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zo(e):""}function V0(e){switch(e.tag){case 5:return zo(e.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return e=Fl(e.type,!1),e;case 11:return e=Fl(e.type.render,!1),e;case 1:return e=Fl(e.type,!0),e;default:return""}}function ga(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case br:return"Fragment";case Vr:return"Portal";case pa:return"Profiler";case ku:return"StrictMode";case ha:return"Suspense";case ma:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case eh:return(e.displayName||"Context")+".Consumer";case jp:return(e._context.displayName||"Context")+".Provider";case Pu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ru:return t=e.displayName||null,t!==null?t:ga(e.type)||"Memo";case Hn:t=e._payload,e=e._init;try{return ga(e(t))}catch{}}return null}function b0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ga(t);case 8:return t===ku?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function G0(e){var t=nh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zi(e){e._valueTracker||(e._valueTracker=G0(e))}function rh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ya(e,t){var n=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Bc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=nr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oh(e,t){t=t.checked,t!=null&&Au(e,"checked",t,!1)}function va(e,t){oh(e,t);var n=nr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xa(e,t.type,n):t.hasOwnProperty("defaultValue")&&xa(e,t.type,nr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function xa(e,t,n){(t!=="number"||Ns(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ho=Array.isArray;function Xr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+nr(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function _a(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $c(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(q(92));if(Ho(n)){if(1<n.length)throw Error(q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:nr(n)}}function ih(e,t){var n=nr(t.value),r=nr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Oc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ca(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hi,lh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hi=Hi||document.createElement("div"),Hi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ii(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z0=["Webkit","ms","Moz","O"];Object.keys(Wo).forEach(function(e){z0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wo[t]=Wo[e]})});function ah(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wo.hasOwnProperty(e)&&Wo[e]?(""+t).trim():t+"px"}function uh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=ah(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var H0=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sa(e,t){if(t){if(H0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function Ea(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ta=null;function Mu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wa=null,Qr=null,Zr=null;function Jc(e){if(e=Pi(e)){if(typeof wa!="function")throw Error(q(280));var t=e.stateNode;t&&(t=dl(t),wa(e.stateNode,e.type,t))}}function ch(e){Qr?Zr?Zr.push(e):Zr=[e]:Qr=e}function dh(){if(Qr){var e=Qr,t=Zr;if(Zr=Qr=null,Jc(e),t)for(e=0;e<t.length;e++)Jc(t[e])}}function fh(e,t){return e(t)}function ph(){}var Vl=!1;function hh(e,t,n){if(Vl)return e(t,n);Vl=!0;try{return fh(e,t,n)}finally{Vl=!1,(Qr!==null||Zr!==null)&&(ph(),dh())}}function si(e,t){var n=e.stateNode;if(n===null)return null;var r=dl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var Na=!1;if(Nn)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Na=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Na=!1}function B0(e,t,n,r,o,i,s,u,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var Ko=!1,Is=null,As=!1,Ia=null,q0={onError:function(e){Ko=!0,Is=e}};function $0(e,t,n,r,o,i,s,u,d){Ko=!1,Is=null,B0.apply(q0,arguments)}function O0(e,t,n,r,o,i,s,u,d){if($0.apply(this,arguments),Ko){if(Ko){var c=Is;Ko=!1,Is=null}else throw Error(q(198));As||(As=!0,Ia=c)}}function kr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Yc(e){if(kr(e)!==e)throw Error(q(188))}function J0(e){var t=e.alternate;if(!t){if(t=kr(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Yc(o),e;if(i===r)return Yc(o),t;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function gh(e){return e=J0(e),e!==null?yh(e):null}function yh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yh(e);if(t!==null)return t;e=e.sibling}return null}var vh=kt.unstable_scheduleCallback,Wc=kt.unstable_cancelCallback,Y0=kt.unstable_shouldYield,W0=kt.unstable_requestPaint,Fe=kt.unstable_now,K0=kt.unstable_getCurrentPriorityLevel,Du=kt.unstable_ImmediatePriority,xh=kt.unstable_UserBlockingPriority,ks=kt.unstable_NormalPriority,X0=kt.unstable_LowPriority,_h=kt.unstable_IdlePriority,ll=null,fn=null;function Q0(e){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(ll,e,void 0,(e.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:ey,Z0=Math.log,j0=Math.LN2;function ey(e){return e>>>=0,e===0?32:31-(Z0(e)/j0|0)|0}var Bi=64,qi=4194304;function Bo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ps(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var u=s&~o;u!==0?r=Bo(u):(i&=s,i!==0&&(r=Bo(i)))}else s=n&~o,s!==0?r=Bo(s):i!==0&&(r=Bo(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-jt(t),o=1<<n,r|=e[n],t&=~o;return r}function ty(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ny(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-jt(i),u=1<<s,d=o[s];d===-1?(!(u&n)||u&r)&&(o[s]=ty(u,t)):d<=t&&(e.expiredLanes|=u),i&=~u}}function Aa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ch(){var e=Bi;return Bi<<=1,!(Bi&4194240)&&(Bi=64),e}function bl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ai(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jt(t),e[t]=n}function ry(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-jt(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function Lu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-jt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ce=0;function Sh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Eh,Uu,Th,wh,Nh,ka=!1,$i=[],Wn=null,Kn=null,Xn=null,li=new Map,ai=new Map,$n=[],oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kc(e,t){switch(e){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":li.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(t.pointerId)}}function Po(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Pi(t),t!==null&&Uu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function iy(e,t,n,r,o){switch(t){case"focusin":return Wn=Po(Wn,e,t,n,r,o),!0;case"dragenter":return Kn=Po(Kn,e,t,n,r,o),!0;case"mouseover":return Xn=Po(Xn,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return li.set(i,Po(li.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,ai.set(i,Po(ai.get(i)||null,e,t,n,r,o)),!0}return!1}function Ih(e){var t=mr(e.target);if(t!==null){var n=kr(t);if(n!==null){if(t=n.tag,t===13){if(t=mh(n),t!==null){e.blockedOn=t,Nh(e.priority,function(){Th(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function as(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ta=r,n.target.dispatchEvent(r),Ta=null}else return t=Pi(n),t!==null&&Uu(t),e.blockedOn=n,!1;t.shift()}return!0}function Xc(e,t,n){as(e)&&n.delete(t)}function sy(){ka=!1,Wn!==null&&as(Wn)&&(Wn=null),Kn!==null&&as(Kn)&&(Kn=null),Xn!==null&&as(Xn)&&(Xn=null),li.forEach(Xc),ai.forEach(Xc)}function Ro(e,t){e.blockedOn===t&&(e.blockedOn=null,ka||(ka=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,sy)))}function ui(e){function t(o){return Ro(o,e)}if(0<$i.length){Ro($i[0],e);for(var n=1;n<$i.length;n++){var r=$i[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Wn!==null&&Ro(Wn,e),Kn!==null&&Ro(Kn,e),Xn!==null&&Ro(Xn,e),li.forEach(t),ai.forEach(t),n=0;n<$n.length;n++)r=$n[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<$n.length&&(n=$n[0],n.blockedOn===null);)Ih(n),n.blockedOn===null&&$n.shift()}var jr=Mn.ReactCurrentBatchConfig,Rs=!0;function ly(e,t,n,r){var o=Ce,i=jr.transition;jr.transition=null;try{Ce=1,Fu(e,t,n,r)}finally{Ce=o,jr.transition=i}}function ay(e,t,n,r){var o=Ce,i=jr.transition;jr.transition=null;try{Ce=4,Fu(e,t,n,r)}finally{Ce=o,jr.transition=i}}function Fu(e,t,n,r){if(Rs){var o=Pa(e,t,n,r);if(o===null)Wl(e,t,r,Ms,n),Kc(e,r);else if(iy(o,e,t,n,r))r.stopPropagation();else if(Kc(e,r),t&4&&-1<oy.indexOf(e)){for(;o!==null;){var i=Pi(o);if(i!==null&&Eh(i),i=Pa(e,t,n,r),i===null&&Wl(e,t,r,Ms,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Wl(e,t,r,null,n)}}var Ms=null;function Pa(e,t,n,r){if(Ms=null,e=Mu(r),e=mr(e),e!==null)if(t=kr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ms=e,null}function Ah(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K0()){case Du:return 1;case xh:return 4;case ks:case X0:return 16;case _h:return 536870912;default:return 16}default:return 16}}var Jn=null,Vu=null,us=null;function kh(){if(us)return us;var e,t=Vu,n=t.length,r,o="value"in Jn?Jn.value:Jn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return us=o.slice(e,1<r?1-r:void 0)}function cs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Oi(){return!0}function Qc(){return!1}function Mt(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Oi:Qc,this.isPropagationStopped=Qc,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),t}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bu=Mt(vo),ki=Me({},vo,{view:0,detail:0}),uy=Mt(ki),Gl,zl,Mo,al=Me({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mo&&(Mo&&e.type==="mousemove"?(Gl=e.screenX-Mo.screenX,zl=e.screenY-Mo.screenY):zl=Gl=0,Mo=e),Gl)},movementY:function(e){return"movementY"in e?e.movementY:zl}}),Zc=Mt(al),cy=Me({},al,{dataTransfer:0}),dy=Mt(cy),fy=Me({},ki,{relatedTarget:0}),Hl=Mt(fy),py=Me({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=Mt(py),my=Me({},vo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gy=Mt(my),yy=Me({},vo,{data:0}),jc=Mt(yy),vy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_y[e])?!!t[e]:!1}function Gu(){return Cy}var Sy=Me({},ki,{key:function(e){if(e.key){var t=vy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(e){return e.type==="keypress"?cs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ey=Mt(Sy),Ty=Me({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=Mt(Ty),wy=Me({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),Ny=Mt(wy),Iy=Me({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ay=Mt(Iy),ky=Me({},al,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Py=Mt(ky),Ry=[9,13,27,32],zu=Nn&&"CompositionEvent"in window,Xo=null;Nn&&"documentMode"in document&&(Xo=document.documentMode);var My=Nn&&"TextEvent"in window&&!Xo,Ph=Nn&&(!zu||Xo&&8<Xo&&11>=Xo),td=" ",nd=!1;function Rh(e,t){switch(e){case"keyup":return Ry.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function Dy(e,t){switch(e){case"compositionend":return Mh(t);case"keypress":return t.which!==32?null:(nd=!0,td);case"textInput":return e=t.data,e===td&&nd?null:e;default:return null}}function Ly(e,t){if(Gr)return e==="compositionend"||!zu&&Rh(e,t)?(e=kh(),us=Vu=Jn=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ph&&t.locale!=="ko"?null:t.data;default:return null}}var Uy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uy[e.type]:t==="textarea"}function Dh(e,t,n,r){ch(r),t=Ds(t,"onChange"),0<t.length&&(n=new bu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qo=null,ci=null;function Fy(e){$h(e,0)}function ul(e){var t=Br(e);if(rh(t))return e}function Vy(e,t){if(e==="change")return t}var Lh=!1;if(Nn){var Bl;if(Nn){var ql="oninput"in document;if(!ql){var od=document.createElement("div");od.setAttribute("oninput","return;"),ql=typeof od.oninput=="function"}Bl=ql}else Bl=!1;Lh=Bl&&(!document.documentMode||9<document.documentMode)}function id(){Qo&&(Qo.detachEvent("onpropertychange",Uh),ci=Qo=null)}function Uh(e){if(e.propertyName==="value"&&ul(ci)){var t=[];Dh(t,ci,e,Mu(e)),hh(Fy,t)}}function by(e,t,n){e==="focusin"?(id(),Qo=t,ci=n,Qo.attachEvent("onpropertychange",Uh)):e==="focusout"&&id()}function Gy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ul(ci)}function zy(e,t){if(e==="click")return ul(t)}function Hy(e,t){if(e==="input"||e==="change")return ul(t)}function By(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tn=typeof Object.is=="function"?Object.is:By;function di(e,t){if(tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!fa.call(t,o)||!tn(e[o],t[o]))return!1}return!0}function sd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ld(e,t){var n=sd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sd(n)}}function Fh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vh(){for(var e=window,t=Ns();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ns(e.document)}return t}function Hu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qy(e){var t=Vh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Fh(n.ownerDocument.documentElement,n)){if(r!==null&&Hu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ld(n,i);var s=ld(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $y=Nn&&"documentMode"in document&&11>=document.documentMode,zr=null,Ra=null,Zo=null,Ma=!1;function ad(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ma||zr==null||zr!==Ns(r)||(r=zr,"selectionStart"in r&&Hu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&di(Zo,r)||(Zo=r,r=Ds(Ra,"onSelect"),0<r.length&&(t=new bu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zr)))}function Ji(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hr={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionend:Ji("Transition","TransitionEnd")},$l={},bh={};Nn&&(bh=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function cl(e){if($l[e])return $l[e];if(!Hr[e])return e;var t=Hr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bh)return $l[e]=t[n];return e}var Gh=cl("animationend"),zh=cl("animationiteration"),Hh=cl("animationstart"),Bh=cl("transitionend"),qh=new Map,ud="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(e,t){qh.set(e,t),Ar(t,[e])}for(var Ol=0;Ol<ud.length;Ol++){var Jl=ud[Ol],Oy=Jl.toLowerCase(),Jy=Jl[0].toUpperCase()+Jl.slice(1);or(Oy,"on"+Jy)}or(Gh,"onAnimationEnd");or(zh,"onAnimationIteration");or(Hh,"onAnimationStart");or("dblclick","onDoubleClick");or("focusin","onFocus");or("focusout","onBlur");or(Bh,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("cancel close invalid load scroll toggle".split(" ").concat(qo));function cd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,O0(r,t,void 0,e),e.currentTarget=null}function $h(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var u=r[s],d=u.instance,c=u.currentTarget;if(u=u.listener,d!==i&&o.isPropagationStopped())break e;cd(o,u,c),i=d}else for(s=0;s<r.length;s++){if(u=r[s],d=u.instance,c=u.currentTarget,u=u.listener,d!==i&&o.isPropagationStopped())break e;cd(o,u,c),i=d}}}if(As)throw e=Ia,As=!1,Ia=null,e}function Ne(e,t){var n=t[Va];n===void 0&&(n=t[Va]=new Set);var r=e+"__bubble";n.has(r)||(Oh(t,e,2,!1),n.add(r))}function Yl(e,t,n){var r=0;t&&(r|=4),Oh(n,e,r,t)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function fi(e){if(!e[Yi]){e[Yi]=!0,Zp.forEach(function(n){n!=="selectionchange"&&(Yy.has(n)||Yl(n,!1,e),Yl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yi]||(t[Yi]=!0,Yl("selectionchange",!1,t))}}function Oh(e,t,n,r){switch(Ah(t)){case 1:var o=ly;break;case 4:o=ay;break;default:o=Fu}n=o.bind(null,t,n,e),o=void 0,!Na||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Wl(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var d=s.tag;if((d===3||d===4)&&(d=s.stateNode.containerInfo,d===o||d.nodeType===8&&d.parentNode===o))return;s=s.return}for(;u!==null;){if(s=mr(u),s===null)return;if(d=s.tag,d===5||d===6){r=i=s;continue e}u=u.parentNode}}r=r.return}hh(function(){var c=i,f=Mu(n),p=[];e:{var h=qh.get(e);if(h!==void 0){var g=bu,v=e;switch(e){case"keypress":if(cs(n)===0)break e;case"keydown":case"keyup":g=Ey;break;case"focusin":v="focus",g=Hl;break;case"focusout":v="blur",g=Hl;break;case"beforeblur":case"afterblur":g=Hl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ny;break;case Gh:case zh:case Hh:g=hy;break;case Bh:g=Ay;break;case"scroll":g=uy;break;case"wheel":g=Py;break;case"copy":case"cut":case"paste":g=gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ed}var T=(t&4)!==0,U=!T&&e==="scroll",y=T?h!==null?h+"Capture":null:h;T=[];for(var x=c,_;x!==null;){_=x;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,y!==null&&(E=si(x,y),E!=null&&T.push(pi(x,E,_)))),U)break;x=x.return}0<T.length&&(h=new g(h,v,null,n,f),p.push({event:h,listeners:T}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==Ta&&(v=n.relatedTarget||n.fromElement)&&(mr(v)||v[In]))break e;if((g||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?mr(v):null,v!==null&&(U=kr(v),v!==U||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(T=Zc,E="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(T=ed,E="onPointerLeave",y="onPointerEnter",x="pointer"),U=g==null?h:Br(g),_=v==null?h:Br(v),h=new T(E,x+"leave",g,n,f),h.target=U,h.relatedTarget=_,E=null,mr(f)===c&&(T=new T(y,x+"enter",v,n,f),T.target=_,T.relatedTarget=U,E=T),U=E,g&&v)t:{for(T=g,y=v,x=0,_=T;_;_=Fr(_))x++;for(_=0,E=y;E;E=Fr(E))_++;for(;0<x-_;)T=Fr(T),x--;for(;0<_-x;)y=Fr(y),_--;for(;x--;){if(T===y||y!==null&&T===y.alternate)break t;T=Fr(T),y=Fr(y)}T=null}else T=null;g!==null&&dd(p,h,g,T,!1),v!==null&&U!==null&&dd(p,U,v,T,!0)}}e:{if(h=c?Br(c):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var k=Vy;else if(rd(h))if(Lh)k=Hy;else{k=Gy;var N=by}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=zy);if(k&&(k=k(e,c))){Dh(p,k,n,f);break e}N&&N(e,h,c),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&xa(h,"number",h.value)}switch(N=c?Br(c):window,e){case"focusin":(rd(N)||N.contentEditable==="true")&&(zr=N,Ra=c,Zo=null);break;case"focusout":Zo=Ra=zr=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,ad(p,n,f);break;case"selectionchange":if($y)break;case"keydown":case"keyup":ad(p,n,f)}var R;if(zu)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Gr?Rh(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(Ph&&n.locale!=="ko"&&(Gr||z!=="onCompositionStart"?z==="onCompositionEnd"&&Gr&&(R=kh()):(Jn=f,Vu="value"in Jn?Jn.value:Jn.textContent,Gr=!0)),N=Ds(c,z),0<N.length&&(z=new jc(z,e,null,n,f),p.push({event:z,listeners:N}),R?z.data=R:(R=Mh(n),R!==null&&(z.data=R)))),(R=My?Dy(e,n):Ly(e,n))&&(c=Ds(c,"onBeforeInput"),0<c.length&&(f=new jc("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:c}),f.data=R))}$h(p,t)})}function pi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ds(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=si(e,n),i!=null&&r.unshift(pi(e,i,o)),i=si(e,t),i!=null&&r.push(pi(e,i,o))),e=e.return}return r}function Fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dd(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var u=n,d=u.alternate,c=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&c!==null&&(u=c,o?(d=si(n,i),d!=null&&s.unshift(pi(n,d,u))):o||(d=si(n,i),d!=null&&s.push(pi(n,d,u)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Wy=/\r\n?/g,Ky=/\u0000|\uFFFD/g;function fd(e){return(typeof e=="string"?e:""+e).replace(Wy,`
`).replace(Ky,"")}function Wi(e,t,n){if(t=fd(t),fd(e)!==t&&n)throw Error(q(425))}function Ls(){}var Da=null,La=null;function Ua(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fa=typeof setTimeout=="function"?setTimeout:void 0,Xy=typeof clearTimeout=="function"?clearTimeout:void 0,pd=typeof Promise=="function"?Promise:void 0,Qy=typeof queueMicrotask=="function"?queueMicrotask:typeof pd<"u"?function(e){return pd.resolve(null).then(e).catch(Zy)}:Fa;function Zy(e){setTimeout(function(){throw e})}function Kl(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),ui(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);ui(t)}function Qn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xo=Math.random().toString(36).slice(2),dn="__reactFiber$"+xo,hi="__reactProps$"+xo,In="__reactContainer$"+xo,Va="__reactEvents$"+xo,jy="__reactListeners$"+xo,ev="__reactHandles$"+xo;function mr(e){var t=e[dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[In]||n[dn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hd(e);e!==null;){if(n=e[dn])return n;e=hd(e)}return t}e=n,n=e.parentNode}return null}function Pi(e){return e=e[dn]||e[In],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function dl(e){return e[hi]||null}var ba=[],qr=-1;function ir(e){return{current:e}}function Ae(e){0>qr||(e.current=ba[qr],ba[qr]=null,qr--)}function Te(e,t){qr++,ba[qr]=e.current,e.current=t}var rr={},ot=ir(rr),vt=ir(!1),Sr=rr;function ao(e,t){var n=e.type.contextTypes;if(!n)return rr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function xt(e){return e=e.childContextTypes,e!=null}function Us(){Ae(vt),Ae(ot)}function md(e,t,n){if(ot.current!==rr)throw Error(q(168));Te(ot,t),Te(vt,n)}function Jh(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(q(108,b0(e)||"Unknown",o));return Me({},n,r)}function Fs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rr,Sr=ot.current,Te(ot,e),Te(vt,vt.current),!0}function gd(e,t,n){var r=e.stateNode;if(!r)throw Error(q(169));n?(e=Jh(e,t,Sr),r.__reactInternalMemoizedMergedChildContext=e,Ae(vt),Ae(ot),Te(ot,e)):Ae(vt),Te(vt,n)}var Cn=null,fl=!1,Xl=!1;function Yh(e){Cn===null?Cn=[e]:Cn.push(e)}function tv(e){fl=!0,Yh(e)}function sr(){if(!Xl&&Cn!==null){Xl=!0;var e=0,t=Ce;try{var n=Cn;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,fl=!1}catch(o){throw Cn!==null&&(Cn=Cn.slice(e+1)),vh(Du,sr),o}finally{Ce=t,Xl=!1}}return null}var $r=[],Or=0,Vs=null,bs=0,Ft=[],Vt=0,Er=null,Sn=1,En="";function pr(e,t){$r[Or++]=bs,$r[Or++]=Vs,Vs=e,bs=t}function Wh(e,t,n){Ft[Vt++]=Sn,Ft[Vt++]=En,Ft[Vt++]=Er,Er=e;var r=Sn;e=En;var o=32-jt(r)-1;r&=~(1<<o),n+=1;var i=32-jt(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Sn=1<<32-jt(t)+o|n<<o|r,En=i+e}else Sn=1<<i|n<<o|r,En=e}function Bu(e){e.return!==null&&(pr(e,1),Wh(e,1,0))}function qu(e){for(;e===Vs;)Vs=$r[--Or],$r[Or]=null,bs=$r[--Or],$r[Or]=null;for(;e===Er;)Er=Ft[--Vt],Ft[Vt]=null,En=Ft[--Vt],Ft[Vt]=null,Sn=Ft[--Vt],Ft[Vt]=null}var At=null,It=null,ke=!1,Qt=null;function Kh(e,t){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,It=Qn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,It=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Er!==null?{id:Sn,overflow:En}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,At=e,It=null,!0):!1;default:return!1}}function Ga(e){return(e.mode&1)!==0&&(e.flags&128)===0}function za(e){if(ke){var t=It;if(t){var n=t;if(!yd(e,t)){if(Ga(e))throw Error(q(418));t=Qn(n.nextSibling);var r=At;t&&yd(e,t)?Kh(r,n):(e.flags=e.flags&-4097|2,ke=!1,At=e)}}else{if(Ga(e))throw Error(q(418));e.flags=e.flags&-4097|2,ke=!1,At=e}}}function vd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function Ki(e){if(e!==At)return!1;if(!ke)return vd(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ua(e.type,e.memoizedProps)),t&&(t=It)){if(Ga(e))throw Xh(),Error(q(418));for(;t;)Kh(e,t),t=Qn(t.nextSibling)}if(vd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){It=Qn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}It=null}}else It=At?Qn(e.stateNode.nextSibling):null;return!0}function Xh(){for(var e=It;e;)e=Qn(e.nextSibling)}function uo(){It=At=null,ke=!1}function $u(e){Qt===null?Qt=[e]:Qt.push(e)}var nv=Mn.ReactCurrentBatchConfig;function Do(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var u=o.refs;s===null?delete u[i]:u[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xd(e){var t=e._init;return t(e._payload)}function Qh(e){function t(y,x){if(e){var _=y.deletions;_===null?(y.deletions=[x],y.flags|=16):_.push(x)}}function n(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function o(y,x){return y=tr(y,x),y.index=0,y.sibling=null,y}function i(y,x,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<x?(y.flags|=2,x):_):(y.flags|=2,x)):(y.flags|=1048576,x)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function u(y,x,_,E){return x===null||x.tag!==6?(x=ra(_,y.mode,E),x.return=y,x):(x=o(x,_),x.return=y,x)}function d(y,x,_,E){var k=_.type;return k===br?f(y,x,_.props.children,E,_.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Hn&&xd(k)===x.type)?(E=o(x,_.props),E.ref=Do(y,x,_),E.return=y,E):(E=ys(_.type,_.key,_.props,null,y.mode,E),E.ref=Do(y,x,_),E.return=y,E)}function c(y,x,_,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=oa(_,y.mode,E),x.return=y,x):(x=o(x,_.children||[]),x.return=y,x)}function f(y,x,_,E,k){return x===null||x.tag!==7?(x=_r(_,y.mode,E,k),x.return=y,x):(x=o(x,_),x.return=y,x)}function p(y,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=ra(""+x,y.mode,_),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gi:return _=ys(x.type,x.key,x.props,null,y.mode,_),_.ref=Do(y,null,x),_.return=y,_;case Vr:return x=oa(x,y.mode,_),x.return=y,x;case Hn:var E=x._init;return p(y,E(x._payload),_)}if(Ho(x)||Ao(x))return x=_r(x,y.mode,_,null),x.return=y,x;Xi(y,x)}return null}function h(y,x,_,E){var k=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:u(y,x,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gi:return _.key===k?d(y,x,_,E):null;case Vr:return _.key===k?c(y,x,_,E):null;case Hn:return k=_._init,h(y,x,k(_._payload),E)}if(Ho(_)||Ao(_))return k!==null?null:f(y,x,_,E,null);Xi(y,_)}return null}function g(y,x,_,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(_)||null,u(x,y,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Gi:return y=y.get(E.key===null?_:E.key)||null,d(x,y,E,k);case Vr:return y=y.get(E.key===null?_:E.key)||null,c(x,y,E,k);case Hn:var N=E._init;return g(y,x,_,N(E._payload),k)}if(Ho(E)||Ao(E))return y=y.get(_)||null,f(x,y,E,k,null);Xi(x,E)}return null}function v(y,x,_,E){for(var k=null,N=null,R=x,z=x=0,J=null;R!==null&&z<_.length;z++){R.index>z?(J=R,R=null):J=R.sibling;var B=h(y,R,_[z],E);if(B===null){R===null&&(R=J);break}e&&R&&B.alternate===null&&t(y,R),x=i(B,x,z),N===null?k=B:N.sibling=B,N=B,R=J}if(z===_.length)return n(y,R),ke&&pr(y,z),k;if(R===null){for(;z<_.length;z++)R=p(y,_[z],E),R!==null&&(x=i(R,x,z),N===null?k=R:N.sibling=R,N=R);return ke&&pr(y,z),k}for(R=r(y,R);z<_.length;z++)J=g(R,y,z,_[z],E),J!==null&&(e&&J.alternate!==null&&R.delete(J.key===null?z:J.key),x=i(J,x,z),N===null?k=J:N.sibling=J,N=J);return e&&R.forEach(function(se){return t(y,se)}),ke&&pr(y,z),k}function T(y,x,_,E){var k=Ao(_);if(typeof k!="function")throw Error(q(150));if(_=k.call(_),_==null)throw Error(q(151));for(var N=k=null,R=x,z=x=0,J=null,B=_.next();R!==null&&!B.done;z++,B=_.next()){R.index>z?(J=R,R=null):J=R.sibling;var se=h(y,R,B.value,E);if(se===null){R===null&&(R=J);break}e&&R&&se.alternate===null&&t(y,R),x=i(se,x,z),N===null?k=se:N.sibling=se,N=se,R=J}if(B.done)return n(y,R),ke&&pr(y,z),k;if(R===null){for(;!B.done;z++,B=_.next())B=p(y,B.value,E),B!==null&&(x=i(B,x,z),N===null?k=B:N.sibling=B,N=B);return ke&&pr(y,z),k}for(R=r(y,R);!B.done;z++,B=_.next())B=g(R,y,z,B.value,E),B!==null&&(e&&B.alternate!==null&&R.delete(B.key===null?z:B.key),x=i(B,x,z),N===null?k=B:N.sibling=B,N=B);return e&&R.forEach(function(ue){return t(y,ue)}),ke&&pr(y,z),k}function U(y,x,_,E){if(typeof _=="object"&&_!==null&&_.type===br&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Gi:e:{for(var k=_.key,N=x;N!==null;){if(N.key===k){if(k=_.type,k===br){if(N.tag===7){n(y,N.sibling),x=o(N,_.props.children),x.return=y,y=x;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Hn&&xd(k)===N.type){n(y,N.sibling),x=o(N,_.props),x.ref=Do(y,N,_),x.return=y,y=x;break e}n(y,N);break}else t(y,N);N=N.sibling}_.type===br?(x=_r(_.props.children,y.mode,E,_.key),x.return=y,y=x):(E=ys(_.type,_.key,_.props,null,y.mode,E),E.ref=Do(y,x,_),E.return=y,y=E)}return s(y);case Vr:e:{for(N=_.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(y,x.sibling),x=o(x,_.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else t(y,x);x=x.sibling}x=oa(_,y.mode,E),x.return=y,y=x}return s(y);case Hn:return N=_._init,U(y,x,N(_._payload),E)}if(Ho(_))return v(y,x,_,E);if(Ao(_))return T(y,x,_,E);Xi(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(y,x.sibling),x=o(x,_),x.return=y,y=x):(n(y,x),x=ra(_,y.mode,E),x.return=y,y=x),s(y)):n(y,x)}return U}var co=Qh(!0),Zh=Qh(!1),Gs=ir(null),zs=null,Jr=null,Ou=null;function Ju(){Ou=Jr=zs=null}function Yu(e){var t=Gs.current;Ae(Gs),e._currentValue=t}function Ha(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function eo(e,t){zs=e,Ou=Jr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(Ou!==e)if(e={context:e,memoizedValue:t,next:null},Jr===null){if(zs===null)throw Error(q(308));Jr=e,zs.dependencies={lanes:0,firstContext:e}}else Jr=Jr.next=e;return t}var gr=null;function Wu(e){gr===null?gr=[e]:gr.push(e)}function jh(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Wu(t)):(n.next=o.next,o.next=n),t.interleaved=n,An(e,r)}function An(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bn=!1;function Ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function em(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,An(e,n)}return o=r.interleaved,o===null?(t.next=t,Wu(r)):(t.next=o.next,o.next=t),r.interleaved=t,An(e,n)}function ds(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lu(e,n)}}function _d(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,r){var o=e.updateQueue;Bn=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var d=u,c=d.next;d.next=null,s===null?i=c:s.next=c,s=d;var f=e.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=c:u.next=c,f.lastBaseUpdate=d))}if(i!==null){var p=o.baseState;s=0,f=c=d=null,u=i;do{var h=u.lane,g=u.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,T=u;switch(h=t,g=n,T.tag){case 1:if(v=T.payload,typeof v=="function"){p=v.call(g,p,h);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,h=typeof v=="function"?v.call(g,p,h):v,h==null)break e;p=Me({},p,h);break e;case 2:Bn=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[u]:h.push(u))}else g={eventTime:g,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(c=f=g,d=p):f=f.next=g,s|=h;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;h=u,u=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(f===null&&(d=p),o.baseState=d,o.firstBaseUpdate=c,o.lastBaseUpdate=f,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);wr|=s,e.lanes=s,e.memoizedState=p}}function Cd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(q(191,o));o.call(r)}}}var Ri={},pn=ir(Ri),mi=ir(Ri),gi=ir(Ri);function yr(e){if(e===Ri)throw Error(q(174));return e}function Xu(e,t){switch(Te(gi,t),Te(mi,e),Te(pn,Ri),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ca(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ca(t,e)}Ae(pn),Te(pn,t)}function fo(){Ae(pn),Ae(mi),Ae(gi)}function tm(e){yr(gi.current);var t=yr(pn.current),n=Ca(t,e.type);t!==n&&(Te(mi,e),Te(pn,n))}function Qu(e){mi.current===e&&(Ae(pn),Ae(mi))}var Pe=ir(0);function Bs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ql=[];function Zu(){for(var e=0;e<Ql.length;e++)Ql[e]._workInProgressVersionPrimary=null;Ql.length=0}var fs=Mn.ReactCurrentDispatcher,Zl=Mn.ReactCurrentBatchConfig,Tr=0,Re=null,Be=null,Oe=null,qs=!1,jo=!1,yi=0,rv=0;function et(){throw Error(q(321))}function ju(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tn(e[n],t[n]))return!1;return!0}function ec(e,t,n,r,o,i){if(Tr=i,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fs.current=e===null||e.memoizedState===null?lv:av,e=n(r,o),jo){i=0;do{if(jo=!1,yi=0,25<=i)throw Error(q(301));i+=1,Oe=Be=null,t.updateQueue=null,fs.current=uv,e=n(r,o)}while(jo)}if(fs.current=$s,t=Be!==null&&Be.next!==null,Tr=0,Oe=Be=Re=null,qs=!1,t)throw Error(q(300));return e}function tc(){var e=yi!==0;return yi=0,e}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?Re.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function Bt(){if(Be===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Oe===null?Re.memoizedState:Oe.next;if(t!==null)Oe=t,Be=e;else{if(e===null)throw Error(q(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Oe===null?Re.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function vi(e,t){return typeof t=="function"?t(e):t}function jl(e){var t=Bt(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=Be,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var u=s=null,d=null,c=i;do{var f=c.lane;if((Tr&f)===f)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(u=d=p,s=r):d=d.next=p,Re.lanes|=f,wr|=f}c=c.next}while(c!==null&&c!==i);d===null?s=r:d.next=u,tn(r,t.memoizedState)||(gt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,Re.lanes|=i,wr|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ea(e){var t=Bt(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);tn(i,t.memoizedState)||(gt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function nm(){}function rm(e,t){var n=Re,r=Bt(),o=t(),i=!tn(r.memoizedState,o);if(i&&(r.memoizedState=o,gt=!0),r=r.queue,nc(sm.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,xi(9,im.bind(null,n,r,o,t),void 0,null),Je===null)throw Error(q(349));Tr&30||om(n,t,o)}return o}function om(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function im(e,t,n,r){t.value=n,t.getSnapshot=r,lm(t)&&am(e)}function sm(e,t,n){return n(function(){lm(t)&&am(e)})}function lm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tn(e,n)}catch{return!0}}function am(e){var t=An(e,1);t!==null&&en(t,e,1,-1)}function Sd(e){var t=cn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=sv.bind(null,Re,e),[t.memoizedState,e]}function xi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Re.updateQueue,t===null?(t={lastEffect:null,stores:null},Re.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function um(){return Bt().memoizedState}function ps(e,t,n,r){var o=cn();Re.flags|=e,o.memoizedState=xi(1|t,n,void 0,r===void 0?null:r)}function pl(e,t,n,r){var o=Bt();r=r===void 0?null:r;var i=void 0;if(Be!==null){var s=Be.memoizedState;if(i=s.destroy,r!==null&&ju(r,s.deps)){o.memoizedState=xi(t,n,i,r);return}}Re.flags|=e,o.memoizedState=xi(1|t,n,i,r)}function Ed(e,t){return ps(8390656,8,e,t)}function nc(e,t){return pl(2048,8,e,t)}function cm(e,t){return pl(4,2,e,t)}function dm(e,t){return pl(4,4,e,t)}function fm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pm(e,t,n){return n=n!=null?n.concat([e]):null,pl(4,4,fm.bind(null,t,e),n)}function rc(){}function hm(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ju(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mm(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ju(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function gm(e,t,n){return Tr&21?(tn(n,t)||(n=Ch(),Re.lanes|=n,wr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=n)}function ov(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=Zl.transition;Zl.transition={};try{e(!1),t()}finally{Ce=n,Zl.transition=r}}function ym(){return Bt().memoizedState}function iv(e,t,n){var r=er(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vm(e))xm(t,n);else if(n=jh(e,t,n,r),n!==null){var o=lt();en(n,e,r,o),_m(n,t,r)}}function sv(e,t,n){var r=er(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vm(e))xm(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,u=i(s,n);if(o.hasEagerState=!0,o.eagerState=u,tn(u,s)){var d=t.interleaved;d===null?(o.next=o,Wu(t)):(o.next=d.next,d.next=o),t.interleaved=o;return}}catch{}finally{}n=jh(e,t,o,r),n!==null&&(o=lt(),en(n,e,r,o),_m(n,t,r))}}function vm(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function xm(e,t){jo=qs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _m(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Lu(e,n)}}var $s={readContext:Ht,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},lv={readContext:Ht,useCallback:function(e,t){return cn().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Ed,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ps(4194308,4,fm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return ps(4,2,e,t)},useMemo:function(e,t){var n=cn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=cn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=iv.bind(null,Re,e),[r.memoizedState,e]},useRef:function(e){var t=cn();return e={current:e},t.memoizedState=e},useState:Sd,useDebugValue:rc,useDeferredValue:function(e){return cn().memoizedState=e},useTransition:function(){var e=Sd(!1),t=e[0];return e=ov.bind(null,e[1]),cn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Re,o=cn();if(ke){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),Je===null)throw Error(q(349));Tr&30||om(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Ed(sm.bind(null,r,i,e),[e]),r.flags|=2048,xi(9,im.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=cn(),t=Je.identifierPrefix;if(ke){var n=En,r=Sn;n=(r&~(1<<32-jt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=rv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},av={readContext:Ht,useCallback:hm,useContext:Ht,useEffect:nc,useImperativeHandle:pm,useInsertionEffect:cm,useLayoutEffect:dm,useMemo:mm,useReducer:jl,useRef:um,useState:function(){return jl(vi)},useDebugValue:rc,useDeferredValue:function(e){var t=Bt();return gm(t,Be.memoizedState,e)},useTransition:function(){var e=jl(vi)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:nm,useSyncExternalStore:rm,useId:ym,unstable_isNewReconciler:!1},uv={readContext:Ht,useCallback:hm,useContext:Ht,useEffect:nc,useImperativeHandle:pm,useInsertionEffect:cm,useLayoutEffect:dm,useMemo:mm,useReducer:ea,useRef:um,useState:function(){return ea(vi)},useDebugValue:rc,useDeferredValue:function(e){var t=Bt();return Be===null?t.memoizedState=e:gm(t,Be.memoizedState,e)},useTransition:function(){var e=ea(vi)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:nm,useSyncExternalStore:rm,useId:ym,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=Me({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ba(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var hl={isMounted:function(e){return(e=e._reactInternals)?kr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=lt(),o=er(e),i=wn(r,o);i.payload=t,n!=null&&(i.callback=n),t=Zn(e,i,o),t!==null&&(en(t,e,o,r),ds(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=lt(),o=er(e),i=wn(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Zn(e,i,o),t!==null&&(en(t,e,o,r),ds(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=lt(),r=er(e),o=wn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Zn(e,o,r),t!==null&&(en(t,e,r,n),ds(t,e,r))}};function Td(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!di(n,r)||!di(o,i):!0}function Cm(e,t,n){var r=!1,o=rr,i=t.contextType;return typeof i=="object"&&i!==null?i=Ht(i):(o=xt(t)?Sr:ot.current,r=t.contextTypes,i=(r=r!=null)?ao(e,o):rr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function wd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hl.enqueueReplaceState(t,t.state,null)}function qa(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ku(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Ht(i):(i=xt(t)?Sr:ot.current,o.context=ao(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ba(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&hl.enqueueReplaceState(o,o.state,null),Hs(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function po(e,t){try{var n="",r=t;do n+=V0(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function ta(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $a(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var cv=typeof WeakMap=="function"?WeakMap:Map;function Sm(e,t,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Js||(Js=!0,eu=r),$a(e,t)},n}function Em(e,t,n){n=wn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){$a(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){$a(e,t),typeof r!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Nd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new cv;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Tv.bind(null,e,t,n),t.then(e,e))}function Id(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ad(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wn(-1,1),t.tag=2,Zn(n,t,1))),n.lanes|=1),e)}var dv=Mn.ReactCurrentOwner,gt=!1;function it(e,t,n,r){t.child=e===null?Zh(t,null,n,r):co(t,e.child,n,r)}function kd(e,t,n,r,o){n=n.render;var i=t.ref;return eo(t,o),r=ec(e,t,n,r,i,o),n=tc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,kn(e,t,o)):(ke&&n&&Bu(t),t.flags|=1,it(e,t,r,o),t.child)}function Pd(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!dc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Tm(e,t,i,r,o)):(e=ys(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:di,n(s,r)&&e.ref===t.ref)return kn(e,t,o)}return t.flags|=1,e=tr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Tm(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(di(i,r)&&e.ref===t.ref)if(gt=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,kn(e,t,o)}return Oa(e,t,n,r,o)}function wm(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Wr,Nt),Nt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Wr,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Wr,Nt),Nt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Te(Wr,Nt),Nt|=r;return it(e,t,o,n),t.child}function Nm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Oa(e,t,n,r,o){var i=xt(n)?Sr:ot.current;return i=ao(t,i),eo(t,o),n=ec(e,t,n,r,i,o),r=tc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,kn(e,t,o)):(ke&&r&&Bu(t),t.flags|=1,it(e,t,n,o),t.child)}function Rd(e,t,n,r,o){if(xt(n)){var i=!0;Fs(t)}else i=!1;if(eo(t,o),t.stateNode===null)hs(e,t),Cm(t,n,r),qa(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var d=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ht(c):(c=xt(n)?Sr:ot.current,c=ao(t,c));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||d!==c)&&wd(t,s,r,c),Bn=!1;var h=t.memoizedState;s.state=h,Hs(t,r,s,o),d=t.memoizedState,u!==r||h!==d||vt.current||Bn?(typeof f=="function"&&(Ba(t,n,f,r),d=t.memoizedState),(u=Bn||Td(t,n,u,r,h,d,c))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=c,r=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,em(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Wt(t.type,u),s.props=c,p=t.pendingProps,h=s.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ht(d):(d=xt(n)?Sr:ot.current,d=ao(t,d));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||h!==d)&&wd(t,s,r,d),Bn=!1,h=t.memoizedState,s.state=h,Hs(t,r,s,o);var v=t.memoizedState;u!==p||h!==v||vt.current||Bn?(typeof g=="function"&&(Ba(t,n,g,r),v=t.memoizedState),(c=Bn||Td(t,n,c,r,h,v,d)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,d),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,d)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=d,r=c):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ja(e,t,n,r,i,o)}function Ja(e,t,n,r,o,i){Nm(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&gd(t,n,!1),kn(e,t,i);r=t.stateNode,dv.current=t;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=co(t,e.child,null,i),t.child=co(t,null,u,i)):it(e,t,u,i),t.memoizedState=r.state,o&&gd(t,n,!0),t.child}function Im(e){var t=e.stateNode;t.pendingContext?md(e,t.pendingContext,t.pendingContext!==t.context):t.context&&md(e,t.context,!1),Xu(e,t.containerInfo)}function Md(e,t,n,r,o){return uo(),$u(o),t.flags|=256,it(e,t,n,r),t.child}var Ya={dehydrated:null,treeContext:null,retryLane:0};function Wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Am(e,t,n){var r=t.pendingProps,o=Pe.current,i=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Te(Pe,o&1),e===null)return za(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=yl(s,r,0,null),e=_r(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Wa(n),t.memoizedState=Ya,e):oc(t,s));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return fv(e,t,s,r,u,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,u=o.sibling;var d={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=tr(o,d),r.subtreeFlags=o.subtreeFlags&14680064),u!==null?i=tr(u,i):(i=_r(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?Wa(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=Ya,r}return i=e.child,e=i.sibling,r=tr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function oc(e,t){return t=yl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qi(e,t,n,r){return r!==null&&$u(r),co(t,e.child,null,n),e=oc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fv(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=ta(Error(q(422))),Qi(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=yl({mode:"visible",children:r.children},o,0,null),i=_r(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&co(t,e.child,null,s),t.child.memoizedState=Wa(s),t.memoizedState=Ya,i);if(!(t.mode&1))return Qi(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(q(419)),r=ta(i,r,void 0),Qi(e,t,s,r)}if(u=(s&e.childLanes)!==0,gt||u){if(r=Je,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,An(e,o),en(r,e,o,-1))}return cc(),r=ta(Error(q(421))),Qi(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=wv.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,It=Qn(o.nextSibling),At=t,ke=!0,Qt=null,e!==null&&(Ft[Vt++]=Sn,Ft[Vt++]=En,Ft[Vt++]=Er,Sn=e.id,En=e.overflow,Er=t),t=oc(t,r.children),t.flags|=4096,t)}function Dd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ha(e.return,t,n)}function na(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function km(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(it(e,t,r.children,n),r=Pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dd(e,n,t);else if(e.tag===19)Dd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Pe,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Bs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),na(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Bs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}na(t,!0,n,null,i);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),wr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pv(e,t,n){switch(t.tag){case 3:Im(t),uo();break;case 5:tm(t);break;case 1:xt(t.type)&&Fs(t);break;case 4:Xu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Te(Gs,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Pe,Pe.current&1),t.flags|=128,null):n&t.child.childLanes?Am(e,t,n):(Te(Pe,Pe.current&1),e=kn(e,t,n),e!==null?e.sibling:null);Te(Pe,Pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return km(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Te(Pe,Pe.current),r)break;return null;case 22:case 23:return t.lanes=0,wm(e,t,n)}return kn(e,t,n)}var Pm,Ka,Rm,Mm;Pm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ka=function(){};Rm=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,yr(pn.current);var i=null;switch(n){case"input":o=ya(e,o),r=ya(e,r),i=[];break;case"select":o=Me({},o,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":o=_a(e,o),r=_a(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ls)}Sa(n,r);var s;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var u=o[c];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(oi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var d=r[c];if(u=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&d!==u&&(d!=null||u!=null))if(c==="style")if(u){for(s in u)!u.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in d)d.hasOwnProperty(s)&&u[s]!==d[s]&&(n||(n={}),n[s]=d[s])}else n||(i||(i=[]),i.push(c,n)),n=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(oi.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&Ne("scroll",e),i||u===d||(i=[])):(i=i||[]).push(c,d))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Mm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Lo(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hv(e,t,n){var r=t.pendingProps;switch(qu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return xt(t.type)&&Us(),tt(t),null;case 3:return r=t.stateNode,fo(),Ae(vt),Ae(ot),Zu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ki(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qt!==null&&(ru(Qt),Qt=null))),Ka(e,t),tt(t),null;case 5:Qu(t);var o=yr(gi.current);if(n=t.type,e!==null&&t.stateNode!=null)Rm(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return tt(t),null}if(e=yr(pn.current),Ki(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[dn]=t,r[hi]=i,e=(t.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(o=0;o<qo.length;o++)Ne(qo[o],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Bc(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":$c(r,i),Ne("invalid",r)}Sa(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Wi(r.textContent,u,e),o=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Wi(r.textContent,u,e),o=["children",""+u]):oi.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&Ne("scroll",r)}switch(n){case"input":zi(r),qc(r,i,!0);break;case"textarea":zi(r),Oc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ls)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[dn]=t,e[hi]=r,Pm(e,t,!1,!1),t.stateNode=e;e:{switch(s=Ea(n,r),n){case"dialog":Ne("cancel",e),Ne("close",e),o=r;break;case"iframe":case"object":case"embed":Ne("load",e),o=r;break;case"video":case"audio":for(o=0;o<qo.length;o++)Ne(qo[o],e);o=r;break;case"source":Ne("error",e),o=r;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),o=r;break;case"details":Ne("toggle",e),o=r;break;case"input":Bc(e,r),o=ya(e,r),Ne("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Me({},r,{value:void 0}),Ne("invalid",e);break;case"textarea":$c(e,r),o=_a(e,r),Ne("invalid",e);break;default:o=r}Sa(n,o),u=o;for(i in u)if(u.hasOwnProperty(i)){var d=u[i];i==="style"?uh(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&lh(e,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&ii(e,d):typeof d=="number"&&ii(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oi.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Ne("scroll",e):d!=null&&Au(e,i,d,s))}switch(n){case"input":zi(e),qc(e,r,!1);break;case"textarea":zi(e),Oc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+nr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Xr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Xr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ls)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)Mm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(n=yr(gi.current),yr(pn.current),Ki(t)){if(r=t.stateNode,n=t.memoizedProps,r[dn]=t,(i=r.nodeValue!==n)&&(e=At,e!==null))switch(e.tag){case 3:Wi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=t,t.stateNode=r}return tt(t),null;case 13:if(Ae(Pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&It!==null&&t.mode&1&&!(t.flags&128))Xh(),uo(),t.flags|=98560,i=!1;else if(i=Ki(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[dn]=t}else uo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),i=!1}else Qt!==null&&(ru(Qt),Qt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Pe.current&1?qe===0&&(qe=3):cc())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return fo(),Ka(e,t),e===null&&fi(t.stateNode.containerInfo),tt(t),null;case 10:return Yu(t.type._context),tt(t),null;case 17:return xt(t.type)&&Us(),tt(t),null;case 19:if(Ae(Pe),i=t.memoizedState,i===null)return tt(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Lo(i,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Bs(e),s!==null){for(t.flags|=128,Lo(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Pe,Pe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Fe()>ho&&(t.flags|=128,r=!0,Lo(i,!1),t.lanes=4194304)}else{if(!r)if(e=Bs(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Lo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ke)return tt(t),null}else 2*Fe()-i.renderingStartTime>ho&&n!==1073741824&&(t.flags|=128,r=!0,Lo(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Fe(),t.sibling=null,n=Pe.current,Te(Pe,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return uc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Nt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function mv(e,t){switch(qu(t),t.tag){case 1:return xt(t.type)&&Us(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fo(),Ae(vt),Ae(ot),Zu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qu(t),null;case 13:if(Ae(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));uo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(Pe),null;case 4:return fo(),null;case 10:return Yu(t.type._context),null;case 22:case 23:return uc(),null;case 24:return null;default:return null}}var Zi=!1,nt=!1,gv=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Yr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(e,t,r)}else n.current=null}function Xa(e,t,n){try{n()}catch(r){Ue(e,t,r)}}var Ld=!1;function yv(e,t){if(Da=Rs,e=Vh(),Hu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,u=-1,d=-1,c=0,f=0,p=e,h=null;t:for(;;){for(var g;p!==n||o!==0&&p.nodeType!==3||(u=s+o),p!==i||r!==0&&p.nodeType!==3||(d=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(g=p.firstChild)!==null;)h=p,p=g;for(;;){if(p===e)break t;if(h===n&&++c===o&&(u=s),h===i&&++f===r&&(d=s),(g=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=g}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(La={focusedElem:e,selectionRange:n},Rs=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var T=v.memoizedProps,U=v.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?T:Wt(t.type,T),U);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(E){Ue(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return v=Ld,Ld=!1,v}function ei(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&Xa(t,n,i)}o=o.next}while(o!==r)}}function ml(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Qa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Dm(e){var t=e.alternate;t!==null&&(e.alternate=null,Dm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dn],delete t[hi],delete t[Va],delete t[jy],delete t[ev])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lm(e){return e.tag===5||e.tag===3||e.tag===4}function Ud(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Za(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ls));else if(r!==4&&(e=e.child,e!==null))for(Za(e,t,n),e=e.sibling;e!==null;)Za(e,t,n),e=e.sibling}function ja(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ja(e,t,n),e=e.sibling;e!==null;)ja(e,t,n),e=e.sibling}var Ye=null,Kt=!1;function zn(e,t,n){for(n=n.child;n!==null;)Um(e,t,n),n=n.sibling}function Um(e,t,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(ll,n)}catch{}switch(n.tag){case 5:nt||Yr(n,t);case 6:var r=Ye,o=Kt;Ye=null,zn(e,t,n),Ye=r,Kt=o,Ye!==null&&(Kt?(e=Ye,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Kt?(e=Ye,n=n.stateNode,e.nodeType===8?Kl(e.parentNode,n):e.nodeType===1&&Kl(e,n),ui(e)):Kl(Ye,n.stateNode));break;case 4:r=Ye,o=Kt,Ye=n.stateNode.containerInfo,Kt=!0,zn(e,t,n),Ye=r,Kt=o;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Xa(n,t,s),o=o.next}while(o!==r)}zn(e,t,n);break;case 1:if(!nt&&(Yr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ue(n,t,u)}zn(e,t,n);break;case 21:zn(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,zn(e,t,n),nt=r):zn(e,t,n);break;default:zn(e,t,n)}}function Fd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new gv),t.forEach(function(r){var o=Nv.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Yt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:Ye=u.stateNode,Kt=!1;break e;case 3:Ye=u.stateNode.containerInfo,Kt=!0;break e;case 4:Ye=u.stateNode.containerInfo,Kt=!0;break e}u=u.return}if(Ye===null)throw Error(q(160));Um(i,s,o),Ye=null,Kt=!1;var d=o.alternate;d!==null&&(d.return=null),o.return=null}catch(c){Ue(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fm(t,e),t=t.sibling}function Fm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),an(e),r&4){try{ei(3,e,e.return),ml(3,e)}catch(T){Ue(e,e.return,T)}try{ei(5,e,e.return)}catch(T){Ue(e,e.return,T)}}break;case 1:Yt(t,e),an(e),r&512&&n!==null&&Yr(n,n.return);break;case 5:if(Yt(t,e),an(e),r&512&&n!==null&&Yr(n,n.return),e.flags&32){var o=e.stateNode;try{ii(o,"")}catch(T){Ue(e,e.return,T)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&oh(o,i),Ea(u,s);var c=Ea(u,i);for(s=0;s<d.length;s+=2){var f=d[s],p=d[s+1];f==="style"?uh(o,p):f==="dangerouslySetInnerHTML"?lh(o,p):f==="children"?ii(o,p):Au(o,f,p,c)}switch(u){case"input":va(o,i);break;case"textarea":ih(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Xr(o,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?Xr(o,!!i.multiple,i.defaultValue,!0):Xr(o,!!i.multiple,i.multiple?[]:"",!1))}o[hi]=i}catch(T){Ue(e,e.return,T)}}break;case 6:if(Yt(t,e),an(e),r&4){if(e.stateNode===null)throw Error(q(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(T){Ue(e,e.return,T)}}break;case 3:if(Yt(t,e),an(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ui(t.containerInfo)}catch(T){Ue(e,e.return,T)}break;case 4:Yt(t,e),an(e);break;case 13:Yt(t,e),an(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(lc=Fe())),r&4&&Fd(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(c=nt)||f,Yt(t,e),nt=c):Yt(t,e),an(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(Z=e,f=e.child;f!==null;){for(p=Z=f;Z!==null;){switch(h=Z,g=h.child,h.tag){case 0:case 11:case 14:case 15:ei(4,h,h.return);break;case 1:Yr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(T){Ue(r,n,T)}}break;case 5:Yr(h,h.return);break;case 22:if(h.memoizedState!==null){bd(p);continue}}g!==null?(g.return=h,Z=g):bd(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{o=p.stateNode,c?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,d=p.memoizedProps.style,s=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=ah("display",s))}catch(T){Ue(e,e.return,T)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(T){Ue(e,e.return,T)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Yt(t,e),an(e),r&4&&Fd(e);break;case 21:break;default:Yt(t,e),an(e)}}function an(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Lm(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ii(o,""),r.flags&=-33);var i=Ud(e);ja(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,u=Ud(e);Za(e,u,s);break;default:throw Error(q(161))}}catch(d){Ue(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vv(e,t,n){Z=e,Vm(e)}function Vm(e,t,n){for(var r=(e.mode&1)!==0;Z!==null;){var o=Z,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Zi;if(!s){var u=o.alternate,d=u!==null&&u.memoizedState!==null||nt;u=Zi;var c=nt;if(Zi=s,(nt=d)&&!c)for(Z=o;Z!==null;)s=Z,d=s.child,s.tag===22&&s.memoizedState!==null?Gd(o):d!==null?(d.return=s,Z=d):Gd(o);for(;i!==null;)Z=i,Vm(i),i=i.sibling;Z=o,Zi=u,nt=c}Vd(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,Z=i):Vd(e)}}function Vd(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||ml(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Wt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Cd(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cd(t,s,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ui(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}nt||t.flags&512&&Qa(t)}catch(h){Ue(t,t.return,h)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function bd(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Gd(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ml(4,t)}catch(d){Ue(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(d){Ue(t,o,d)}}var i=t.return;try{Qa(t)}catch(d){Ue(t,i,d)}break;case 5:var s=t.return;try{Qa(t)}catch(d){Ue(t,s,d)}}}catch(d){Ue(t,t.return,d)}if(t===e){Z=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Z=u;break}Z=t.return}}var xv=Math.ceil,Os=Mn.ReactCurrentDispatcher,ic=Mn.ReactCurrentOwner,Gt=Mn.ReactCurrentBatchConfig,ge=0,Je=null,be=null,We=0,Nt=0,Wr=ir(0),qe=0,_i=null,wr=0,gl=0,sc=0,ti=null,mt=null,lc=0,ho=1/0,xn=null,Js=!1,eu=null,jn=null,ji=!1,Yn=null,Ys=0,ni=0,tu=null,ms=-1,gs=0;function lt(){return ge&6?Fe():ms!==-1?ms:ms=Fe()}function er(e){return e.mode&1?ge&2&&We!==0?We&-We:nv.transition!==null?(gs===0&&(gs=Ch()),gs):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Ah(e.type)),e):1}function en(e,t,n,r){if(50<ni)throw ni=0,tu=null,Error(q(185));Ai(e,n,r),(!(ge&2)||e!==Je)&&(e===Je&&(!(ge&2)&&(gl|=n),qe===4&&On(e,We)),_t(e,r),n===1&&ge===0&&!(t.mode&1)&&(ho=Fe()+500,fl&&sr()))}function _t(e,t){var n=e.callbackNode;ny(e,t);var r=Ps(e,e===Je?We:0);if(r===0)n!==null&&Wc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Wc(n),t===1)e.tag===0?tv(zd.bind(null,e)):Yh(zd.bind(null,e)),Qy(function(){!(ge&6)&&sr()}),n=null;else{switch(Sh(r)){case 1:n=Du;break;case 4:n=xh;break;case 16:n=ks;break;case 536870912:n=_h;break;default:n=ks}n=Om(n,bm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bm(e,t){if(ms=-1,gs=0,ge&6)throw Error(q(327));var n=e.callbackNode;if(to()&&e.callbackNode!==n)return null;var r=Ps(e,e===Je?We:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ws(e,r);else{t=r;var o=ge;ge|=2;var i=zm();(Je!==e||We!==t)&&(xn=null,ho=Fe()+500,xr(e,t));do try{Sv();break}catch(u){Gm(e,u)}while(!0);Ju(),Os.current=i,ge=o,be!==null?t=0:(Je=null,We=0,t=qe)}if(t!==0){if(t===2&&(o=Aa(e),o!==0&&(r=o,t=nu(e,o))),t===1)throw n=_i,xr(e,0),On(e,r),_t(e,Fe()),n;if(t===6)On(e,r);else{if(o=e.current.alternate,!(r&30)&&!_v(o)&&(t=Ws(e,r),t===2&&(i=Aa(e),i!==0&&(r=i,t=nu(e,i))),t===1))throw n=_i,xr(e,0),On(e,r),_t(e,Fe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:hr(e,mt,xn);break;case 3:if(On(e,r),(r&130023424)===r&&(t=lc+500-Fe(),10<t)){if(Ps(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){lt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Fa(hr.bind(null,e,mt,xn),t);break}hr(e,mt,xn);break;case 4:if(On(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-jt(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xv(r/1960))-r,10<r){e.timeoutHandle=Fa(hr.bind(null,e,mt,xn),r);break}hr(e,mt,xn);break;case 5:hr(e,mt,xn);break;default:throw Error(q(329))}}}return _t(e,Fe()),e.callbackNode===n?bm.bind(null,e):null}function nu(e,t){var n=ti;return e.current.memoizedState.isDehydrated&&(xr(e,t).flags|=256),e=Ws(e,t),e!==2&&(t=mt,mt=n,t!==null&&ru(t)),e}function ru(e){mt===null?mt=e:mt.push.apply(mt,e)}function _v(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!tn(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function On(e,t){for(t&=~sc,t&=~gl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-jt(t),r=1<<n;e[n]=-1,t&=~r}}function zd(e){if(ge&6)throw Error(q(327));to();var t=Ps(e,0);if(!(t&1))return _t(e,Fe()),null;var n=Ws(e,t);if(e.tag!==0&&n===2){var r=Aa(e);r!==0&&(t=r,n=nu(e,r))}if(n===1)throw n=_i,xr(e,0),On(e,t),_t(e,Fe()),n;if(n===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hr(e,mt,xn),_t(e,Fe()),null}function ac(e,t){var n=ge;ge|=1;try{return e(t)}finally{ge=n,ge===0&&(ho=Fe()+500,fl&&sr())}}function Nr(e){Yn!==null&&Yn.tag===0&&!(ge&6)&&to();var t=ge;ge|=1;var n=Gt.transition,r=Ce;try{if(Gt.transition=null,Ce=1,e)return e()}finally{Ce=r,Gt.transition=n,ge=t,!(ge&6)&&sr()}}function uc(){Nt=Wr.current,Ae(Wr)}function xr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Xy(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(qu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Us();break;case 3:fo(),Ae(vt),Ae(ot),Zu();break;case 5:Qu(r);break;case 4:fo();break;case 13:Ae(Pe);break;case 19:Ae(Pe);break;case 10:Yu(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Je=e,be=e=tr(e.current,null),We=Nt=t,qe=0,_i=null,sc=gl=wr=0,mt=ti=null,gr!==null){for(t=0;t<gr.length;t++)if(n=gr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}gr=null}return e}function Gm(e,t){do{var n=be;try{if(Ju(),fs.current=$s,qs){for(var r=Re.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}qs=!1}if(Tr=0,Oe=Be=Re=null,jo=!1,yi=0,ic.current=null,n===null||n.return===null){qe=1,_i=t,be=null;break}e:{var i=e,s=n.return,u=n,d=t;if(t=We,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,f=u,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Id(s);if(g!==null){g.flags&=-257,Ad(g,s,u,i,t),g.mode&1&&Nd(i,c,t),t=g,d=c;var v=t.updateQueue;if(v===null){var T=new Set;T.add(d),t.updateQueue=T}else v.add(d);break e}else{if(!(t&1)){Nd(i,c,t),cc();break e}d=Error(q(426))}}else if(ke&&u.mode&1){var U=Id(s);if(U!==null){!(U.flags&65536)&&(U.flags|=256),Ad(U,s,u,i,t),$u(po(d,u));break e}}i=d=po(d,u),qe!==4&&(qe=2),ti===null?ti=[i]:ti.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=Sm(i,d,t);_d(i,y);break e;case 1:u=d;var x=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(jn===null||!jn.has(_)))){i.flags|=65536,t&=-t,i.lanes|=t;var E=Em(i,u,t);_d(i,E);break e}}i=i.return}while(i!==null)}Bm(n)}catch(k){t=k,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function zm(){var e=Os.current;return Os.current=$s,e===null?$s:e}function cc(){(qe===0||qe===3||qe===2)&&(qe=4),Je===null||!(wr&268435455)&&!(gl&268435455)||On(Je,We)}function Ws(e,t){var n=ge;ge|=2;var r=zm();(Je!==e||We!==t)&&(xn=null,xr(e,t));do try{Cv();break}catch(o){Gm(e,o)}while(!0);if(Ju(),ge=n,Os.current=r,be!==null)throw Error(q(261));return Je=null,We=0,qe}function Cv(){for(;be!==null;)Hm(be)}function Sv(){for(;be!==null&&!Y0();)Hm(be)}function Hm(e){var t=$m(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?Bm(e):be=t,ic.current=null}function Bm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=mv(n,t),n!==null){n.flags&=32767,be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,be=null;return}}else if(n=hv(n,t,Nt),n!==null){be=n;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);qe===0&&(qe=5)}function hr(e,t,n){var r=Ce,o=Gt.transition;try{Gt.transition=null,Ce=1,Ev(e,t,n,r)}finally{Gt.transition=o,Ce=r}return null}function Ev(e,t,n,r){do to();while(Yn!==null);if(ge&6)throw Error(q(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(ry(e,i),e===Je&&(be=Je=null,We=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ji||(ji=!0,Om(ks,function(){return to(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var s=Ce;Ce=1;var u=ge;ge|=4,ic.current=null,yv(e,n),Fm(n,e),qy(La),Rs=!!Da,La=Da=null,e.current=n,vv(n),W0(),ge=u,Ce=s,Gt.transition=i}else e.current=n;if(ji&&(ji=!1,Yn=e,Ys=o),i=e.pendingLanes,i===0&&(jn=null),Q0(n.stateNode),_t(e,Fe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Js)throw Js=!1,e=eu,eu=null,e;return Ys&1&&e.tag!==0&&to(),i=e.pendingLanes,i&1?e===tu?ni++:(ni=0,tu=e):ni=0,sr(),null}function to(){if(Yn!==null){var e=Sh(Ys),t=Gt.transition,n=Ce;try{if(Gt.transition=null,Ce=16>e?16:e,Yn===null)var r=!1;else{if(e=Yn,Yn=null,Ys=0,ge&6)throw Error(q(331));var o=ge;for(ge|=4,Z=e.current;Z!==null;){var i=Z,s=i.child;if(Z.flags&16){var u=i.deletions;if(u!==null){for(var d=0;d<u.length;d++){var c=u[d];for(Z=c;Z!==null;){var f=Z;switch(f.tag){case 0:case 11:case 15:ei(8,f,i)}var p=f.child;if(p!==null)p.return=f,Z=p;else for(;Z!==null;){f=Z;var h=f.sibling,g=f.return;if(Dm(f),f===c){Z=null;break}if(h!==null){h.return=g,Z=h;break}Z=g}}}var v=i.alternate;if(v!==null){var T=v.child;if(T!==null){v.child=null;do{var U=T.sibling;T.sibling=null,T=U}while(T!==null)}}Z=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,Z=s;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ei(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Z=y;break e}Z=i.return}}var x=e.current;for(Z=x;Z!==null;){s=Z;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,Z=_;else e:for(s=x;Z!==null;){if(u=Z,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ml(9,u)}}catch(k){Ue(u,u.return,k)}if(u===s){Z=null;break e}var E=u.sibling;if(E!==null){E.return=u.return,Z=E;break e}Z=u.return}}if(ge=o,sr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(ll,e)}catch{}r=!0}return r}finally{Ce=n,Gt.transition=t}}return!1}function Hd(e,t,n){t=po(n,t),t=Sm(e,t,1),e=Zn(e,t,1),t=lt(),e!==null&&(Ai(e,1,t),_t(e,t))}function Ue(e,t,n){if(e.tag===3)Hd(e,e,n);else for(;t!==null;){if(t.tag===3){Hd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))){e=po(n,e),e=Em(t,e,1),t=Zn(t,e,1),e=lt(),t!==null&&(Ai(t,1,e),_t(t,e));break}}t=t.return}}function Tv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=lt(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(We&n)===n&&(qe===4||qe===3&&(We&130023424)===We&&500>Fe()-lc?xr(e,0):sc|=n),_t(e,t)}function qm(e,t){t===0&&(e.mode&1?(t=qi,qi<<=1,!(qi&130023424)&&(qi=4194304)):t=1);var n=lt();e=An(e,t),e!==null&&(Ai(e,t,n),_t(e,n))}function wv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qm(e,n)}function Nv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),qm(e,n)}var $m;$m=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vt.current)gt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gt=!1,pv(e,t,n);gt=!!(e.flags&131072)}else gt=!1,ke&&t.flags&1048576&&Wh(t,bs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;hs(e,t),e=t.pendingProps;var o=ao(t,ot.current);eo(t,n),o=ec(null,t,r,e,o,n);var i=tc();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(i=!0,Fs(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ku(t),o.updater=hl,t.stateNode=o,o._reactInternals=t,qa(t,r,e,n),t=Ja(null,t,r,!0,i,n)):(t.tag=0,ke&&i&&Bu(t),it(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(hs(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Av(r),e=Wt(r,e),o){case 0:t=Oa(null,t,r,e,n);break e;case 1:t=Rd(null,t,r,e,n);break e;case 11:t=kd(null,t,r,e,n);break e;case 14:t=Pd(null,t,r,Wt(r.type,e),n);break e}throw Error(q(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),Oa(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),Rd(e,t,r,o,n);case 3:e:{if(Im(t),e===null)throw Error(q(387));r=t.pendingProps,i=t.memoizedState,o=i.element,em(e,t),Hs(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=po(Error(q(423)),t),t=Md(e,t,r,n,o);break e}else if(r!==o){o=po(Error(q(424)),t),t=Md(e,t,r,n,o);break e}else for(It=Qn(t.stateNode.containerInfo.firstChild),At=t,ke=!0,Qt=null,n=Zh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(uo(),r===o){t=kn(e,t,n);break e}it(e,t,r,n)}t=t.child}return t;case 5:return tm(t),e===null&&za(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Ua(r,o)?s=null:i!==null&&Ua(r,i)&&(t.flags|=32),Nm(e,t),it(e,t,s,n),t.child;case 6:return e===null&&za(t),null;case 13:return Am(e,t,n);case 4:return Xu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=co(t,null,r,n):it(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),kd(e,t,r,o,n);case 7:return it(e,t,t.pendingProps,n),t.child;case 8:return it(e,t,t.pendingProps.children,n),t.child;case 12:return it(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,Te(Gs,r._currentValue),r._currentValue=s,i!==null)if(tn(i.value,s)){if(i.children===o.children&&!vt.current){t=kn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(i.tag===1){d=wn(-1,n&-n),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?d.next=d:(d.next=f.next,f.next=d),c.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),Ha(i.return,n,t),u.lanes|=n;break}d=d.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(q(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ha(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}it(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,eo(t,n),o=Ht(o),r=r(o),t.flags|=1,it(e,t,r,n),t.child;case 14:return r=t.type,o=Wt(r,t.pendingProps),o=Wt(r.type,o),Pd(e,t,r,o,n);case 15:return Tm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),hs(e,t),t.tag=1,xt(r)?(e=!0,Fs(t)):e=!1,eo(t,n),Cm(t,r,o),qa(t,r,o,n),Ja(null,t,r,!0,e,n);case 19:return km(e,t,n);case 22:return wm(e,t,n)}throw Error(q(156,t.tag))};function Om(e,t){return vh(e,t)}function Iv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,n,r){return new Iv(e,t,n,r)}function dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Av(e){if(typeof e=="function")return dc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pu)return 11;if(e===Ru)return 14}return 2}function tr(e,t){var n=e.alternate;return n===null?(n=bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ys(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")dc(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case br:return _r(n.children,o,i,t);case ku:s=8,o|=8;break;case pa:return e=bt(12,n,t,o|2),e.elementType=pa,e.lanes=i,e;case ha:return e=bt(13,n,t,o),e.elementType=ha,e.lanes=i,e;case ma:return e=bt(19,n,t,o),e.elementType=ma,e.lanes=i,e;case th:return yl(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jp:s=10;break e;case eh:s=9;break e;case Pu:s=11;break e;case Ru:s=14;break e;case Hn:s=16,r=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=bt(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function _r(e,t,n,r){return e=bt(7,e,r,t),e.lanes=n,e}function yl(e,t,n,r){return e=bt(22,e,r,t),e.elementType=th,e.lanes=n,e.stateNode={isHidden:!1},e}function ra(e,t,n){return e=bt(6,e,null,t),e.lanes=n,e}function oa(e,t,n){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bl(0),this.expirationTimes=bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function fc(e,t,n,r,o,i,s,u,d){return e=new kv(e,t,n,u,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=bt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ku(i),e}function Pv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Jm(e){if(!e)return rr;e=e._reactInternals;e:{if(kr(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var n=e.type;if(xt(n))return Jh(e,n,t)}return t}function Ym(e,t,n,r,o,i,s,u,d){return e=fc(n,r,!0,e,o,i,s,u,d),e.context=Jm(null),n=e.current,r=lt(),o=er(n),i=wn(r,o),i.callback=t??null,Zn(n,i,o),e.current.lanes=o,Ai(e,o,r),_t(e,r),e}function vl(e,t,n,r){var o=t.current,i=lt(),s=er(o);return n=Jm(n),t.context===null?t.context=n:t.pendingContext=n,t=wn(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zn(o,t,s),e!==null&&(en(e,o,s,i),ds(e,o,s)),s}function Ks(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pc(e,t){Bd(e,t),(e=e.alternate)&&Bd(e,t)}function Rv(){return null}var Wm=typeof reportError=="function"?reportError:function(e){console.error(e)};function hc(e){this._internalRoot=e}xl.prototype.render=hc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));vl(e,t,null,null)};xl.prototype.unmount=hc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nr(function(){vl(null,e,null,null)}),t[In]=null}};function xl(e){this._internalRoot=e}xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=wh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$n.length&&t!==0&&t<$n[n].priority;n++);$n.splice(n,0,e),n===0&&Ih(e)}};function mc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qd(){}function Mv(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var c=Ks(s);i.call(c)}}var s=Ym(t,r,e,0,null,!1,!1,"",qd);return e._reactRootContainer=s,e[In]=s.current,fi(e.nodeType===8?e.parentNode:e),Nr(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var u=r;r=function(){var c=Ks(d);u.call(c)}}var d=fc(e,0,!1,null,null,!1,!1,"",qd);return e._reactRootContainer=d,e[In]=d.current,fi(e.nodeType===8?e.parentNode:e),Nr(function(){vl(t,d,n,r)}),d}function Cl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var u=o;o=function(){var d=Ks(s);u.call(d)}}vl(t,s,e,o)}else s=Mv(n,t,e,o,r);return Ks(s)}Eh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Bo(t.pendingLanes);n!==0&&(Lu(t,n|1),_t(t,Fe()),!(ge&6)&&(ho=Fe()+500,sr()))}break;case 13:Nr(function(){var r=An(e,1);if(r!==null){var o=lt();en(r,e,1,o)}}),pc(e,1)}};Uu=function(e){if(e.tag===13){var t=An(e,134217728);if(t!==null){var n=lt();en(t,e,134217728,n)}pc(e,134217728)}};Th=function(e){if(e.tag===13){var t=er(e),n=An(e,t);if(n!==null){var r=lt();en(n,e,t,r)}pc(e,t)}};wh=function(){return Ce};Nh=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};wa=function(e,t,n){switch(t){case"input":if(va(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=dl(r);if(!o)throw Error(q(90));rh(r),va(r,o)}}}break;case"textarea":ih(e,n);break;case"select":t=n.value,t!=null&&Xr(e,!!n.multiple,t,!1)}};fh=ac;ph=Nr;var Dv={usingClientEntryPoint:!1,Events:[Pi,Br,dl,ch,dh,ac]},Uo={findFiberByHostInstance:mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lv={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gh(e),e===null?null:e.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||Rv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var es=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!es.isDisabled&&es.supportsFiber)try{ll=es.inject(Lv),fn=es}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dv;Rt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mc(t))throw Error(q(200));return Pv(e,t,null,n)};Rt.createRoot=function(e,t){if(!mc(e))throw Error(q(299));var n=!1,r="",o=Wm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=fc(e,1,!1,null,null,n,!1,r,o),e[In]=t.current,fi(e.nodeType===8?e.parentNode:e),new hc(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=gh(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return Nr(e)};Rt.hydrate=function(e,t,n){if(!_l(t))throw Error(q(200));return Cl(null,e,t,!0,n)};Rt.hydrateRoot=function(e,t,n){if(!mc(e))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=Wm;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Ym(t,null,e,1,n??null,o,!1,i,s),e[In]=t.current,fi(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new xl(t)};Rt.render=function(e,t,n){if(!_l(t))throw Error(q(200));return Cl(null,e,t,!1,n)};Rt.unmountComponentAtNode=function(e){if(!_l(e))throw Error(q(40));return e._reactRootContainer?(Nr(function(){Cl(null,null,e,!1,function(){e._reactRootContainer=null,e[In]=null})}),!0):!1};Rt.unstable_batchedUpdates=ac;Rt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_l(n))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return Cl(e,t,n,!1,r)};Rt.version="18.3.1-next-f1338f8080-20240426";function Km(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Km)}catch(e){console.error(e)}}Km(),Kp.exports=Rt;var Uv=Kp.exports,$d=Uv;da.createRoot=$d.createRoot,da.hydrateRoot=$d.hydrateRoot;var Fv={value:()=>{}};function Sl(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new vs(n)}function vs(e){this._=e}function Vv(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}vs.prototype=Sl.prototype={constructor:vs,on:function(e,t){var n=this._,r=Vv(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=bv(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=Od(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Od(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new vs(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function bv(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Od(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Fv,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ou="http://www.w3.org/1999/xhtml";const Jd={svg:"http://www.w3.org/2000/svg",xhtml:ou,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function El(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Jd.hasOwnProperty(t)?{space:Jd[t],local:e}:e}function Gv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ou&&t.documentElement.namespaceURI===ou?t.createElement(e):t.createElementNS(n,e)}}function zv(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Xm(e){var t=El(e);return(t.local?zv:Gv)(t)}function Hv(){}function gc(e){return e==null?Hv:function(){return this.querySelector(e)}}function Bv(e){typeof e!="function"&&(e=gc(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,u=r[o]=new Array(s),d,c,f=0;f<s;++f)(d=i[f])&&(c=e.call(d,d.__data__,f,i))&&("__data__"in d&&(c.__data__=d.__data__),u[f]=c);return new Pt(r,this._parents)}function qv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $v(){return[]}function Qm(e){return e==null?$v:function(){return this.querySelectorAll(e)}}function Ov(e){return function(){return qv(e.apply(this,arguments))}}function Jv(e){typeof e=="function"?e=Ov(e):e=Qm(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],u=s.length,d,c=0;c<u;++c)(d=s[c])&&(r.push(e.call(d,d.__data__,c,s)),o.push(d));return new Pt(r,o)}function Zm(e){return function(){return this.matches(e)}}function jm(e){return function(t){return t.matches(e)}}var Yv=Array.prototype.find;function Wv(e){return function(){return Yv.call(this.children,e)}}function Kv(){return this.firstElementChild}function Xv(e){return this.select(e==null?Kv:Wv(typeof e=="function"?e:jm(e)))}var Qv=Array.prototype.filter;function Zv(){return Array.from(this.children)}function jv(e){return function(){return Qv.call(this.children,e)}}function ex(e){return this.selectAll(e==null?Zv:jv(typeof e=="function"?e:jm(e)))}function tx(e){typeof e!="function"&&(e=Zm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,u=r[o]=[],d,c=0;c<s;++c)(d=i[c])&&e.call(d,d.__data__,c,i)&&u.push(d);return new Pt(r,this._parents)}function eg(e){return new Array(e.length)}function nx(){return new Pt(this._enter||this._groups.map(eg),this._parents)}function Xs(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Xs.prototype={constructor:Xs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rx(e){return function(){return e}}function ox(e,t,n,r,o,i){for(var s=0,u,d=t.length,c=i.length;s<c;++s)(u=t[s])?(u.__data__=i[s],r[s]=u):n[s]=new Xs(e,i[s]);for(;s<d;++s)(u=t[s])&&(o[s]=u)}function ix(e,t,n,r,o,i,s){var u,d,c=new Map,f=t.length,p=i.length,h=new Array(f),g;for(u=0;u<f;++u)(d=t[u])&&(h[u]=g=s.call(d,d.__data__,u,t)+"",c.has(g)?o[u]=d:c.set(g,d));for(u=0;u<p;++u)g=s.call(e,i[u],u,i)+"",(d=c.get(g))?(r[u]=d,d.__data__=i[u],c.delete(g)):n[u]=new Xs(e,i[u]);for(u=0;u<f;++u)(d=t[u])&&c.get(h[u])===d&&(o[u]=d)}function sx(e){return e.__data__}function lx(e,t){if(!arguments.length)return Array.from(this,sx);var n=t?ix:ox,r=this._parents,o=this._groups;typeof e!="function"&&(e=rx(e));for(var i=o.length,s=new Array(i),u=new Array(i),d=new Array(i),c=0;c<i;++c){var f=r[c],p=o[c],h=p.length,g=ax(e.call(f,f&&f.__data__,c,r)),v=g.length,T=u[c]=new Array(v),U=s[c]=new Array(v),y=d[c]=new Array(h);n(f,p,T,U,y,g,t);for(var x=0,_=0,E,k;x<v;++x)if(E=T[x]){for(x>=_&&(_=x+1);!(k=U[_])&&++_<v;);E._next=k||null}}return s=new Pt(s,r),s._enter=u,s._exit=d,s}function ax(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ux(){return new Pt(this._exit||this._groups.map(eg),this._parents)}function cx(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function dx(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),u=new Array(o),d=0;d<s;++d)for(var c=n[d],f=r[d],p=c.length,h=u[d]=new Array(p),g,v=0;v<p;++v)(g=c[v]||f[v])&&(h[v]=g);for(;d<o;++d)u[d]=n[d];return new Pt(u,this._parents)}function fx(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function px(e){e||(e=hx);function t(p,h){return p&&h?e(p.__data__,h.__data__):!p-!h}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],u=s.length,d=o[i]=new Array(u),c,f=0;f<u;++f)(c=s[f])&&(d[f]=c);d.sort(t)}return new Pt(o,this._parents).order()}function hx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mx(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gx(){return Array.from(this)}function yx(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function vx(){let e=0;for(const t of this)++e;return e}function xx(){return!this.node()}function _x(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,u;i<s;++i)(u=o[i])&&e.call(u,u.__data__,i,o);return this}function Cx(e){return function(){this.removeAttribute(e)}}function Sx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ex(e,t){return function(){this.setAttribute(e,t)}}function Tx(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wx(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Nx(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ix(e,t){var n=El(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Sx:Cx:typeof t=="function"?n.local?Nx:wx:n.local?Tx:Ex)(n,t))}function tg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ax(e){return function(){this.style.removeProperty(e)}}function kx(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Px(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Rx(e,t,n){return arguments.length>1?this.each((t==null?Ax:typeof t=="function"?Px:kx)(e,t,n??"")):mo(this.node(),e)}function mo(e,t){return e.style.getPropertyValue(t)||tg(e).getComputedStyle(e,null).getPropertyValue(t)}function Mx(e){return function(){delete this[e]}}function Dx(e,t){return function(){this[e]=t}}function Lx(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ux(e,t){return arguments.length>1?this.each((t==null?Mx:typeof t=="function"?Lx:Dx)(e,t)):this.node()[e]}function ng(e){return e.trim().split(/^|\s+/)}function yc(e){return e.classList||new rg(e)}function rg(e){this._node=e,this._names=ng(e.getAttribute("class")||"")}rg.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function og(e,t){for(var n=yc(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function ig(e,t){for(var n=yc(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Fx(e){return function(){og(this,e)}}function Vx(e){return function(){ig(this,e)}}function bx(e,t){return function(){(t.apply(this,arguments)?og:ig)(this,e)}}function Gx(e,t){var n=ng(e+"");if(arguments.length<2){for(var r=yc(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?bx:t?Fx:Vx)(n,t))}function zx(){this.textContent=""}function Hx(e){return function(){this.textContent=e}}function Bx(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function qx(e){return arguments.length?this.each(e==null?zx:(typeof e=="function"?Bx:Hx)(e)):this.node().textContent}function $x(){this.innerHTML=""}function Ox(e){return function(){this.innerHTML=e}}function Jx(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Yx(e){return arguments.length?this.each(e==null?$x:(typeof e=="function"?Jx:Ox)(e)):this.node().innerHTML}function Wx(){this.nextSibling&&this.parentNode.appendChild(this)}function Kx(){return this.each(Wx)}function Xx(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qx(){return this.each(Xx)}function Zx(e){var t=typeof e=="function"?e:Xm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jx(){return null}function e_(e,t){var n=typeof e=="function"?e:Xm(e),r=t==null?jx:typeof t=="function"?t:gc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function t_(){var e=this.parentNode;e&&e.removeChild(this)}function n_(){return this.each(t_)}function r_(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function o_(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function i_(e){return this.select(e?o_:r_)}function s_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function l_(e){return function(t){e.call(this,t,this.__data__)}}function a_(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function u_(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function c_(e,t,n){return function(){var r=this.__on,o,i=l_(t);if(r){for(var s=0,u=r.length;s<u;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function d_(e,t,n){var r=a_(e+""),o,i=r.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,c=u.length,f;d<c;++d)for(o=0,f=u[d];o<i;++o)if((s=r[o]).type===f.type&&s.name===f.name)return f.value}return}for(u=t?c_:u_,o=0;o<i;++o)this.each(u(r[o],t,n));return this}function sg(e,t,n){var r=tg(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function f_(e,t){return function(){return sg(this,e,t)}}function p_(e,t){return function(){return sg(this,e,t.apply(this,arguments))}}function h_(e,t){return this.each((typeof t=="function"?p_:f_)(e,t))}function*m_(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var lg=[null];function Pt(e,t){this._groups=e,this._parents=t}function Mi(){return new Pt([[document.documentElement]],lg)}function g_(){return this}Pt.prototype=Mi.prototype={constructor:Pt,select:Bv,selectAll:Jv,selectChild:Xv,selectChildren:ex,filter:tx,data:lx,enter:nx,exit:ux,join:cx,merge:dx,selection:g_,order:fx,sort:px,call:mx,nodes:gx,node:yx,size:vx,empty:xx,each:_x,attr:Ix,style:Rx,property:Ux,classed:Gx,text:qx,html:Yx,raise:Kx,lower:Qx,append:Zx,insert:e_,remove:n_,clone:i_,datum:s_,on:d_,dispatch:h_,[Symbol.iterator]:m_};function Le(e){return typeof e=="string"?new Pt([[document.querySelector(e)]],[document.documentElement]):new Pt([[e]],lg)}function y_(e){let t;for(;t=e.sourceEvent;)e=t;return e}function _n(e,t){if(e=y_(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const v_={passive:!1},Ci={capture:!0,passive:!1};function ia(e){e.stopImmediatePropagation()}function no(e){e.preventDefault(),e.stopImmediatePropagation()}function ag(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",no,Ci);"onselectstart"in t?n.on("selectstart.drag",no,Ci):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ug(e,t){var n=e.document.documentElement,r=Le(e).on("dragstart.drag",null);t&&(r.on("click.drag",no,Ci),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ts=e=>()=>e;function iu(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:u,dx:d,dy:c,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:f}})}iu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function x_(e){return!e.ctrlKey&&!e.button}function __(){return this.parentNode}function C_(e,t){return t??{x:e.x,y:e.y}}function S_(){return navigator.maxTouchPoints||"ontouchstart"in this}function E_(){var e=x_,t=__,n=C_,r=S_,o={},i=Sl("start","drag","end"),s=0,u,d,c,f,p=0;function h(E){E.on("mousedown.drag",g).filter(r).on("touchstart.drag",U).on("touchmove.drag",y,v_).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(E,k){if(!(f||!e.call(this,E,k))){var N=_(this,t.call(this,E,k),E,k,"mouse");N&&(Le(E.view).on("mousemove.drag",v,Ci).on("mouseup.drag",T,Ci),ag(E.view),ia(E),c=!1,u=E.clientX,d=E.clientY,N("start",E))}}function v(E){if(no(E),!c){var k=E.clientX-u,N=E.clientY-d;c=k*k+N*N>p}o.mouse("drag",E)}function T(E){Le(E.view).on("mousemove.drag mouseup.drag",null),ug(E.view,c),no(E),o.mouse("end",E)}function U(E,k){if(e.call(this,E,k)){var N=E.changedTouches,R=t.call(this,E,k),z=N.length,J,B;for(J=0;J<z;++J)(B=_(this,R,E,k,N[J].identifier,N[J]))&&(ia(E),B("start",E,N[J]))}}function y(E){var k=E.changedTouches,N=k.length,R,z;for(R=0;R<N;++R)(z=o[k[R].identifier])&&(no(E),z("drag",E,k[R]))}function x(E){var k=E.changedTouches,N=k.length,R,z;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),R=0;R<N;++R)(z=o[k[R].identifier])&&(ia(E),z("end",E,k[R]))}function _(E,k,N,R,z,J){var B=i.copy(),se=_n(J||N,k),ue,ve,P;if((P=n.call(E,new iu("beforestart",{sourceEvent:N,target:h,identifier:z,active:s,x:se[0],y:se[1],dx:0,dy:0,dispatch:B}),R))!=null)return ue=P.x-se[0]||0,ve=P.y-se[1]||0,function D(M,O,L){var G=se,H;switch(M){case"start":o[z]=D,H=s++;break;case"end":delete o[z],--s;case"drag":se=_n(L||O,k),H=s;break}B.call(M,E,new iu(M,{sourceEvent:O,subject:P,target:h,identifier:z,active:H,x:se[0]+ue,y:se[1]+ve,dx:se[0]-G[0],dy:se[1]-G[1],dispatch:B}),R)}}return h.filter=function(E){return arguments.length?(e=typeof E=="function"?E:ts(!!E),h):e},h.container=function(E){return arguments.length?(t=typeof E=="function"?E:ts(E),h):t},h.subject=function(E){return arguments.length?(n=typeof E=="function"?E:ts(E),h):n},h.touchable=function(E){return arguments.length?(r=typeof E=="function"?E:ts(!!E),h):r},h.on=function(){var E=i.on.apply(i,arguments);return E===i?h:E},h.clickDistance=function(E){return arguments.length?(p=(E=+E)*E,h):Math.sqrt(p)},h}function vc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function cg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Di(){}var Si=.7,Qs=1/Si,ro="\\s*([+-]?\\d+)\\s*",Ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",T_=/^#([0-9a-f]{3,8})$/,w_=new RegExp(`^rgb\\(${ro},${ro},${ro}\\)$`),N_=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),I_=new RegExp(`^rgba\\(${ro},${ro},${ro},${Ei}\\)$`),A_=new RegExp(`^rgba\\(${hn},${hn},${hn},${Ei}\\)$`),k_=new RegExp(`^hsl\\(${Ei},${hn},${hn}\\)$`),P_=new RegExp(`^hsla\\(${Ei},${hn},${hn},${Ei}\\)$`),Yd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vc(Di,Ti,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wd,formatHex:Wd,formatHex8:R_,formatHsl:M_,formatRgb:Kd,toString:Kd});function Wd(){return this.rgb().formatHex()}function R_(){return this.rgb().formatHex8()}function M_(){return dg(this).formatHsl()}function Kd(){return this.rgb().formatRgb()}function Ti(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=T_.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Xd(t):n===3?new yt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ns(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ns(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=w_.exec(e))?new yt(t[1],t[2],t[3],1):(t=N_.exec(e))?new yt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=I_.exec(e))?ns(t[1],t[2],t[3],t[4]):(t=A_.exec(e))?ns(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=k_.exec(e))?jd(t[1],t[2]/100,t[3]/100,1):(t=P_.exec(e))?jd(t[1],t[2]/100,t[3]/100,t[4]):Yd.hasOwnProperty(e)?Xd(Yd[e]):e==="transparent"?new yt(NaN,NaN,NaN,0):null}function Xd(e){return new yt(e>>16&255,e>>8&255,e&255,1)}function ns(e,t,n,r){return r<=0&&(e=t=n=NaN),new yt(e,t,n,r)}function D_(e){return e instanceof Di||(e=Ti(e)),e?(e=e.rgb(),new yt(e.r,e.g,e.b,e.opacity)):new yt}function su(e,t,n,r){return arguments.length===1?D_(e):new yt(e,t,n,r??1)}function yt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}vc(yt,su,cg(Di,{brighter(e){return e=e==null?Qs:Math.pow(Qs,e),new yt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Si:Math.pow(Si,e),new yt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yt(Cr(this.r),Cr(this.g),Cr(this.b),Zs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qd,formatHex:Qd,formatHex8:L_,formatRgb:Zd,toString:Zd}));function Qd(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}`}function L_(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}${vr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zd(){const e=Zs(this.opacity);return`${e===1?"rgb(":"rgba("}${Cr(this.r)}, ${Cr(this.g)}, ${Cr(this.b)}${e===1?")":`, ${e})`}`}function Zs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Cr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vr(e){return e=Cr(e),(e<16?"0":"")+e.toString(16)}function jd(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Zt(e,t,n,r)}function dg(e){if(e instanceof Zt)return new Zt(e.h,e.s,e.l,e.opacity);if(e instanceof Di||(e=Ti(e)),!e)return new Zt;if(e instanceof Zt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,u=i-o,d=(i+o)/2;return u?(t===i?s=(n-r)/u+(n<r)*6:n===i?s=(r-t)/u+2:s=(t-n)/u+4,u/=d<.5?i+o:2-i-o,s*=60):u=d>0&&d<1?0:s,new Zt(s,u,d,e.opacity)}function U_(e,t,n,r){return arguments.length===1?dg(e):new Zt(e,t,n,r??1)}function Zt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}vc(Zt,U_,cg(Di,{brighter(e){return e=e==null?Qs:Math.pow(Qs,e),new Zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Si:Math.pow(Si,e),new Zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new yt(sa(e>=240?e-240:e+120,o,r),sa(e,o,r),sa(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Zt(ef(this.h),rs(this.s),rs(this.l),Zs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zs(this.opacity);return`${e===1?"hsl(":"hsla("}${ef(this.h)}, ${rs(this.s)*100}%, ${rs(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ef(e){return e=(e||0)%360,e<0?e+360:e}function rs(e){return Math.max(0,Math.min(1,e||0))}function sa(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const fg=e=>()=>e;function F_(e,t){return function(n){return e+n*t}}function V_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function b_(e){return(e=+e)==1?pg:function(t,n){return n-t?V_(t,n,e):fg(isNaN(t)?n:t)}}function pg(e,t){var n=t-e;return n?F_(e,n):fg(isNaN(e)?t:e)}const tf=function e(t){var n=b_(t);function r(o,i){var s=n((o=su(o)).r,(i=su(i)).r),u=n(o.g,i.g),d=n(o.b,i.b),c=pg(o.opacity,i.opacity);return function(f){return o.r=s(f),o.g=u(f),o.b=d(f),o.opacity=c(f),o+""}}return r.gamma=e,r}(1);function qn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var lu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,la=new RegExp(lu.source,"g");function G_(e){return function(){return e}}function z_(e){return function(t){return e(t)+""}}function H_(e,t){var n=lu.lastIndex=la.lastIndex=0,r,o,i,s=-1,u=[],d=[];for(e=e+"",t=t+"";(r=lu.exec(e))&&(o=la.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),u[s]?u[s]+=i:u[++s]=i),(r=r[0])===(o=o[0])?u[s]?u[s]+=o:u[++s]=o:(u[++s]=null,d.push({i:s,x:qn(r,o)})),n=la.lastIndex;return n<t.length&&(i=t.slice(n),u[s]?u[s]+=i:u[++s]=i),u.length<2?d[0]?z_(d[0].x):G_(t):(t=d.length,function(c){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(c);return u.join("")})}var nf=180/Math.PI,au={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hg(e,t,n,r,o,i){var s,u,d;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(d=e*n+t*r)&&(n-=e*d,r-=t*d),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,d/=u),e*r<t*n&&(e=-e,t=-t,d=-d,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*nf,skewX:Math.atan(d)*nf,scaleX:s,scaleY:u}}var os;function B_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?au:hg(t.a,t.b,t.c,t.d,t.e,t.f)}function q_(e){return e==null||(os||(os=document.createElementNS("http://www.w3.org/2000/svg","g")),os.setAttribute("transform",e),!(e=os.transform.baseVal.consolidate()))?au:(e=e.matrix,hg(e.a,e.b,e.c,e.d,e.e,e.f))}function mg(e,t,n,r){function o(c){return c.length?c.pop()+" ":""}function i(c,f,p,h,g,v){if(c!==p||f!==h){var T=g.push("translate(",null,t,null,n);v.push({i:T-4,x:qn(c,p)},{i:T-2,x:qn(f,h)})}else(p||h)&&g.push("translate("+p+t+h+n)}function s(c,f,p,h){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),h.push({i:p.push(o(p)+"rotate(",null,r)-2,x:qn(c,f)})):f&&p.push(o(p)+"rotate("+f+r)}function u(c,f,p,h){c!==f?h.push({i:p.push(o(p)+"skewX(",null,r)-2,x:qn(c,f)}):f&&p.push(o(p)+"skewX("+f+r)}function d(c,f,p,h,g,v){if(c!==p||f!==h){var T=g.push(o(g)+"scale(",null,",",null,")");v.push({i:T-4,x:qn(c,p)},{i:T-2,x:qn(f,h)})}else(p!==1||h!==1)&&g.push(o(g)+"scale("+p+","+h+")")}return function(c,f){var p=[],h=[];return c=e(c),f=e(f),i(c.translateX,c.translateY,f.translateX,f.translateY,p,h),s(c.rotate,f.rotate,p,h),u(c.skewX,f.skewX,p,h),d(c.scaleX,c.scaleY,f.scaleX,f.scaleY,p,h),c=f=null,function(g){for(var v=-1,T=h.length,U;++v<T;)p[(U=h[v]).i]=U.x(g);return p.join("")}}}var $_=mg(B_,"px, ","px)","deg)"),O_=mg(q_,", ",")",")"),J_=1e-12;function rf(e){return((e=Math.exp(e))+1/e)/2}function Y_(e){return((e=Math.exp(e))-1/e)/2}function W_(e){return((e=Math.exp(2*e))-1)/(e+1)}const K_=function e(t,n,r){function o(i,s){var u=i[0],d=i[1],c=i[2],f=s[0],p=s[1],h=s[2],g=f-u,v=p-d,T=g*g+v*v,U,y;if(T<J_)y=Math.log(h/c)/t,U=function(R){return[u+R*g,d+R*v,c*Math.exp(t*R*y)]};else{var x=Math.sqrt(T),_=(h*h-c*c+r*T)/(2*c*n*x),E=(h*h-c*c-r*T)/(2*h*n*x),k=Math.log(Math.sqrt(_*_+1)-_),N=Math.log(Math.sqrt(E*E+1)-E);y=(N-k)/t,U=function(R){var z=R*y,J=rf(k),B=c/(n*x)*(J*W_(t*z+k)-Y_(k));return[u+B*g,d+B*v,c*J/rf(t*z+k)]}}return U.duration=y*1e3*t/Math.SQRT2,U}return o.rho=function(i){var s=Math.max(.001,+i),u=s*s,d=u*u;return e(s,u,d)},o}(Math.SQRT2,2,4);var go=0,$o=0,Fo=0,gg=1e3,js,Oo,el=0,Ir=0,Tl=0,wi=typeof performance=="object"&&performance.now?performance:Date,yg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xc(){return Ir||(yg(X_),Ir=wi.now()+Tl)}function X_(){Ir=0}function tl(){this._call=this._time=this._next=null}tl.prototype=vg.prototype={constructor:tl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xc():+n)+(t==null?0:+t),!this._next&&Oo!==this&&(Oo?Oo._next=this:js=this,Oo=this),this._call=e,this._time=n,uu()},stop:function(){this._call&&(this._call=null,this._time=1/0,uu())}};function vg(e,t,n){var r=new tl;return r.restart(e,t,n),r}function Q_(){xc(),++go;for(var e=js,t;e;)(t=Ir-e._time)>=0&&e._call.call(void 0,t),e=e._next;--go}function of(){Ir=(el=wi.now())+Tl,go=$o=0;try{Q_()}finally{go=0,j_(),Ir=0}}function Z_(){var e=wi.now(),t=e-el;t>gg&&(Tl-=t,el=e)}function j_(){for(var e,t=js,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:js=n);Oo=e,uu(r)}function uu(e){if(!go){$o&&($o=clearTimeout($o));var t=e-Ir;t>24?(e<1/0&&($o=setTimeout(of,e-wi.now()-Tl)),Fo&&(Fo=clearInterval(Fo))):(Fo||(el=wi.now(),Fo=setInterval(Z_,gg)),go=1,yg(of))}}function sf(e,t,n){var r=new tl;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var eC=Sl("start","end","cancel","interrupt"),tC=[],xg=0,lf=1,cu=2,xs=3,af=4,du=5,_s=6;function wl(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;nC(e,n,{name:t,index:r,group:o,on:eC,tween:tC,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:xg})}function _c(e,t){var n=nn(e,t);if(n.state>xg)throw new Error("too late; already scheduled");return n}function mn(e,t){var n=nn(e,t);if(n.state>xs)throw new Error("too late; already running");return n}function nn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nC(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=vg(i,0,n.time);function i(c){n.state=lf,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var f,p,h,g;if(n.state!==lf)return d();for(f in r)if(g=r[f],g.name===n.name){if(g.state===xs)return sf(s);g.state===af?(g.state=_s,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[f]):+f<t&&(g.state=_s,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[f])}if(sf(function(){n.state===xs&&(n.state=af,n.timer.restart(u,n.delay,n.time),u(c))}),n.state=cu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===cu){for(n.state=xs,o=new Array(h=n.tween.length),f=0,p=-1;f<h;++f)(g=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++p]=g);o.length=p+1}}function u(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(d),n.state=du,1),p=-1,h=o.length;++p<h;)o[p].call(e,f);n.state===du&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=_s,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Cs(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>cu&&r.state<du,r.state=_s,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function rC(e){return this.each(function(){Cs(this,e)})}function oC(e,t){var n,r;return function(){var o=mn(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,u=r.length;s<u;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function iC(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=mn(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var u={name:t,value:n},d=0,c=o.length;d<c;++d)if(o[d].name===t){o[d]=u;break}d===c&&o.push(u)}i.tween=o}}function sC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=nn(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?oC:iC)(n,e,t))}function Cc(e,t,n){var r=e._id;return e.each(function(){var o=mn(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return nn(o,r).value[t]}}function _g(e,t){var n;return(typeof t=="number"?qn:t instanceof Ti?tf:(n=Ti(t))?(t=n,tf):H_)(e,t)}function lC(e){return function(){this.removeAttribute(e)}}function aC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uC(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function cC(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function dC(e,t,n){var r,o,i;return function(){var s,u=n(this),d;return u==null?void this.removeAttribute(e):(s=this.getAttribute(e),d=u+"",s===d?null:s===r&&d===o?i:(o=d,i=t(r=s,u)))}}function fC(e,t,n){var r,o,i;return function(){var s,u=n(this),d;return u==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),d=u+"",s===d?null:s===r&&d===o?i:(o=d,i=t(r=s,u)))}}function pC(e,t){var n=El(e),r=n==="transform"?O_:_g;return this.attrTween(e,typeof t=="function"?(n.local?fC:dC)(n,r,Cc(this,"attr."+e,t)):t==null?(n.local?aC:lC)(n):(n.local?cC:uC)(n,r,t))}function hC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gC(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&mC(e,i)),n}return o._value=t,o}function yC(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&hC(e,i)),n}return o._value=t,o}function vC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=El(e);return this.tween(n,(r.local?gC:yC)(r,t))}function xC(e,t){return function(){_c(this,e).delay=+t.apply(this,arguments)}}function _C(e,t){return t=+t,function(){_c(this,e).delay=t}}function CC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xC:_C)(t,e)):nn(this.node(),t).delay}function SC(e,t){return function(){mn(this,e).duration=+t.apply(this,arguments)}}function EC(e,t){return t=+t,function(){mn(this,e).duration=t}}function TC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SC:EC)(t,e)):nn(this.node(),t).duration}function wC(e,t){if(typeof t!="function")throw new Error;return function(){mn(this,e).ease=t}}function NC(e){var t=this._id;return arguments.length?this.each(wC(t,e)):nn(this.node(),t).ease}function IC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;mn(this,e).ease=n}}function AC(e){if(typeof e!="function")throw new Error;return this.each(IC(this._id,e))}function kC(e){typeof e!="function"&&(e=Zm(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,u=r[o]=[],d,c=0;c<s;++c)(d=i[c])&&e.call(d,d.__data__,c,i)&&u.push(d);return new Pn(r,this._parents,this._name,this._id)}function PC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),u=0;u<i;++u)for(var d=t[u],c=n[u],f=d.length,p=s[u]=new Array(f),h,g=0;g<f;++g)(h=d[g]||c[g])&&(p[g]=h);for(;u<r;++u)s[u]=t[u];return new Pn(s,this._parents,this._name,this._id)}function RC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function MC(e,t,n){var r,o,i=RC(t)?_c:mn;return function(){var s=i(this,e),u=s.on;u!==r&&(o=(r=u).copy()).on(t,n),s.on=o}}function DC(e,t){var n=this._id;return arguments.length<2?nn(this.node(),n).on.on(e):this.each(MC(n,e,t))}function LC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function UC(){return this.on("end.remove",LC(this._id))}function FC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=gc(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var u=r[s],d=u.length,c=i[s]=new Array(d),f,p,h=0;h<d;++h)(f=u[h])&&(p=e.call(f,f.__data__,h,u))&&("__data__"in f&&(p.__data__=f.__data__),c[h]=p,wl(c[h],t,n,h,c,nn(f,n)));return new Pn(i,this._parents,t,n)}function VC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qm(e));for(var r=this._groups,o=r.length,i=[],s=[],u=0;u<o;++u)for(var d=r[u],c=d.length,f,p=0;p<c;++p)if(f=d[p]){for(var h=e.call(f,f.__data__,p,d),g,v=nn(f,n),T=0,U=h.length;T<U;++T)(g=h[T])&&wl(g,t,n,T,h,v);i.push(h),s.push(f)}return new Pn(i,s,t,n)}var bC=Mi.prototype.constructor;function GC(){return new bC(this._groups,this._parents)}function zC(e,t){var n,r,o;return function(){var i=mo(this,e),s=(this.style.removeProperty(e),mo(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function Cg(e){return function(){this.style.removeProperty(e)}}function HC(e,t,n){var r,o=n+"",i;return function(){var s=mo(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function BC(e,t,n){var r,o,i;return function(){var s=mo(this,e),u=n(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(e),mo(this,e))),s===d?null:s===r&&d===o?i:(o=d,i=t(r=s,u))}}function qC(e,t){var n,r,o,i="style."+t,s="end."+i,u;return function(){var d=mn(this,e),c=d.on,f=d.value[i]==null?u||(u=Cg(t)):void 0;(c!==n||o!==f)&&(r=(n=c).copy()).on(s,o=f),d.on=r}}function $C(e,t,n){var r=(e+="")=="transform"?$_:_g;return t==null?this.styleTween(e,zC(e,r)).on("end.style."+e,Cg(e)):typeof t=="function"?this.styleTween(e,BC(e,r,Cc(this,"style."+e,t))).each(qC(this._id,e)):this.styleTween(e,HC(e,r,t),n).on("end.style."+e,null)}function OC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function JC(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&OC(e,s,n)),r}return i._value=t,i}function YC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,JC(e,t,n??""))}function WC(e){return function(){this.textContent=e}}function KC(e){return function(){var t=e(this);this.textContent=t??""}}function XC(e){return this.tween("text",typeof e=="function"?KC(Cc(this,"text",e)):WC(e==null?"":e+""))}function QC(e){return function(t){this.textContent=e.call(this,t)}}function ZC(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&QC(o)),t}return r._value=e,r}function jC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ZC(e))}function eS(){for(var e=this._name,t=this._id,n=Sg(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],u=s.length,d,c=0;c<u;++c)if(d=s[c]){var f=nn(d,t);wl(d,e,n,c,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Pn(r,this._parents,e,n)}function tS(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var u={value:s},d={value:function(){--o===0&&i()}};n.each(function(){var c=mn(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(d)),c.on=t}),o===0&&i()})}var nS=0;function Pn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Sg(){return++nS}var yn=Mi.prototype;Pn.prototype={constructor:Pn,select:FC,selectAll:VC,selectChild:yn.selectChild,selectChildren:yn.selectChildren,filter:kC,merge:PC,selection:GC,transition:eS,call:yn.call,nodes:yn.nodes,node:yn.node,size:yn.size,empty:yn.empty,each:yn.each,on:DC,attr:pC,attrTween:vC,style:$C,styleTween:YC,text:XC,textTween:jC,remove:UC,tween:sC,delay:CC,duration:TC,ease:NC,easeVarying:AC,end:tS,[Symbol.iterator]:yn[Symbol.iterator]};function rS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var oS={time:null,delay:0,duration:250,ease:rS};function iS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function sS(e){var t,n;e instanceof Pn?(t=e._id,e=e._name):(t=Sg(),(n=oS).time=xc(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],u=s.length,d,c=0;c<u;++c)(d=s[c])&&wl(d,e,t,c,s,n||iS(d,t));return new Pn(r,this._parents,e,t)}Mi.prototype.interrupt=rC;Mi.prototype.transition=sS;function lS(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function aS(){return this.eachAfter(lS)}function uS(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function cS(e,t){for(var n=this,r=[n],o,i,s=-1;n=r.pop();)if(e.call(t,n,++s,this),o=n.children)for(i=o.length-1;i>=0;--i)r.push(o[i]);return this}function dS(e,t){for(var n=this,r=[n],o=[],i,s,u,d=-1;n=r.pop();)if(o.push(n),i=n.children)for(s=0,u=i.length;s<u;++s)r.push(i[s]);for(;n=o.pop();)e.call(t,n,++d,this);return this}function fS(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function pS(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,o=r&&r.length;--o>=0;)n+=r[o].value;t.value=n})}function hS(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function mS(e){for(var t=this,n=gS(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var o=r.length;e!==n;)r.splice(o,0,e),e=e.parent;return r}function gS(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),o=null;for(e=n.pop(),t=r.pop();e===t;)o=e,e=n.pop(),t=r.pop();return o}function yS(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function vS(){return Array.from(this)}function xS(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function _S(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*CS(){var e=this,t,n=[e],r,o,i;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(o=0,i=r.length;o<i;++o)n.push(r[o]);while(n.length)}function Sc(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=TS)):t===void 0&&(t=ES);for(var n=new Ni(e),r,o=[n],i,s,u,d;r=o.pop();)if((s=t(r.data))&&(d=(s=Array.from(s)).length))for(r.children=s,u=d-1;u>=0;--u)o.push(i=s[u]=new Ni(s[u])),i.parent=r,i.depth=r.depth+1;return n.eachBefore(NS)}function SS(){return Sc(this).eachBefore(wS)}function ES(e){return e.children}function TS(e){return Array.isArray(e)?e[1]:null}function wS(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function NS(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ni(e){this.data=e,this.depth=this.height=0,this.parent=null}Ni.prototype=Sc.prototype={constructor:Ni,count:aS,each:uS,eachAfter:dS,eachBefore:cS,find:fS,sum:pS,sort:hS,path:mS,ancestors:yS,descendants:vS,leaves:xS,links:_S,copy:SS,[Symbol.iterator]:CS};function IS(e,t){return e.parent===t.parent?1:2}function aa(e){var t=e.children;return t?t[0]:e.t}function ua(e){var t=e.children;return t?t[t.length-1]:e.t}function AS(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function kS(e){for(var t=0,n=0,r=e.children,o=r.length,i;--o>=0;)i=r[o],i.z+=t,i.m+=t,t+=i.s+(n+=i.c)}function PS(e,t,n){return e.a.parent===t.parent?e.a:n}function Ss(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Ss.prototype=Object.create(Ni.prototype);function RS(e){for(var t=new Ss(e,0),n,r=[t],o,i,s,u;n=r.pop();)if(i=n._.children)for(n.children=new Array(u=i.length),s=u-1;s>=0;--s)r.push(o=n.children[s]=new Ss(i[s],s)),o.parent=n;return(t.parent=new Ss(null,0)).children=[t],t}function uf(){var e=IS,t=1,n=1,r=null;function o(c){var f=RS(c);if(f.eachAfter(i),f.parent.m=-f.z,f.eachBefore(s),r)c.eachBefore(d);else{var p=c,h=c,g=c;c.eachBefore(function(x){x.x<p.x&&(p=x),x.x>h.x&&(h=x),x.depth>g.depth&&(g=x)});var v=p===h?1:e(p,h)/2,T=v-p.x,U=t/(h.x+v+T),y=n/(g.depth||1);c.eachBefore(function(x){x.x=(x.x+T)*U,x.y=x.depth*y})}return c}function i(c){var f=c.children,p=c.parent.children,h=c.i?p[c.i-1]:null;if(f){kS(c);var g=(f[0].z+f[f.length-1].z)/2;h?(c.z=h.z+e(c._,h._),c.m=c.z-g):c.z=g}else h&&(c.z=h.z+e(c._,h._));c.parent.A=u(c,h,c.parent.A||p[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function u(c,f,p){if(f){for(var h=c,g=c,v=f,T=h.parent.children[0],U=h.m,y=g.m,x=v.m,_=T.m,E;v=ua(v),h=aa(h),v&&h;)T=aa(T),g=ua(g),g.a=c,E=v.z+x-h.z-U+e(v._,h._),E>0&&(AS(PS(v,c,p),c,E),U+=E,y+=E),x+=v.m,U+=h.m,_+=T.m,y+=g.m;v&&!ua(g)&&(g.t=v,g.m+=x-y),h&&!aa(T)&&(T.t=h,T.m+=U-_,p=c)}return p}function d(c){c.x*=t,c.y=c.depth*n}return o.separation=function(c){return arguments.length?(e=c,o):e},o.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],o):r?null:[t,n]},o.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],o):r?[t,n]:null},o}const is=e=>()=>e;function MS(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Tn(e,t,n){this.k=e,this.x=t,this.y=n}Tn.prototype={constructor:Tn,scale:function(e){return e===1?this:new Tn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Tn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ec=new Tn(1,0,0);Tn.prototype;function ca(e){e.stopImmediatePropagation()}function Vo(e){e.preventDefault(),e.stopImmediatePropagation()}function DS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function LS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function cf(){return this.__zoom||Ec}function US(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function FS(){return navigator.maxTouchPoints||"ontouchstart"in this}function VS(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function bS(){var e=DS,t=LS,n=VS,r=US,o=FS,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],u=250,d=K_,c=Sl("start","zoom","end"),f,p,h,g=500,v=150,T=0,U=10;function y(P){P.property("__zoom",cf).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",J).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",se).on("touchmove.zoom",ue).on("touchend.zoom touchcancel.zoom",ve).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(P,D,M,O){var L=P.selection?P.selection():P;L.property("__zoom",cf),P!==L?k(P,D,M,O):L.interrupt().each(function(){N(this,arguments).event(O).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},y.scaleBy=function(P,D,M,O){y.scaleTo(P,function(){var L=this.__zoom.k,G=typeof D=="function"?D.apply(this,arguments):D;return L*G},M,O)},y.scaleTo=function(P,D,M,O){y.transform(P,function(){var L=t.apply(this,arguments),G=this.__zoom,H=M==null?E(L):typeof M=="function"?M.apply(this,arguments):M,j=G.invert(H),ne=typeof D=="function"?D.apply(this,arguments):D;return n(_(x(G,ne),H,j),L,s)},M,O)},y.translateBy=function(P,D,M,O){y.transform(P,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof M=="function"?M.apply(this,arguments):M),t.apply(this,arguments),s)},null,O)},y.translateTo=function(P,D,M,O,L){y.transform(P,function(){var G=t.apply(this,arguments),H=this.__zoom,j=O==null?E(G):typeof O=="function"?O.apply(this,arguments):O;return n(Ec.translate(j[0],j[1]).scale(H.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof M=="function"?-M.apply(this,arguments):-M),G,s)},O,L)};function x(P,D){return D=Math.max(i[0],Math.min(i[1],D)),D===P.k?P:new Tn(D,P.x,P.y)}function _(P,D,M){var O=D[0]-M[0]*P.k,L=D[1]-M[1]*P.k;return O===P.x&&L===P.y?P:new Tn(P.k,O,L)}function E(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function k(P,D,M,O){P.on("start.zoom",function(){N(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(O).end()}).tween("zoom",function(){var L=this,G=arguments,H=N(L,G).event(O),j=t.apply(L,G),ne=M==null?E(j):typeof M=="function"?M.apply(L,G):M,Ve=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),ce=L.__zoom,le=typeof D=="function"?D.apply(L,G):D,he=d(ce.invert(ne).concat(Ve/ce.k),le.invert(ne).concat(Ve/le.k));return function(Ge){if(Ge===1)Ge=le;else{var ze=he(Ge),on=Ve/ze[2];Ge=new Tn(on,ne[0]-ze[0]*on,ne[1]-ze[1]*on)}H.zoom(null,Ge)}})}function N(P,D,M){return!M&&P.__zooming||new R(P,D)}function R(P,D){this.that=P,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(P,D),this.taps=0}R.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,D){return this.mouse&&P!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var D=Le(this.that).datum();c.call(P,this.that,new MS(P,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:c}),D)}};function z(P,...D){if(!e.apply(this,arguments))return;var M=N(this,D).event(P),O=this.__zoom,L=Math.max(i[0],Math.min(i[1],O.k*Math.pow(2,r.apply(this,arguments)))),G=_n(P);if(M.wheel)(M.mouse[0][0]!==G[0]||M.mouse[0][1]!==G[1])&&(M.mouse[1]=O.invert(M.mouse[0]=G)),clearTimeout(M.wheel);else{if(O.k===L)return;M.mouse=[G,O.invert(G)],Cs(this),M.start()}Vo(P),M.wheel=setTimeout(H,v),M.zoom("mouse",n(_(x(O,L),M.mouse[0],M.mouse[1]),M.extent,s));function H(){M.wheel=null,M.end()}}function J(P,...D){if(h||!e.apply(this,arguments))return;var M=P.currentTarget,O=N(this,D,!0).event(P),L=Le(P.view).on("mousemove.zoom",ne,!0).on("mouseup.zoom",Ve,!0),G=_n(P,M),H=P.clientX,j=P.clientY;ag(P.view),ca(P),O.mouse=[G,this.__zoom.invert(G)],Cs(this),O.start();function ne(ce){if(Vo(ce),!O.moved){var le=ce.clientX-H,he=ce.clientY-j;O.moved=le*le+he*he>T}O.event(ce).zoom("mouse",n(_(O.that.__zoom,O.mouse[0]=_n(ce,M),O.mouse[1]),O.extent,s))}function Ve(ce){L.on("mousemove.zoom mouseup.zoom",null),ug(ce.view,O.moved),Vo(ce),O.event(ce).end()}}function B(P,...D){if(e.apply(this,arguments)){var M=this.__zoom,O=_n(P.changedTouches?P.changedTouches[0]:P,this),L=M.invert(O),G=M.k*(P.shiftKey?.5:2),H=n(_(x(M,G),O,L),t.apply(this,D),s);Vo(P),u>0?Le(this).transition().duration(u).call(k,H,O,P):Le(this).call(y.transform,H,O,P)}}function se(P,...D){if(e.apply(this,arguments)){var M=P.touches,O=M.length,L=N(this,D,P.changedTouches.length===O).event(P),G,H,j,ne;for(ca(P),H=0;H<O;++H)j=M[H],ne=_n(j,this),ne=[ne,this.__zoom.invert(ne),j.identifier],L.touch0?!L.touch1&&L.touch0[2]!==ne[2]&&(L.touch1=ne,L.taps=0):(L.touch0=ne,G=!0,L.taps=1+!!f);f&&(f=clearTimeout(f)),G&&(L.taps<2&&(p=ne[0],f=setTimeout(function(){f=null},g)),Cs(this),L.start())}}function ue(P,...D){if(this.__zooming){var M=N(this,D).event(P),O=P.changedTouches,L=O.length,G,H,j,ne;for(Vo(P),G=0;G<L;++G)H=O[G],j=_n(H,this),M.touch0&&M.touch0[2]===H.identifier?M.touch0[0]=j:M.touch1&&M.touch1[2]===H.identifier&&(M.touch1[0]=j);if(H=M.that.__zoom,M.touch1){var Ve=M.touch0[0],ce=M.touch0[1],le=M.touch1[0],he=M.touch1[1],Ge=(Ge=le[0]-Ve[0])*Ge+(Ge=le[1]-Ve[1])*Ge,ze=(ze=he[0]-ce[0])*ze+(ze=he[1]-ce[1])*ze;H=x(H,Math.sqrt(Ge/ze)),j=[(Ve[0]+le[0])/2,(Ve[1]+le[1])/2],ne=[(ce[0]+he[0])/2,(ce[1]+he[1])/2]}else if(M.touch0)j=M.touch0[0],ne=M.touch0[1];else return;M.zoom("touch",n(_(H,j,ne),M.extent,s))}}function ve(P,...D){if(this.__zooming){var M=N(this,D).event(P),O=P.changedTouches,L=O.length,G,H;for(ca(P),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),G=0;G<L;++G)H=O[G],M.touch0&&M.touch0[2]===H.identifier?delete M.touch0:M.touch1&&M.touch1[2]===H.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(H=_n(H,this),Math.hypot(p[0]-H[0],p[1]-H[1])<U)){var j=Le(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return y.wheelDelta=function(P){return arguments.length?(r=typeof P=="function"?P:is(+P),y):r},y.filter=function(P){return arguments.length?(e=typeof P=="function"?P:is(!!P),y):e},y.touchable=function(P){return arguments.length?(o=typeof P=="function"?P:is(!!P),y):o},y.extent=function(P){return arguments.length?(t=typeof P=="function"?P:is([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),y):t},y.scaleExtent=function(P){return arguments.length?(i[0]=+P[0],i[1]=+P[1],y):[i[0],i[1]]},y.translateExtent=function(P){return arguments.length?(s[0][0]=+P[0][0],s[1][0]=+P[1][0],s[0][1]=+P[0][1],s[1][1]=+P[1][1],y):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},y.constrain=function(P){return arguments.length?(n=P,y):n},y.duration=function(P){return arguments.length?(u=+P,y):u},y.interpolate=function(P){return arguments.length?(d=P,y):d},y.on=function(){var P=c.on.apply(c,arguments);return P===c?y:P},y.clickDistance=function(P){return arguments.length?(T=(P=+P)*P,y):Math.sqrt(T)},y.tapDistance=function(P){return arguments.length?(U=+P,y):U},y}var W=(e=>(e.SYSTEM_ROOT="SYSTEM_ROOT",e.TRANSFORMER="TRANSFORMER",e.METER="METER",e.DISTRIBUTION_BOARD="DISTRIBUTION_BOARD",e.BREAKER="BREAKER",e.SWITCH="SWITCH",e.LOAD="LOAD",e.GENERATOR="GENERATOR",e))(W||{});const Es={strokeColor:"#334155",lineStyle:"solid",startMarker:"none",endMarker:"arrow"},Tc={engineer:"Engineer Name",approvedBy:"Approver",date:new Date().toLocaleDateString(),revision:"A",organization:"My Organization"},bo={id:"proj-1",name:"My First Project",printMetadata:Tc,pages:[{id:"page-1",name:"Main Distribution",items:[]}]},Xt={[W.SYSTEM_ROOT]:{color:"#475569",icon:"domain"},[W.TRANSFORMER]:{color:"#eab308",icon:"electric_bolt"},[W.METER]:{color:"#3b82f6",icon:"speed"},[W.DISTRIBUTION_BOARD]:{color:"#64748b",icon:"dns"},[W.BREAKER]:{color:"#f97316",icon:"toggle_off"},[W.SWITCH]:{color:"#22c55e",icon:"toggle_on"},[W.LOAD]:{color:"#a855f7",icon:"lightbulb"},[W.GENERATOR]:{color:"#ef4444",icon:"letter_g"}},un={domain:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z",electric_bolt:"M15 2L2.5 13 13 14l-5 7 1 1 12.5-11L11 10l5-7z",speed:"M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z",dns:"M20 13H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM20 3H4c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z",toggle_off:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5zM7 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z",toggle_on:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5zm0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z",lightbulb:"M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z",settings_power:"M7 24h2v-2H7v2zm4 0h2v-2h-2v2zm4 0h2v-2h-2v2zM16.59 5.41L15.17 4L12 7.17L8.83 4L7.41 5.41L10.59 8.59C8.46 9.06 7 11.27 7 13.5V21h10v-7.5c0-2.23-1.46-4.44-3.59-4.91L16.59 5.41z",help:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z",add:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",visibility:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24 5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3 3-1.34 3-3 3z",visibility_off:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z",folder_open:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z",delete:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",link:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z",link_off:"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.55-1.15 2.84-2.63 3.05l1.52 1.52C20.8 15.77 22 14.02 22 12c0-2.76-2.24-5-5-5zM3.27 3L2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-.25.03-.5.08-.73L6.29 13.5l.6.6.3.3 3.74 3.74.6.6 8.2 8.2L21 25.73 3.27 3z",close:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",letter_g:"M20.64 12.2c0-.63-.06-1.25-.16-1.84H12v3.49h4.84a4.14 4.14 0 0 1-1.8 2.71v2.25h2.92c1.71-1.58 2.69-3.9 2.69-6.61zM12 21c2.43 0 4.47-.8 5.96-2.18l-2.91-2.25c-.81.54-1.84.86-3.05.86-2.34 0-4.32-1.58-5.03-3.71H3.85v2.33C5.33 18.97 8.47 21 12 21zM6.97 13.71c-.18-.53-.28-1.09-.28-1.67s.1-1.14.28-1.67V8.05H3.85a8.55 8.55 0 0 0 0 7.99l3.12-2.33zM12 6.88c1.32 0 2.51.45 3.45 1.35l2.58-2.59A9 9 0 0 0 12 3c-3.53 0-6.67 2.03-8.15 5.05l3.12 2.33c.71-2.13 2.69-3.71 5.03-3.71z",edit:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},df=["Schneider Electric Acti9","Siemens Sentron","ABB S200","Eaton xDigital","Legrand DX3","General Electric TE","Generic Heavy Duty","Smart Meter Three Phase","Caterpillar C15 Generator","Kohler Power System"],GS=({data:e,onNodeClick:t,onLinkClick:n,onDuplicateChild:r,onDeleteNode:o,onToggleCollapse:i,onGroupNode:s,onNodeMove:u,onAddRoot:d,onAddGenerator:c,onBackgroundClick:f,selectedNodeId:p,multiSelection:h,selectedLinkId:g,orientation:v,searchMatches:T,isConnectMode:U=!1,connectionSourceId:y=null,isPrintMode:x=!1,activeProject:_,onDisconnectLink:E,onEditPrintSettings:k,t:N,language:R,theme:z})=>{const J=K.useRef(null),B=K.useRef(null),[se,ue]=K.useState({width:800,height:600}),ve=K.useRef(Ec),P=R==="he"||R==="ar",D=z==="dark",M=D?"#0f172a":"#ffffff",O=D?"#1e293b":"#e2e8f0",L=D?"#cbd5e1":"#334155",G=D?"#f1f5f9":"#0f172a",H=D?"#1e293b":"#ffffff",j=D?"#334155":"#f8fafc",ne=D?"#94a3b8":"#475569",Ve=le=>le?{"Main Supply":N.defaultDesc.grid,"Standby Power":N.defaultDesc.gen,"Step Down/Up":N.defaultDesc.trans,"Independent Load":N.defaultDesc.load,"Grouped Components":N.inputPanel.groupNode}[le]||le:"",ce=(le,he)=>(!le||le.toUpperCase()===he||le.replace(/_/g," ").toUpperCase()===he.replace(/_/g," "))&&N.componentTypes[he]||le;return K.useEffect(()=>{B.current&&ue({width:B.current.offsetWidth,height:B.current.offsetHeight});const le=()=>{B.current&&ue({width:B.current.offsetWidth,height:B.current.offsetHeight})};return window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]),K.useEffect(()=>{if(!J.current)return;const le=Le(J.current);le.selectAll("*").remove(),le.on("click",C=>{C.defaultPrevented||f==null||f()});const he=le.append("defs");he.append("pattern").attr("id","dot-pattern").attr("width",20).attr("height",20).attr("patternUnits","userSpaceOnUse").append("circle").attr("cx",2).attr("cy",2).attr("r",1).attr("fill",O),le.style("background-color",M).style("background-image","url(#dot-pattern)");const{width:ze,height:on}=se;if(!e||e.length===0){const C=le.append("g").attr("transform",`translate(${ze/2},${on/2})`);C.append("circle").attr("r",40).attr("fill",j).attr("stroke",ne).attr("stroke-width",2).attr("stroke-dasharray","5,5").style("cursor","pointer").on("click",b=>{b.stopPropagation(),d&&d()}),C.append("path").attr("d",un.domain).attr("transform","translate(-16, -16) scale(1.33)").attr("fill",ne).style("pointer-events","none"),C.append("text").attr("y",60).attr("text-anchor","middle").style("font-size","14px").style("fill",ne).text(N.addFirstNode);const I=le.append("g").attr("transform",`translate(${ze/2},${on/2+120})`);I.append("rect").attr("x",-80).attr("y",-20).attr("width",160).attr("height",40).attr("rx",20).attr("fill","transparent").attr("stroke",ne).attr("stroke-dasharray","4,4").style("cursor","pointer").on("click",b=>{b.stopPropagation(),c&&c()}),I.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").style("font-size","12px").style("fill",ne).style("pointer-events","none").text(N.addStandaloneGen);return}const Eo={top:100,left:150};["arrow","circle","diamond"].forEach(C=>{const I=he.append("marker").attr("id",`${C}-start`).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto-start-reverse");C==="arrow"?I.append("path").attr("d","M10,0 L0,5 L10,10 z").attr("fill","context-stroke"):C==="circle"?I.append("circle").attr("cx",5).attr("cy",5).attr("r",4).attr("fill","context-stroke"):C==="diamond"&&I.append("path").attr("d","M5,0 L10,5 L5,10 L0,5 z").attr("fill","context-stroke");const b=he.append("marker").attr("id",`${C}-end`).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto");C==="arrow"?b.append("path").attr("d","M0,0 L10,5 L0,10 z").attr("fill","context-stroke"):C==="circle"?b.append("circle").attr("cx",5).attr("cy",5).attr("r",4).attr("fill","context-stroke"):C==="diamond"&&b.append("path").attr("d","M5,0 L10,5 L5,10 L0,5 z").attr("fill","context-stroke")}),he.append("marker").attr("id","arrow-end-extra").attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,0 L10,5 L0,10 z").attr("fill",D?"#f59e0b":"#d97706");const qt=le.append("g").attr("transform",`translate(${Eo.left},${Eo.top})`),$=bS().scaleExtent([.1,4]).on("zoom",C=>{ve.current=C.transform,qt.attr("transform",C.transform)});le.call($),le.call($.transform,ve.current);const Ct={id:"virtual-root",name:"Virtual Root",type:W.SYSTEM_ROOT,children:e},gn=Sc(Ct);gn.descendants().forEach(C=>{C.data.isCollapsed&&C.children&&(C._children=C.children,C.children=null)});const Xe=le.append("text").style("font-size","9px").style("font-weight","bold").style("visibility","hidden"),Li=C=>{var ln,Jt;if(C.data.id==="virtual-root")return{w:1,h:1};const I=C.data.shape==="circle",b=C.data.shape==="square";if(I||b)return{w:80,h:80};const Q=ce(C.data.name,C.data.type),V=C.data.componentNumber||N.componentTypes[C.data.type]||C.data.type,ee=C.data.model||"",ie=Ve(C.data.description);let de="";C.data.amps&&(de+=`${C.data.amps}A`),C.data.voltage&&(de+=`${C.data.voltage}V`),C.data.kva&&(de+=`${C.data.kva}kVA`);const we=((Q==null?void 0:Q.length)||0)*8.5,Et=((V==null?void 0:V.length)||0)*7.5,Tt=de.length*7.5,Ut=ee.length*7,sn=Math.min(ie.length*7,220);let dt=0;if(C.data.hasMeter){Xe.text(C.data.meterNumber||"");const Qe=((ln=Xe.node())==null?void 0:ln.getComputedTextLength())||0,Ur=20+(C.data.meterNumber?Qe+6:0);dt+=Ur}if(C.data.hasGeneratorConnection){Xe.text(C.data.generatorName||"");const Qe=((Jt=Xe.node())==null?void 0:Jt.getComputedTextLength())||0,Ur=20+(C.data.generatorName?Qe+6:0);dt+=Ur}C.data.hasMeter&&C.data.hasGeneratorConnection&&(dt+=5);const wt=Math.max(we,Et,Tt,Ut,sn,dt,90)+30;let $e=25;return $e+=24,$e+=16,de&&($e+=14),ee&&($e+=14),ie&&($e+=14),(C.data.hasMeter||C.data.hasGeneratorConnection)&&($e+=26),$e+=12,{w:wt,h:$e}};gn.each(C=>{const I=Li(C);C.width=I.w,C.height=I.h});const Un=gn.leaves().length,ar=gn.height+1;let ur;if(v==="horizontal"){const I=Math.max(on,Un*140),b=Math.max(ze,ar*350);ur=uf().size([I,b]).nodeSize([140,350]).separation((Q,V)=>{const ee=Q.height||100,ie=V.height||100;return((ee+ie)/2+20)/140*(Q.parent===V.parent?1:1.2)})}else{const I=Math.max(ze,Un*200),b=Math.max(on,ar*300);ur=uf().size([I,b]).nodeSize([200,300]).separation((Q,V)=>{const ee=Q.width||120,ie=V.width||120;return((ee+ie)/2+20)/200*(Q.parent===V.parent?1:1.2)})}ur(gn);const Fn=gn.descendants().filter(C=>C.depth>0),Dt=gn.links().filter(C=>C.source.data.id!=="virtual-root").map(C=>({source:C.source,target:C.target})),He=C=>{const I=C.width,b=C.height;return v==="horizontal"?{x:0,y:-b/2,w:I,h:b}:{x:-I/2,y:0,w:I,h:b}},Lt=(C,I)=>{const b=C.data.manualX||0,Q=C.data.manualY||0,V=I.data.manualX||0,ee=I.data.manualY||0;if(v==="horizontal"){const ie=C.y+C.width+b,de=C.x+Q,De=I.y+V,we=I.x+ee;return`M${ie},${de} H${(ie+De)/2} V${we} H${De}`}else{const ie=C.x+b,de=C.y+C.height+Q,De=I.x+V,we=I.y+ee;return`M${ie},${de} V${(de+we)/2} H${De} V${we}`}},ct=[],cr=new Map;Fn.forEach(C=>cr.set(C.data.id,C)),Fn.forEach(C=>{C.data.extraConnections&&C.data.extraConnections.forEach(I=>{const b=cr.get(I);b&&ct.push({source:b,target:C})})});const dr=qt.append("g").attr("class","links"),Rr=E_().on("start",function(C,I){I.descendants().forEach(V=>{V.__initialManualX=V.data.manualX||0,V.__initialManualY=V.data.manualY||0}),Le(this).attr("data-is-dragging","false")}).on("drag",function(C,I){const b=I;!b.__isDragging&&C.dx*C.dx+C.dy*C.dy>0&&(b.__totalDx=(b.__totalDx||0)+C.dx,b.__totalDy=(b.__totalDy||0)+C.dy,b.__totalDx**2+b.__totalDy**2>16&&(b.__isDragging=!0)),b.__isDragging&&b.descendants().forEach(V=>{const ee=(V.data.manualX||0)+C.dx,ie=(V.data.manualY||0)+C.dy;V.data.manualX=ee,V.data.manualY=ie;const de=qt.select(`g.node[data-id="${V.data.id}"]`),De=V.data.manualX||0,we=V.data.manualY||0;v==="horizontal"?de.attr("transform",`translate(${V.y+De},${V.x+we})`):de.attr("transform",`translate(${V.x+De},${V.y+we})`)})}).on("end",function(C,I){const b=I;if(b.__isDragging){b.__isDragging=!1,b.__totalDx=0,b.__totalDy=0;const Q=[];b.descendants().forEach(ee=>{Q.push({id:ee.data.id,x:ee.data.manualX||0,y:ee.data.manualY||0})}),u&&u(Q)}}),St=(C,I,b=!1)=>{C.attr("class",I).attr("data-target-id",Q=>Q.target.data.id).attr("d",Q=>Lt(Q.source,Q.target)).attr("fill","none").each(function(Q){var de;if(b)return;const V=Q.target.data.connectionStyle||{},ee=V.strokeColor||Q.target.data.customColor||((de=Xt[Q.target.data.type])==null?void 0:de.color)||L,ie=Q.target.data.id===g;I==="link-extra"?Le(this).attr("stroke",D?"#f59e0b":"#d97706").attr("stroke-width",2.5).attr("stroke-dasharray","8,5").attr("marker-end","url(#arrow-end-extra)").attr("opacity",.8):Le(this).attr("stroke",ee).attr("stroke-width",ie?4:2.5).attr("stroke-dasharray",V.lineStyle==="dashed"?"8,4":V.lineStyle==="dotted"?"2,4":"none").attr("marker-start",V.startMarker&&V.startMarker!=="none"?`url(#${V.startMarker}-start)`:null).attr("marker-end",V.endMarker&&V.endMarker!=="none"?`url(#${V.endMarker}-end)`:null).style("filter",ie?"drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))":"none").attr("opacity",()=>T?T.has(Q.source.data.id)||T.has(Q.target.data.id)?1:.1:.8)})};dr.selectAll("path.link-visible").data(Dt).enter().append("path").call(St,"link-visible"),dr.selectAll("path.link-extra").data(ct).enter().append("path").call(St,"link-extra"),dr.selectAll("path.link-hit").data(Dt).enter().append("path").attr("class","link-hit").attr("data-target-id",C=>C.target.data.id).attr("d",C=>Lt(C.source,C.target)).attr("fill","none").attr("stroke","transparent").attr("stroke-width",15).style("cursor","pointer").on("click",(C,I)=>{C.stopPropagation(),n(I.source.data.id,I.target.data.id)});const Se=qt.selectAll("g.node").data(Fn).enter().append("g").attr("class",C=>`node group ${C.data.id===p||h.has(C.data.id)?"selected":""}`).attr("data-id",C=>C.data.id).attr("transform",C=>{const I=C.data.manualX||0,b=C.data.manualY||0;return v==="horizontal"?`translate(${C.y+I},${C.x+b})`:`translate(${C.x+I},${C.y+b})`}).call(Rr).on("click",function(C,I){if(I.__isDragging){C.stopPropagation();return}C.defaultPrevented||(C.stopPropagation(),t(I.data,C.shiftKey))}).on("mouseenter",function(C,I){const b=I.data.id===p||h.has(I.data.id),Q=I.data.id===y,V=Le(this);V.style("cursor","move"),V.select(".action-buttons").style("opacity",1).style("pointer-events","all"),V.select(".node-bg").transition().duration(200).attr("fill",D?"#334155":"#e2e8f0").attr("stroke",Q?"#f59e0b":b?"#3b82f6":"#64748b")}).on("mouseleave",function(C,I){const b=I.data.id===p||h.has(I.data.id),Q=I.data.id===y,V=Le(this);b||V.select(".action-buttons").style("opacity",0).style("pointer-events","none"),V.select(".node-bg").transition().duration(200).attr("fill",ee=>ee.data.type===W.SYSTEM_ROOT?j:H).attr("stroke",Q?"#f59e0b":b?"#3b82f6":ne)}).style("cursor",()=>"move").style("opacity",C=>!T||T.has(C.data.id)||C.parent&&C.parent.data.id!=="virtual-root"&&T.has(C.parent.data.id)||C.children&&C.children.some(I=>T.has(I.data.id))||C._children&&C._children.some(I=>T.has(I.data.id))?1:.2);Se.each(function(C){const I=Le(this),b=C.data.shape||"rectangle",Q=He(C);b==="circle"?I.append("circle").attr("class","node-bg").attr("r",40).attr("cx",0).attr("cy",0).attr("fill",C.data.type===W.SYSTEM_ROOT?j:H).attr("stroke",V=>V.data.id===y?"#f59e0b":V.data.id===p||h.has(V.data.id)?"#3b82f6":V.data.type===W.SYSTEM_ROOT?"#64748b":ne).attr("stroke-width",V=>V.data.id===p||h.has(V.data.id)?3:1.5).style("filter",V=>V.data.id===p||h.has(V.data.id)?"drop-shadow(0 0 8px rgba(59, 130, 246, 0.3))":"drop-shadow(0 1px 2px rgba(0,0,0,0.1))"):b==="square"?I.append("rect").attr("class","node-bg").attr("width",80).attr("height",80).attr("x",-40).attr("y",-40).attr("rx",4).attr("fill",C.data.type===W.SYSTEM_ROOT?j:H).attr("stroke",V=>V.data.id===y?"#f59e0b":V.data.id===p||h.has(V.data.id)?"#3b82f6":ne).attr("stroke-width",V=>V.data.id===p||h.has(V.data.id)?3:1.5):(I.append("rect").attr("class","node-bg").attr("width",Q.w).attr("height",Q.h).attr("x",Q.x).attr("y",Q.y).attr("rx",12).attr("fill",C.data.type===W.SYSTEM_ROOT?j:H).attr("stroke",V=>V.data.id===y?"#f59e0b":V.data.id===p||h.has(V.data.id)?"#3b82f6":V.data.type===W.SYSTEM_ROOT?"#64748b":ne).attr("stroke-width",V=>V.data.id===p||h.has(V.data.id)||V.data.id===y?3:1.5).style("filter",V=>V.data.id===p||h.has(V.data.id)||V.data.id===y?"drop-shadow(0 0 8px rgba(59, 130, 246, 0.3))":"drop-shadow(0 1px 2px rgba(0,0,0,0.1))"),I.append("path").attr("d",V=>{const ie=He(V);return`M${ie.x},${ie.y+6} v6 a12,12 0 0 1 12,-12 h${ie.w-2*12} a12,12 0 0 1 12,12 v-6`}).attr("fill",V=>{var ee;return V.data.customColor||((ee=Xt[V.data.type])==null?void 0:ee.color)||"#94a3b8"}))});const Mr=Se.append("g").attr("transform",C=>{const I=C.data.shape||"rectangle",b=He(C);return I==="circle"||I==="square"?"translate(0, 0)":v==="horizontal"?`translate(${C.width/2}, ${b.y+25})`:`translate(0, ${b.y+25})`});Mr.each(function(C){var Q,V;const I=Le(this),b=C.data.customColor||((Q=Xt[C.data.type])==null?void 0:Q.color)||"#94a3b8";C.data.customImage?I.append("image").attr("xlink:href",C.data.customImage).attr("x",-20).attr("y",-20).attr("width",40).attr("height",40).style("clip-path","circle(20px at center)"):((C.data.shape||"rectangle")==="rectangle"&&I.append("circle").attr("r",16).attr("cx",0).attr("cy",0).attr("fill",D?"#1e293b":"#ffffff").attr("stroke",b).attr("stroke-width",1.5),I.append("path").attr("d",un[(V=Xt[C.data.type])==null?void 0:V.icon]||un.help).attr("transform","translate(-9, -9) scale(0.75)").attr("fill",b))}),Mr.each(function(C){const I=Le(this),b=C.data.shape||"rectangle";if(b==="circle"||b==="square")I.append("text").attr("x",0).attr("y",28).attr("text-anchor","middle").style("font-size","10px").style("font-weight","bold").style("fill",G).text(()=>ce(C.data.name,C.data.type));else{I.append("text").attr("x",0).attr("y",32).attr("text-anchor","middle").style("font-size","14px").style("font-weight","bold").style("fill",G).text(()=>ce(C.data.name,C.data.type)),I.append("text").attr("x",0).attr("y",48).attr("text-anchor","middle").style("font-size","10px").style("font-weight","bold").style("fill",()=>{var ee;return C.data.customColor||((ee=Xt[C.data.type])==null?void 0:ee.color)||"#94a3b8"}).style("opacity",.9).text(()=>C.data.componentNumber||N.componentTypes[C.data.type]||C.data.type),I.append("text").attr("x",0).attr("y",62).attr("text-anchor","middle").style("font-size","11px").style("fill",ne).text(()=>{const ee=[];return C.data.amps&&ee.push(`${C.data.amps}A`),C.data.voltage&&ee.push(`${C.data.voltage}V`),C.data.kva&&ee.push(`${C.data.kva}kVA`),ee.join(" | ")});let Q=62;C.data.model&&(Q+=14,I.append("text").attr("x",0).attr("y",Q).attr("text-anchor","middle").style("font-size","10px").style("font-style","italic").style("fill",ne).text(C.data.model));const V=Ve(C.data.description);V&&(Q+=14,I.append("text").attr("x",0).attr("y",Q).attr("text-anchor","middle").style("font-size","10px").style("fill",ne).text(V.length>30?V.substring(0,28)+"...":V))}}),Se.filter(C=>!!(C.data.isCollapsed&&C._children&&C._children.length>0)).append("circle").attr("r",8).attr("cx",C=>(C.data.shape||"rectangle")==="rectangle"?v==="horizontal"?C.width:0:35).attr("cy",C=>(C.data.shape||"rectangle")==="rectangle"?v==="horizontal"?0:C.height:35).attr("fill",O).attr("stroke",ne).attr("stroke-width",1).style("pointer-events","none"),Se.filter(C=>!!(C.data.isCollapsed&&C._children&&C._children.length>0)).append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",C=>(C.data.shape||"rectangle")==="rectangle"?v==="horizontal"?C.width:0:35).attr("y",C=>(C.data.shape||"rectangle")==="rectangle"?v==="horizontal"?0:C.height:35).attr("fill",ne).style("font-size","12px").style("font-weight","bold").text("+");const xe=C=>{if(C.data.shape&&C.data.shape!=="rectangle")return 35;const I=He(C);return I.y+I.h-24};Se.filter(C=>!!C.data.hasMeter).append("g").each(function(C){var ee;const I=Le(this),b=I.append("text").attr("y",9).attr("dominant-baseline","central").style("font-size","9px").style("font-weight","bold").style("fill","#3b82f6").style("direction","ltr").text(C.data.meterNumber||""),Q=((ee=b.node())==null?void 0:ee.getComputedTextLength())||0,V=20+(C.data.meterNumber?Q+6:0);b.attr("x",20),I.insert("rect","text").attr("height",18).attr("width",V).attr("rx",9).attr("fill",D?"#1e3a8a":"#dbeafe").attr("stroke","#3b82f6").attr("stroke-width",.5),I.append("path").attr("d",un.speed).attr("transform","translate(3, 3) scale(0.5)").attr("fill","#3b82f6"),C.data.shape&&C.data.shape!=="rectangle"?I.attr("transform","translate(25, -35)"):I.attr("transform",`translate(${He(C).x+8}, ${xe(C)})`)}),Se.filter(C=>!!C.data.hasGeneratorConnection).append("g").each(function(C){var ee;const I=Le(this),b=I.append("text").attr("y",9).attr("dominant-baseline","central").style("font-size","9px").style("font-weight","bold").style("fill","#ef4444").style("direction","ltr").text(C.data.generatorName||""),Q=((ee=b.node())==null?void 0:ee.getComputedTextLength())||0,V=20+(C.data.generatorName?Q+6:0);if(b.attr("x",20),I.insert("rect","text").attr("height",18).attr("width",V).attr("rx",9).attr("fill",D?"#7f1d1d":"#fee2e2").attr("stroke","#ef4444").attr("stroke-width",.5),I.append("path").attr("d",un.letter_g).attr("transform","translate(3, 3) scale(0.5)").attr("fill","#ef4444"),C.data.shape&&C.data.shape!=="rectangle")I.attr("transform",`translate(-${V+25}, -35)`);else{const ie=He(C),de=xe(C);I.attr("transform",`translate(${ie.x+ie.w-V-8}, ${de})`)}}),Se.append("g").attr("class","action-buttons").attr("transform",C=>{if(C.data.shape==="circle"||C.data.shape==="square")return"translate(50, 0)";const I=He(C);return`translate(${I.x+I.w+12}, ${I.y+I.h/2})`}).style("opacity",C=>C.data.id===p?1:0).style("pointer-events",C=>C.data.id===p?"all":"none").style("transition","opacity 0.2s").call(C=>{C.append("g").attr("transform","translate(0, -28)").style("cursor","pointer").on("click",(I,b)=>{I.stopPropagation(),r(b.data)}).call(I=>{I.append("circle").attr("r",10).attr("fill","#2563eb").attr("stroke","#1e40af").attr("stroke-width",1),I.append("path").attr("d",un.add).attr("transform","translate(-8, -8) scale(0.66)").attr("fill","white"),I.append("title").text(N.inputPanel.addConnection)}),C.filter(I=>I.children&&I.children.length>0||I._children&&I._children.length>0).append("g").attr("transform","translate(0, 0)").style("cursor","pointer").on("click",(I,b)=>{I.stopPropagation(),i(b.data)}).call(I=>{I.append("circle").attr("r",10).attr("fill","#475569").attr("stroke","#334155").attr("stroke-width",1),I.append("path").attr("d",b=>un[b.data.isCollapsed?"visibility_off":"visibility"]).attr("transform","translate(-8, -8) scale(0.66)").attr("fill","white"),I.append("title").text(b=>b.data.isCollapsed?N.inputPanel.expand:N.inputPanel.collapse)}),C.filter(I=>I.depth>1).append("g").attr("transform","translate(0, 28)").style("cursor","pointer").on("click",(I,b)=>{I.stopPropagation(),s(b.data)}).call(I=>{I.append("circle").attr("r",10).attr("fill","#eab308").attr("stroke","#ca8a04").attr("stroke-width",1),I.append("path").attr("d",un.folder_open).attr("transform","translate(-8, -8) scale(0.66)").attr("fill","white"),I.append("title").text(N.inputPanel.groupNode)}),C.append("g").attr("transform","translate(0, 56)").style("cursor","pointer").on("click",(I,b)=>{I.stopPropagation(),o(b.data)}).call(I=>{I.append("circle").attr("r",10).attr("fill","#ef4444").attr("stroke","#b91c1c").attr("stroke-width",1),I.append("path").attr("d",un.delete).attr("transform","translate(-8, -8) scale(0.66)").attr("fill","white"),I.append("title").text(N.inputPanel.deleteComponent)})});const To=qt.append("g").attr("class","labels");Dt.forEach(C=>{var Q,V,ee;const I=C.target,b=I.data;if((Q=b.connectionStyle)!=null&&Q.cableSize){const ie=C.source,de=ie.data,De=b,we=de.manualX||0,Et=de.manualY||0,Tt=De.manualX||0,Ut=De.manualY||0;let sn,dt;v==="horizontal"?(ie.y+ie.width+we,ie.x+Et,sn=I.y+Tt,dt=I.x+Ut):(ie.x+we,ie.y+ie.height+Et,sn=I.x+Tt,dt=I.y+Ut);let Ot,wt,$e=0,ln="middle";const Jt=25;if(v==="horizontal"?(Ot=sn-Jt,wt=dt,$e=0,ln=P?"start":"end"):(Ot=sn,wt=dt-Jt,$e=-90,ln=P?"end":"start"),!isNaN(Ot)&&!isNaN(wt)){const Qe=To.append("g").attr("transform",`translate(${Ot}, ${wt}) rotate(${$e})`).style("pointer-events","none"),Pl=(b.connectionStyle||{}).strokeColor||b.customColor||((V=Xt[b.type])==null?void 0:V.color)||L,Rl=Qe.append("rect").attr("rx",4).attr("fill",Pl).attr("stroke",D?"#ffffff":"none").attr("stroke-width",1).attr("opacity",1),fr=(ee=Qe.append("text").attr("text-anchor",ln).attr("dominant-baseline","middle").style("font-size","10px").style("font-weight","bold").style("fill","#ffffff").text(b.connectionStyle.cableSize).node())==null?void 0:ee.getBBox();fr&&Rl.attr("x",fr.x-3).attr("y",fr.y-3).attr("width",fr.width+3*2).attr("height",fr.height+3*2)}}});let $t=600,Ee=800,wo=0;if(Fn.forEach(C=>{const I=He(C),b=C.data.manualX||0,Q=C.data.manualY||0;let V,ee;v==="horizontal"?(V=C.y+b,ee=C.x+Q):(V=C.x+b,ee=C.y+Q),V+I.x;const ie=V+I.x+I.w,de=ee+I.y,De=ee+I.y+I.h;Ee=Math.max(Ee,ie),$t=Math.max($t,De),wo=Math.min(wo,de)}),Ee=Math.max(Ee,800),$t=Math.max($t,600),x&&_){const C=_.printMetadata||Tc,I=500,b=100,Q=Ee+40,V=$t+40-b,ee=qt.append("g").attr("transform",`translate(${Q}, ${V})`).style("cursor","pointer");ee.append("rect").attr("width",I).attr("height",b).attr("fill",D?"#1e293b":"#ffffff").attr("fill-opacity",.8).attr("stroke",G).attr("stroke-width",2).style("pointer-events","all").on("click",function(Ut){Ut.defaultPrevented||(Ut.stopPropagation(),k&&k())});const ie=P?I*.35:I*.65,de=b/3;ee.append("line").attr("x1",ie).attr("y1",0).attr("x2",ie).attr("y2",b).attr("stroke",G).attr("stroke-width",1).style("pointer-events","none"),ee.append("line").attr("x1",0).attr("y1",de).attr("x2",I).attr("y2",de).attr("stroke",G).attr("stroke-width",1).style("pointer-events","none"),ee.append("line").attr("x1",0).attr("y1",de*2).attr("x2",I).attr("y2",de*2).attr("stroke",G).attr("stroke-width",1).style("pointer-events","none");let De,we;P?(we=ie/2,De=ie+(I-ie)/2):(De=ie/2,we=ie+(I-ie)/2);const Et=(Ut,sn,dt,Ot,wt)=>{const $e=wt==="projectName"||wt==="organization"||wt==="engineer",ln=$e?P?I-ie:ie:P?ie:I-ie;let Jt=0;P?Jt=$e?ie:0:Jt=$e?0:ie,ee.append("rect").attr("x",Jt).attr("y",Ot-10).attr("width",ln).attr("height",de).attr("fill","white").attr("fill-opacity",.01).style("cursor","pointer").style("pointer-events","all").on("click",Qe=>{Qe.defaultPrevented||(Qe.stopPropagation(),k&&k(wt))}).append("title").text(`Edit ${Ut}`),ee.append("text").attr("x",dt).attr("y",Ot).text(Ut).attr("fill",G).attr("font-size","9px").attr("font-weight","bold").attr("text-anchor","middle").style("opacity",.7).style("pointer-events","none"),ee.append("text").attr("x",dt).attr("y",Ot+14).text(sn).attr("fill",G).attr("font-size","13px").attr("text-anchor","middle").style("pointer-events","none")},Tt=10;Et(N.printLayout.project,_.name,De,Tt,"projectName"),Et(N.printLayout.date,C.date,we,Tt,"date"),Et(N.printLayout.org,C.organization,De,de+Tt,"organization"),Et(N.printLayout.rev,C.revision,we,de+Tt,"revision"),Et(N.printLayout.engineer,C.engineer,De,de*2+Tt,"engineer"),Et(N.printLayout.approved,C.approvedBy,we,de*2+Tt,"approvedBy"),ee.on("mouseenter",function(){Le(this).select("rect").attr("stroke","#3b82f6").attr("stroke-width",3)}).on("mouseleave",function(){Le(this).select("rect").attr("stroke",G).attr("stroke-width",2)})}const Ui=Object.values(W),Vn=200,No=50+Ui.length*25;let Dr,Lr;if(x&&_){const b=Ee+40,Q=$t+40-100;Dr=b+500-Vn,Lr=Q-No-10}else Dr=Ee+50,Lr=wo;const bn=qt.append("g").attr("class","legend-group").attr("transform",`translate(${Dr}, ${Lr})`);bn.append("rect").attr("width",Vn).attr("height",No).attr("rx",8).attr("fill",D?"#1e293b":"#ffffff").attr("stroke",ne).attr("stroke-width",1).attr("opacity",.95),bn.append("text").attr("x",Vn/2).attr("y",25).attr("text-anchor","middle").attr("font-weight","bold").attr("fill",G).attr("font-size","12px").text(N.legend.title),Ui.forEach((C,I)=>{const b=50+I*25,Q=Xt[C];let V,ee,ie;P?(V=Vn-25,ee=Vn/2,ie="middle"):(V=25,ee=45,ie="start"),bn.append("circle").attr("cx",V).attr("cy",b).attr("r",8).attr("fill",D?"#0f172a":"#f8fafc").attr("stroke",Q.color).attr("stroke-width",1.5),bn.append("path").attr("d",un[Q.icon]).attr("transform",`translate(${V-6}, ${b-6}) scale(0.5)`).attr("fill",Q.color),bn.append("text").attr("x",ee).attr("y",b).attr("dominant-baseline","middle").attr("fill",G).attr("font-size","11px").attr("text-anchor",ie).text(N.componentTypes[C])})},[e,se,t,n,p,g,v,T,U,y,N,R,z,f,h,x,_,k,d,c,r,o,i,s,u,E]),m.jsx("div",{ref:B,className:`w-full h-full relative overflow-hidden ${D?"bg-slate-900":"bg-white"}`,style:{touchAction:"none"},children:m.jsx("svg",{id:"diagram-svg",ref:J,width:"100%",height:"100%",className:"block"})})},zS=({selectedNode:e,selectionMode:t,multiSelectionCount:n=0,onAdd:r,onAddIndependent:o,onEdit:i,onBulkEdit:s,onEditConnection:u,onDelete:d,onCancel:c,onDetach:f,onStartConnection:p,onNavigate:h,onDisconnectLink:g,t:v})=>{var P;const[T,U]=K.useState("add"),[y,x]=K.useState({name:"",componentNumber:"",type:W.BREAKER,model:"",amps:void 0,voltage:void 0,kva:void 0,description:"",customColor:void 0,shape:"rectangle",customImage:void 0,hasMeter:!1,meterNumber:"",hasGeneratorConnection:!1,generatorName:""}),[_,E]=K.useState(Es),k=K.useRef(null);K.useEffect(()=>{T==="edit"&&e?x({name:e.name,componentNumber:e.componentNumber||"",type:e.type,model:e.model||"",amps:e.amps,voltage:e.voltage,kva:e.kva,description:e.description||"",customColor:e.customColor,shape:e.shape||"rectangle",customImage:e.customImage,hasMeter:e.hasMeter||!1,meterNumber:e.meterNumber||"",hasGeneratorConnection:e.hasGeneratorConnection||!1,generatorName:e.generatorName||""}):T==="add"&&x({name:"",componentNumber:"",type:W.BREAKER,model:"",amps:void 0,voltage:void 0,kva:void 0,description:"",customColor:void 0,shape:"rectangle",customImage:void 0,hasMeter:!1,meterNumber:"",hasGeneratorConnection:!1,generatorName:""})},[T,e]),K.useEffect(()=>{!e&&n<=1&&U("add")},[e,n]),K.useEffect(()=>{var D,M,O,L,G,H;e&&t==="link"&&E({strokeColor:((D=e.connectionStyle)==null?void 0:D.strokeColor)||((M=Xt[e.type])==null?void 0:M.color)||"#475569",lineStyle:((O=e.connectionStyle)==null?void 0:O.lineStyle)||"solid",startMarker:((L=e.connectionStyle)==null?void 0:L.startMarker)||"none",endMarker:((G=e.connectionStyle)==null?void 0:G.endMarker)||"none",cableSize:((H=e.connectionStyle)==null?void 0:H.cableSize)||""})},[e,t]);const N=D=>{const{name:M,value:O,type:L}=D.target;x(G=>({...G,[M]:L==="checkbox"?D.target.checked:M==="amps"||M==="voltage"||M==="kva"?O===""?void 0:Number(O):O}))},R=D=>{const{name:M,value:O}=D.target,L={..._,[M]:O};E(L),u(L)},z=D=>{var O;const M=(O=D.target.files)==null?void 0:O[0];if(M){const L=new FileReader;L.onload=G=>{var j;const H=(j=G.target)==null?void 0:j.result;x(ne=>({...ne,customImage:H}))},L.readAsDataURL(M)}},J=()=>{x(D=>({...D,customImage:void 0})),k.current&&(k.current.value="")},B=D=>{D.preventDefault(),n>1&&s?s(y):T==="add"?(r(y),x(M=>({...M,name:"",componentNumber:"",model:"",amps:void 0,voltage:void 0,kva:void 0,description:"",customColor:void 0,shape:"rectangle",customImage:void 0,hasMeter:!1,meterNumber:"",hasGeneratorConnection:!1,generatorName:""}))):i(y)};if(n>1)return m.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 shadow-lg overflow-hidden sticky top-4",children:[m.jsxs("div",{className:"p-4 border-b border-slate-700 bg-slate-900 flex items-center justify-between",children:[m.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-blue-400",children:"layers"}),v.inputPanel.bulkEdit]}),m.jsxs("span",{className:"text-xs text-slate-400 bg-slate-800 px-2 py-1 rounded",children:[n," ",v.inputPanel.itemsSelected]})]}),m.jsxs("form",{onSubmit:B,className:"p-5 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.customColor}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"color",name:"customColor",value:y.customColor||"#475569",onChange:N,className:"h-8 w-12 bg-transparent border border-slate-700 rounded cursor-pointer"}),m.jsx("span",{className:"text-xs text-slate-500",children:"Apply to all"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.model}),m.jsx("input",{list:"models",name:"model",value:y.model,onChange:N,placeholder:"Update Model for all",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"}),m.jsx("datalist",{id:"models",children:df.map(D=>m.jsx("option",{value:D},D))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.shape}),m.jsxs("select",{name:"shape",value:y.shape||"rectangle",onChange:N,className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm",children:[m.jsx("option",{value:"rectangle",children:v.inputPanel.shapes.rectangle}),m.jsx("option",{value:"circle",children:v.inputPanel.shapes.circle}),m.jsx("option",{value:"square",children:v.inputPanel.shapes.square})]})]}),m.jsxs("div",{className:"pt-2",children:[m.jsx("button",{type:"submit",className:"w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium text-sm",children:v.inputPanel.applyBulk}),m.jsx("button",{type:"button",onClick:c,className:"w-full py-2 mt-2 text-slate-400 hover:text-white text-sm",children:v.inputPanel.close})]})]})]});if(!e)return m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsxs("div",{className:"bg-slate-800/50 border border-slate-700/50 rounded-xl p-4",children:[m.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-sm",children:"add_circle_outline"}),v.addIndependent]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("button",{onClick:()=>o(W.SYSTEM_ROOT),className:"p-2 bg-slate-700 hover:bg-slate-600 rounded text-left flex items-center gap-2 transition-colors",children:[m.jsx("span",{className:"material-icons-round text-slate-400 text-sm",children:"domain"}),m.jsx("span",{className:"text-xs text-slate-200",children:v.componentTypes[W.SYSTEM_ROOT]})]}),m.jsxs("button",{onClick:()=>o(W.GENERATOR),className:"p-2 bg-slate-700 hover:bg-slate-600 rounded text-left flex items-center gap-2 transition-colors",children:[m.jsx("span",{className:"material-icons-round text-red-400 text-sm",children:"settings_power"}),m.jsx("span",{className:"text-xs text-slate-200",children:v.componentTypes[W.GENERATOR]})]}),m.jsxs("button",{onClick:()=>o(W.TRANSFORMER),className:"p-2 bg-slate-700 hover:bg-slate-600 rounded text-left flex items-center gap-2 transition-colors",children:[m.jsx("span",{className:"material-icons-round text-yellow-400 text-sm",children:"electric_bolt"}),m.jsx("span",{className:"text-xs text-slate-200",children:v.componentTypes[W.TRANSFORMER]})]}),m.jsxs("button",{onClick:()=>o(W.LOAD),className:"p-2 bg-slate-700 hover:bg-slate-600 rounded text-left flex items-center gap-2 transition-colors",children:[m.jsx("span",{className:"material-icons-round text-purple-400 text-sm",children:"lightbulb"}),m.jsx("span",{className:"text-xs text-slate-200",children:v.componentTypes[W.LOAD]})]})]})]}),m.jsxs("div",{className:"p-6 text-center text-slate-500 bg-slate-900/30 rounded-lg border border-dashed border-slate-800 h-32 flex flex-col items-center justify-center",children:[m.jsx("span",{className:"material-icons-round text-4xl mb-3 opacity-50",children:"touch_app"}),m.jsx("p",{className:"text-xs",children:"Select a component in the diagram to view properties."})]}),m.jsxs("div",{className:"mt-2 p-4 rounded-lg bg-slate-800/30 border border-slate-700/30",children:[m.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-slate-500 mb-3",children:v.quickTips}),m.jsxs("ul",{className:"text-xs text-slate-400 space-y-2 list-disc pl-4",children:[m.jsx("li",{children:v.tip1}),m.jsx("li",{children:v.tip2}),m.jsx("li",{children:v.tip3}),m.jsx("li",{children:v.tip4})]})]})]});if(t==="link")return m.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 shadow-lg overflow-hidden sticky top-4",children:[m.jsxs("div",{className:"p-4 border-b border-slate-700 bg-slate-900 flex items-center justify-between",children:[m.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-amber-400",children:"timeline"}),v.inputPanel.linkStyle]}),m.jsx("button",{onClick:c,className:"text-slate-400 hover:text-white",children:m.jsx("span",{className:"material-icons-round",children:"close"})})]}),m.jsxs("div",{className:"p-5 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.strokeColor}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"color",name:"strokeColor",value:_.strokeColor,onChange:R,className:"h-8 w-12 bg-transparent border border-slate-700 rounded cursor-pointer"}),m.jsx("input",{type:"text",name:"strokeColor",value:_.strokeColor,onChange:R,className:"flex-1 bg-slate-900 border border-slate-700 text-white rounded px-3 py-1.5 text-sm uppercase"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.cableSize}),m.jsx("input",{type:"text",name:"cableSize",value:_.cableSize||"",onChange:R,placeholder:"e.g. 4x25mm",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.lineStyle}),m.jsxs("select",{name:"lineStyle",value:_.lineStyle,onChange:R,className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 text-sm",children:[m.jsx("option",{value:"solid",children:v.inputPanel.patterns.solid}),m.jsx("option",{value:"dashed",children:v.inputPanel.patterns.dashed}),m.jsx("option",{value:"dotted",children:v.inputPanel.patterns.dotted})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.startMarker}),m.jsxs("select",{name:"startMarker",value:_.startMarker,onChange:R,className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 text-sm",children:[m.jsx("option",{value:"none",children:v.inputPanel.markers.none}),m.jsx("option",{value:"arrow",children:v.inputPanel.markers.arrow}),m.jsx("option",{value:"circle",children:v.inputPanel.markers.circle}),m.jsx("option",{value:"diamond",children:v.inputPanel.markers.diamond})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.endMarker}),m.jsxs("select",{name:"endMarker",value:_.endMarker,onChange:R,className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 text-sm",children:[m.jsx("option",{value:"none",children:v.inputPanel.markers.none}),m.jsx("option",{value:"arrow",children:v.inputPanel.markers.arrow}),m.jsx("option",{value:"circle",children:v.inputPanel.markers.circle}),m.jsx("option",{value:"diamond",children:v.inputPanel.markers.diamond})]})]})]}),m.jsxs("div",{className:"pt-2 text-xs text-slate-500 italic border-t border-slate-700 mt-2",children:["Styling the connection to: ",m.jsx("strong",{children:e.name})]}),m.jsxs("button",{type:"button",onClick:g,className:"w-full py-2 mt-2 bg-red-900/30 hover:bg-red-900/50 text-red-400 border border-red-900/50 rounded transition-colors flex items-center justify-center gap-2 text-sm",children:[m.jsx("span",{className:"material-icons-round text-sm",children:"link_off"}),v.inputPanel.disconnect||"Disconnect Link"]})]})]});const se=y.type===W.BREAKER||y.type===W.SWITCH||y.type===W.DISTRIBUTION_BOARD,ue=y.type===W.TRANSFORMER||y.type===W.GENERATOR,ve=e.type===W.SYSTEM_ROOT;return m.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 shadow-lg overflow-hidden sticky top-4",children:[m.jsxs("div",{className:"flex border-b border-slate-700",children:[m.jsxs("button",{onClick:()=>U("add"),className:`flex-1 py-3 text-sm font-medium transition-colors flex items-center justify-center gap-2 ${T==="add"?"bg-slate-800 text-blue-400 border-b-2 border-blue-500":"bg-slate-900 text-slate-500 hover:text-slate-300"}`,children:[m.jsx("span",{className:"material-icons-round text-base",children:"add_circle"}),v.inputPanel.addConnection]}),m.jsxs("button",{onClick:()=>U("edit"),className:`flex-1 py-3 text-sm font-medium transition-colors flex items-center justify-center gap-2 ${T==="edit"?"bg-slate-800 text-yellow-400 border-b-2 border-yellow-500":"bg-slate-900 text-slate-500 hover:text-slate-300"}`,children:[m.jsx("span",{className:"material-icons-round text-base",children:"edit"}),v.inputPanel.editComponent]})]}),m.jsxs("form",{onSubmit:B,className:"p-5 space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("h3",{className:"text-sm font-bold text-white",children:T==="add"?v.inputPanel.newDownstream:v.inputPanel.editSelected}),T==="add"&&m.jsxs("span",{className:"text-xs text-slate-400",children:[v.inputPanel.parent,": ",e.name]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.componentType}),m.jsx("select",{name:"type",value:y.type,onChange:N,disabled:T==="edit"&&ve,className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm disabled:opacity-50",children:Object.values(W).map(D=>m.jsx("option",{value:D,children:v.componentTypes[D]},D))})]}),T==="edit"&&m.jsxs("div",{className:"space-y-4 border-b border-slate-700 pb-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.customColor}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"color",name:"customColor",value:y.customColor||((P=Xt[y.type])==null?void 0:P.color)||"#475569",onChange:N,className:"h-8 w-12 bg-transparent border border-slate-700 rounded cursor-pointer"}),m.jsx("span",{className:"text-xs text-slate-500",children:y.customColor||"Default"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.shape}),m.jsxs("select",{name:"shape",value:y.shape||"rectangle",onChange:N,className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm",children:[m.jsx("option",{value:"rectangle",children:v.inputPanel.shapes.rectangle}),m.jsx("option",{value:"circle",children:v.inputPanel.shapes.circle}),m.jsx("option",{value:"square",children:v.inputPanel.shapes.square})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.uploadIcon}),m.jsx("input",{type:"file",accept:"image/*",ref:k,onChange:z,className:"hidden"}),m.jsxs("button",{type:"button",onClick:()=>{var D;return(D=k.current)==null?void 0:D.click()},className:"w-full bg-slate-700 hover:bg-slate-600 text-white rounded px-2 py-2 text-xs flex items-center justify-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-sm",children:"upload"}),y.customImage?v.inputPanel.removeIcon:v.inputPanel.uploadIcon]}),y.customImage&&m.jsx("button",{type:"button",onClick:J,className:"text-[10px] text-red-400 mt-1 hover:underline w-full text-center",children:v.inputPanel.removeIcon})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.name}),m.jsx("input",{type:"text",name:"name",value:y.name,onChange:N,placeholder:"Name",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.componentNumber}),m.jsx("input",{type:"text",name:"componentNumber",value:y.componentNumber,onChange:N,placeholder:"e.g. CB-1",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.model}),m.jsx("input",{list:"models",name:"model",value:y.model,onChange:N,placeholder:"Select or type model",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"}),m.jsx("datalist",{id:"models",children:df.map(D=>m.jsx("option",{value:D},D))})]}),m.jsxs("div",{className:"bg-slate-900/50 p-3 rounded border border-slate-700/50 space-y-3",children:[se&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",id:"hasMeter",name:"hasMeter",checked:y.hasMeter,onChange:N,className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 bg-slate-700 border-slate-600"}),m.jsx("label",{htmlFor:"hasMeter",className:"text-xs font-medium text-slate-300 select-none",children:v.inputPanel.includesMeter})]}),y.hasMeter&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.meterNumber}),m.jsx("input",{type:"text",name:"meterNumber",value:y.meterNumber,onChange:N,placeholder:"e.g. M-001",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",id:"hasGeneratorConnection",name:"hasGeneratorConnection",checked:y.hasGeneratorConnection,onChange:N,className:"w-4 h-4 text-red-600 rounded focus:ring-red-500 bg-slate-700 border-slate-600"}),m.jsx("label",{htmlFor:"hasGeneratorConnection",className:"text-xs font-medium text-slate-300 select-none",children:v.inputPanel.includesGenerator})]}),y.hasGeneratorConnection&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.generatorName}),m.jsx("input",{type:"text",name:"generatorName",value:y.generatorName,onChange:N,placeholder:"e.g. Gen-1",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.amperage}),m.jsx("input",{type:"number",name:"amps",value:y.amps===void 0?"":y.amps,onChange:N,placeholder:"Optional",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.voltage}),m.jsx("input",{type:"number",name:"voltage",value:y.voltage===void 0?"":y.voltage,onChange:N,placeholder:"Optional",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]})]}),ue&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.kva}),m.jsx("input",{type:"number",name:"kva",value:y.kva===void 0?"":y.kva,onChange:N,placeholder:"e.g. 1000",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:v.inputPanel.description}),m.jsx("textarea",{name:"description",value:y.description,onChange:N,rows:2,className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm resize-none"})]}),T==="edit"&&m.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[m.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:v.inputPanel.downstreamConnections}),e.children.length===0?m.jsx("p",{className:"text-xs text-slate-500 italic text-center py-2",children:v.inputPanel.noConnections}):m.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-1 custom-scrollbar",children:e.children.map(D=>{var M,O;return m.jsxs("div",{className:"flex items-center justify-between bg-slate-900 p-2 rounded border border-slate-700 group hover:border-slate-600 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-2 overflow-hidden cursor-pointer",onClick:()=>h==null?void 0:h(D.id),title:"Select this component",children:[m.jsx("span",{className:"material-icons-round text-sm text-slate-500",style:{color:D.customColor||((M=Xt[D.type])==null?void 0:M.color)},children:(O=Xt[D.type])==null?void 0:O.icon}),m.jsxs("div",{className:"flex flex-col truncate",children:[m.jsx("span",{className:"text-xs font-medium text-slate-300 truncate",children:D.name}),m.jsx("span",{className:"text-[10px] text-slate-500",children:D.componentNumber||D.type})]})]}),m.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{type:"button",onClick:()=>p==null?void 0:p(D.id),title:"Re-route (Link to another parent)",className:"p-1 text-slate-400 hover:text-amber-400 hover:bg-amber-400/10 rounded",children:m.jsx("span",{className:"material-icons-round text-sm",children:"link"})}),m.jsx("button",{type:"button",onClick:()=>f==null?void 0:f(D.id),title:"Detach (Move to Root)",className:"p-1 text-slate-400 hover:text-red-400 hover:bg-red-400/10 rounded",children:m.jsx("span",{className:"material-icons-round text-sm",children:"link_off"})})]})]},D.id)})})]}),m.jsxs("div",{className:"pt-4 flex flex-col gap-3",children:[m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("button",{type:"submit",className:`flex-1 text-white font-medium py-2 px-4 rounded transition-colors flex items-center justify-center gap-2 shadow-lg ${T==="add"?"bg-blue-600 hover:bg-blue-700 shadow-blue-900/20":"bg-yellow-600 hover:bg-yellow-700 shadow-yellow-900/20"}`,children:[m.jsx("span",{className:"material-icons-round text-lg",children:T==="add"?"add_circle":"save"}),T==="add"?v.inputPanel.addToDiagram:v.inputPanel.saveChanges]}),m.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded transition-colors",children:v.inputPanel.close})]}),T==="edit"&&!ve&&m.jsxs("button",{type:"button",onClick:()=>d(),className:"w-full py-2 px-4 bg-red-900/30 hover:bg-red-900/50 text-red-400 border border-red-900/50 rounded transition-colors flex items-center justify-center gap-2 text-sm",children:[m.jsx("span",{className:"material-icons-round text-sm",children:"delete"}),v.inputPanel.deleteComponent]})]})]})]})},HS=({metadata:e,projectName:t="",onChange:n,onUpdateProjectName:r,onClose:o,focusField:i,t:s})=>{const[u,d]=K.useState(e),[c,f]=K.useState(t),p=K.useRef({});K.useEffect(()=>{var g,v;i&&p.current[i]&&((g=p.current[i])==null||g.focus(),(v=p.current[i])==null||v.select())},[i]),K.useEffect(()=>{d(g=>g.engineer===e.engineer&&g.organization===e.organization&&g.date===e.date&&g.revision===e.revision&&g.approvedBy===e.approvedBy?g:e)},[e]),K.useEffect(()=>{f(t)},[t]),K.useEffect(()=>{const g=setTimeout(()=>{n(u)},300);return()=>clearTimeout(g)},[u,n]),K.useEffect(()=>{const g=setTimeout(()=>{c!==t&&r&&r(c)},300);return()=>clearTimeout(g)},[c,t,r]);const h=g=>{const{name:v,value:T}=g.target;d(U=>({...U,[v]:T}))};return m.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 shadow-lg overflow-hidden sticky top-4",children:[m.jsxs("div",{className:"p-4 border-b border-slate-700 bg-slate-900 flex items-center justify-between",children:[m.jsxs("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-blue-400",children:"print"}),s.printSettings.title]}),m.jsx("button",{onClick:o,className:"text-slate-400 hover:text-white",title:s.inputPanel.close,children:m.jsx("span",{className:"material-icons-round",children:"close"})})]}),m.jsxs("div",{className:"p-5 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:s.printLayout.project}),m.jsx("input",{ref:g=>{p.current.projectName=g},type:"text",value:c,onChange:g=>f(g.target.value),placeholder:"Project Name",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm font-bold"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:s.printSettings.organization}),m.jsx("input",{ref:g=>{p.current.organization=g},type:"text",name:"organization",value:u.organization,onChange:h,placeholder:"Company Name",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:s.printSettings.engineer}),m.jsx("input",{ref:g=>{p.current.engineer=g},type:"text",name:"engineer",value:u.engineer,onChange:h,placeholder:"Engineer Name",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:s.printSettings.approvedBy}),m.jsx("input",{ref:g=>{p.current.approvedBy=g},type:"text",name:"approvedBy",value:u.approvedBy,onChange:h,placeholder:"Approver Name",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:s.printSettings.date}),m.jsx("input",{ref:g=>{p.current.date=g},type:"text",name:"date",value:u.date,onChange:h,placeholder:"YYYY-MM-DD",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:s.printSettings.revision}),m.jsx("input",{ref:g=>{p.current.revision=g},type:"text",name:"revision",value:u.revision,onChange:h,placeholder:"Rev A",className:"w-full bg-slate-900 border border-slate-700 text-white rounded px-3 py-2 focus:outline-none focus:border-blue-500 text-sm"})]})]}),m.jsx("div",{className:"pt-2",children:m.jsx("p",{className:"text-[10px] text-slate-500 italic text-center",children:"Changes are saved automatically."})})]})]})},BS=({isOpen:e,onClose:t,loading:n,result:r,t:o})=>e?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:m.jsxs("div",{className:"bg-slate-900 w-full max-w-2xl rounded-xl border border-slate-700 shadow-2xl flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-800",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"material-icons-round text-purple-400 text-3xl",children:"auto_awesome"}),m.jsx("h2",{className:"text-xl font-bold text-white",children:o.analysis.title})]}),m.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:m.jsx("span",{className:"material-icons-round",children:"close"})})]}),m.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:n?m.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),m.jsx("p",{className:"text-blue-400 font-medium animate-pulse",children:o.analysis.analyzing}),m.jsx("p",{className:"text-slate-500 text-sm mt-2",children:o.analysis.analyzingSub})]}):r?m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:`p-4 rounded-lg border flex items-start gap-4 ${r.status==="safe"?"bg-green-500/10 border-green-500/30":r.status==="warning"?"bg-yellow-500/10 border-yellow-500/30":"bg-red-500/10 border-red-500/30"}`,children:[m.jsx("span",{className:`material-icons-round text-2xl ${r.status==="safe"?"text-green-400":r.status==="warning"?"text-yellow-400":"text-red-400"}`,children:r.status==="safe"?"verified_user":r.status==="warning"?"warning":"dangerous"}),m.jsxs("div",{children:[m.jsx("h3",{className:`font-bold capitalize ${r.status==="safe"?"text-green-400":r.status==="warning"?"text-yellow-400":"text-red-400"}`,children:r.status==="safe"?o.analysis.safe:r.status==="warning"?o.analysis.warning:o.analysis.danger}),m.jsx("p",{className:"text-slate-300 text-sm mt-1",children:r.summary})]})]}),r.issues.length>0&&m.jsxs("div",{children:[m.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-red-400",children:"error_outline"}),o.analysis.issues]}),m.jsx("ul",{className:"space-y-2",children:r.issues.map((i,s)=>m.jsxs("li",{className:"text-slate-300 text-sm bg-slate-800 p-3 rounded border border-slate-700",children:[" ",i]},s))})]}),r.recommendations.length>0&&m.jsxs("div",{children:[m.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-blue-400",children:"tips_and_updates"}),o.analysis.recommendations]}),m.jsx("ul",{className:"space-y-2",children:r.recommendations.map((i,s)=>m.jsxs("li",{className:"text-slate-300 text-sm bg-slate-800 p-3 rounded border border-slate-700",children:[" ",i]},s))})]})]}):m.jsx("div",{className:"text-center text-slate-500",children:o.analysis.noData})}),m.jsx("div",{className:"p-4 border-t border-slate-800 flex justify-end",children:m.jsx("button",{onClick:t,className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded transition-colors font-medium",children:o.inputPanel.close})})]})}):null,qS=({isOpen:e,title:t,message:n,onConfirm:r,onCancel:o,t:i})=>e?m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:m.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl shadow-2xl max-w-sm w-full p-6 transform transition-all scale-100",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center",children:m.jsx("span",{className:"material-icons-round text-red-500 text-xl",children:"warning"})}),m.jsx("h3",{className:"text-lg font-bold text-white",children:t})]}),m.jsx("p",{className:"text-slate-300 text-sm mb-6 leading-relaxed",children:n}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx("button",{onClick:o,className:"px-4 py-2 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 transition-colors text-sm font-medium",children:i.inputPanel.close}),m.jsxs("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-900/20 transition-colors text-sm font-medium flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-sm",children:"delete"}),i.inputPanel.deleteComponent]})]})]})}):null,$S=({isOpen:e,onClose:t,onExport:n,t:r})=>e?m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:m.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl shadow-2xl max-w-md w-full p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:m.jsx("span",{className:"material-icons-round text-blue-400 text-xl",children:"save_alt"})}),m.jsx("h3",{className:"text-lg font-bold text-white",children:r.export.title})]}),m.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white",children:m.jsx("span",{className:"material-icons-round",children:"close"})})]}),m.jsx("p",{className:"text-slate-400 text-sm mb-6",children:r.export.subtitle}),m.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:[m.jsxs("button",{onClick:()=>n("png"),className:"w-full flex items-center justify-between p-4 rounded-lg bg-slate-700/50 hover:bg-slate-700 border border-slate-600 hover:border-blue-500/50 transition-all group",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"material-icons-round text-purple-400 text-2xl",children:"image"}),m.jsxs("div",{className:"text-left",children:[m.jsx("div",{className:"text-sm font-bold text-slate-200 group-hover:text-white",children:r.export.formats.png}),m.jsx("div",{className:"text-xs text-slate-500",children:r.export.desc.png})]})]}),m.jsx("span",{className:"material-icons-round text-slate-500 group-hover:text-blue-400",children:"arrow_forward"})]}),m.jsxs("button",{onClick:()=>n("svg"),className:"w-full flex items-center justify-between p-4 rounded-lg bg-slate-700/50 hover:bg-slate-700 border border-slate-600 hover:border-blue-500/50 transition-all group",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"material-icons-round text-amber-400 text-2xl",children:"polyline"}),m.jsxs("div",{className:"text-left",children:[m.jsx("div",{className:"text-sm font-bold text-slate-200 group-hover:text-white",children:r.export.formats.svg}),m.jsx("div",{className:"text-xs text-slate-500",children:r.export.desc.svg})]})]}),m.jsx("span",{className:"material-icons-round text-slate-500 group-hover:text-blue-400",children:"arrow_forward"})]}),m.jsxs("button",{onClick:()=>n("pdf"),className:"w-full flex items-center justify-between p-4 rounded-lg bg-slate-700/50 hover:bg-slate-700 border border-slate-600 hover:border-blue-500/50 transition-all group",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"material-icons-round text-red-400 text-2xl",children:"picture_as_pdf"}),m.jsxs("div",{className:"text-left",children:[m.jsx("div",{className:"text-sm font-bold text-slate-200 group-hover:text-white",children:r.export.formats.pdf}),m.jsx("div",{className:"text-xs text-slate-500",children:r.export.desc.pdf})]})]}),m.jsx("span",{className:"material-icons-round text-slate-500 group-hover:text-blue-400",children:"arrow_forward"})]}),m.jsxs("button",{onClick:()=>n("excel"),className:"w-full flex items-center justify-between p-4 rounded-lg bg-slate-700/50 hover:bg-slate-700 border border-slate-600 hover:border-blue-500/50 transition-all group",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"material-icons-round text-emerald-400 text-2xl",children:"table_view"}),m.jsxs("div",{className:"text-left",children:[m.jsx("div",{className:"text-sm font-bold text-slate-200 group-hover:text-white",children:r.export.formats.excel}),m.jsx("div",{className:"text-xs text-slate-500",children:r.export.desc.excel})]})]}),m.jsx("span",{className:"material-icons-round text-slate-500 group-hover:text-blue-400",children:"arrow_forward"})]}),m.jsxs("button",{onClick:()=>n("json"),className:"w-full flex items-center justify-between p-4 rounded-lg bg-slate-700/50 hover:bg-slate-700 border border-slate-600 hover:border-blue-500/50 transition-all group",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:"material-icons-round text-cyan-400 text-2xl",children:"data_object"}),m.jsxs("div",{className:"text-left",children:[m.jsx("div",{className:"text-sm font-bold text-slate-200 group-hover:text-white",children:r.export.formats.json}),m.jsx("div",{className:"text-xs text-slate-500",children:r.export.desc.json})]})]}),m.jsx("span",{className:"material-icons-round text-slate-500 group-hover:text-blue-400",children:"arrow_forward"})]})]}),m.jsx("div",{className:"mt-6 flex justify-end",children:m.jsx("button",{onClick:t,className:"px-4 py-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:r.inputPanel.close})})]})}):null,OS=({isOpen:e,onClose:t,t:n})=>e?m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-fadeIn",children:m.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl shadow-2xl max-w-md w-full p-6 relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 left-0 w-full h-32 bg-gradient-to-b from-blue-600/20 to-transparent pointer-events-none"}),m.jsxs("div",{className:"flex flex-col items-center text-center relative z-10",children:[m.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg mb-4",children:m.jsx("span",{className:"material-icons-round text-white text-4xl",children:"electrical_services"})}),m.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:n.about.title}),m.jsx("span",{className:"text-xs font-medium text-blue-400 bg-blue-400/10 px-2 py-1 rounded-full mb-6",children:n.about.version}),m.jsx("p",{className:"text-slate-300 text-sm leading-relaxed mb-6",children:n.about.description}),m.jsx("div",{className:"w-full h-px bg-slate-700 mb-6"}),m.jsxs("div",{className:"flex flex-col items-center gap-1 mb-6",children:[m.jsx("span",{className:"text-xs text-slate-500 uppercase tracking-wider",children:n.about.developedBy}),m.jsx("span",{className:"text-lg font-bold text-white bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-400",children:n.about.developerName})]}),m.jsx("button",{onClick:t,className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-full transition-colors text-sm font-medium",children:n.inputPanel.close})]})]})}):null;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let JS,YS;function WS(){return{geminiUrl:JS,vertexUrl:YS}}function KS(e,t,n,r){var o,i;if(!(e!=null&&e.baseUrl)){const s=WS();return t?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(i=s.geminiUrl)!==null&&i!==void 0?i:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dn{}function Y(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){const i=t[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(e,t,n){for(let i=0;i<t.length-1;i++){const s=t[i];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in e))if(Array.isArray(n))e[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[u])){const d=e[u];if(Array.isArray(n))for(let c=0;c<d.length;c++){const f=d[c];a(f,t.slice(i+1),n[c])}else for(const c of d)a(c,t.slice(i+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in e||(e[u]=[{}]);const d=e[u];a(d[0],t.slice(i+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}const r=t[t.length-1],o=e[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function l(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const o=t[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in e){const s=e[i];return Array.isArray(s)?s.map(u=>l(u,t.slice(r+1),n)):n}else return n}else e=e[o]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function XS(e,t){for(const[n,r]of Object.entries(t)){const o=n.split("."),i=r.split("."),s=new Set;let u=-1;for(let d=0;d<o.length;d++)if(o[d]==="*"){u=d;break}if(u!==-1&&i.length>u)for(let d=u;d<i.length;d++){const c=i[d];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}fu(e,o,i,0,s)}}function fu(e,t,n,r,o){if(r>=t.length||typeof e!="object"||e===null)return;const i=t[r];if(i.endsWith("[]")){const s=i.slice(0,-2),u=e;if(s in u&&Array.isArray(u[s]))for(const d of u[s])fu(d,t,n,r+1,o)}else if(i==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const s=e,u=Object.keys(s).filter(c=>!c.startsWith("_")&&!o.has(c)),d={};for(const c of u)d[c]=s[c];for(const[c,f]of Object.entries(d)){const p=[];for(const h of n.slice(r))h==="*"?p.push(c):p.push(h);a(s,p,f)}for(const c of u)delete s[c]}}else{const s=e;i in s&&fu(s[i],t,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wc(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QS(e){const t={},n=l(e,["operationName"]);n!=null&&a(t,["operationName"],n);const r=l(e,["resourceName"]);return r!=null&&a(t,["_url","resourceName"],r),t}function ZS(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);const o=l(e,["done"]);o!=null&&a(t,["done"],o);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response","generateVideoResponse"]);return s!=null&&a(t,["response"],eE(s)),t}function jS(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);const o=l(e,["done"]);o!=null&&a(t,["done"],o);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response"]);return s!=null&&a(t,["response"],tE(s)),t}function eE(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>nE(s))),a(t,["generatedVideos"],i)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&a(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function tE(e){const t={},n=l(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>rE(s))),a(t,["generatedVideos"],i)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&a(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function nE(e){const t={},n=l(e,["video"]);return n!=null&&a(t,["video"],uE(n)),t}function rE(e){const t={},n=l(e,["_self"]);return n!=null&&a(t,["video"],cE(n)),t}function oE(e){const t={},n=l(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function iE(e){const t={},n=l(e,["operationName"]);return n!=null&&a(t,["_url","operationName"],n),t}function sE(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);const o=l(e,["done"]);o!=null&&a(t,["done"],o);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response"]);return s!=null&&a(t,["response"],lE(s)),t}function lE(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&a(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&a(t,["documentName"],o),t}function Eg(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);const o=l(e,["done"]);o!=null&&a(t,["done"],o);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response"]);return s!=null&&a(t,["response"],aE(s)),t}function aE(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&a(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&a(t,["documentName"],o),t}function uE(e){const t={},n=l(e,["uri"]);n!=null&&a(t,["uri"],n);const r=l(e,["encodedVideo"]);r!=null&&a(t,["videoBytes"],wc(r));const o=l(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function cE(e){const t={},n=l(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&a(t,["videoBytes"],wc(r));const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ff;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ff||(ff={}));var pf;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(pf||(pf={}));var hf;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(hf||(hf={}));var st;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(st||(st={}));var mf;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(mf||(mf={}));var gf;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(gf||(gf={}));var yf;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(yf||(yf={}));var vf;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(vf||(vf={}));var xf;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(xf||(xf={}));var _f;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.HIGH="HIGH"})(_f||(_f={}));var Cf;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Cf||(Cf={}));var Sf;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Sf||(Sf={}));var Ef;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Ef||(Ef={}));var Tf;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE"})(Tf||(Tf={}));var wf;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(wf||(wf={}));var Nf;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Nf||(Nf={}));var If;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(If||(If={}));var Af;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Af||(Af={}));var kf;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(kf||(kf={}));var nl;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(nl||(nl={}));var Pf;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Pf||(Pf={}));var Rf;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Rf||(Rf={}));var Mf;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Mf||(Mf={}));var pu;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(pu||(pu={}));var Df;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Df||(Df={}));var Lf;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Lf||(Lf={}));var Uf;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Uf||(Uf={}));var Ff;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(Ff||(Ff={}));var Vf;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Vf||(Vf={}));var bf;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(bf||(bf={}));var Gf;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Gf||(Gf={}));var zf;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(zf||(zf={}));var Hf;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Hf||(Hf={}));var Bf;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Bf||(Bf={}));var qf;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qf||(qf={}));var $f;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})($f||($f={}));var Of;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Of||(Of={}));var Jf;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Jf||(Jf={}));var Yf;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Yf||(Yf={}));var Wf;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Wf||(Wf={}));var Kf;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Kf||(Kf={}));var Xf;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Xf||(Xf={}));var Qf;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Qf||(Qf={}));var Zf;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Zf||(Zf={}));var jf;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(jf||(jf={}));var ep;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED"})(ep||(ep={}));var tp;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(tp||(tp={}));var np;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(np||(np={}));var rp;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(rp||(rp={}));var op;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(op||(op={}));var ip;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(ip||(ip={}));var sp;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sp||(sp={}));var lp;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(lp||(lp={}));var ap;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(ap||(ap={}));var Kr;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Kr||(Kr={}));class hu{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class Go{get text(){var t,n,r,o,i,s,u,d;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1;const p=[];for(const h of(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[g,v]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var t,n,r,o,i,s,u,d;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const f=[];for(const p of(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&d!==void 0?d:[]){for(const[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,r,o,i,s,u,d;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var t,n,r,o,i,s,u,d,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,r,o,i,s,u,d,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(d=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||d===void 0?void 0:d.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(c=f==null?void 0:f[0])===null||c===void 0?void 0:c.output}}class up{}class cp{}class dE{}class fE{}class pE{}class hE{}class dp{}class fp{}class pp{}class mE{}class rl{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new rl;let o;const i=t;return n?o=jS(i):o=ZS(i),Object.assign(r,o),r}}class hp{}class mp{}class gp{}class gE{}class yE{}class vE{}class Nc{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Nc,i=sE(t);return Object.assign(r,i),r}}class xE{}class _E{}class CE{}class yp{}class SE{get text(){var t,n,r;let o="",i=!1;const s=[];for(const u of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[d,c]of Object.entries(u))d!=="text"&&d!=="thought"&&c!==null&&s.push(d);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,o+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var t,n,r;let o="";const i=[];for(const s of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,d]of Object.entries(s))u!=="inlineData"&&d!==null&&i.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class EE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ic{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Ic,i=Eg(t);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ye(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function Tg(e,t){const n=ye(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function wg(e){return Array.isArray(e)?e.map(t=>ol(t)):[ol(e)]}function ol(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function Ng(e){const t=ol(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Ig(e){const t=ol(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function vp(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function Ag(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>vp(t)):[vp(e)]}function mu(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function xp(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function _p(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function rt(e){if(e==null)throw new Error("ContentUnion is required");return mu(e)?e:{role:"user",parts:Ag(e)}}function Ac(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=rt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=rt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>rt(n)):[rt(t)]}function zt(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(xp(e)||_p(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rt(e)]}const t=[],n=[],r=mu(e[0]);for(const o of e){const i=mu(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(o);else{if(xp(o)||_p(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||t.push({role:"user",parts:Ag(n)}),t}function TE(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(st).includes(n[0].toUpperCase())?n[0].toUpperCase():st.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(st).includes(r.toUpperCase())?r.toUpperCase():st.TYPE_UNSPECIFIED})}}function oo(e){const t={},n=["items"],r=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(t.nullable=!0,e=i[1]):i[1].type==="null"&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&TE(e.type,t);for(const[s,u]of Object.entries(e))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;t.type=Object.values(st).includes(u.toUpperCase())?u.toUpperCase():st.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=oo(u);else if(r.includes(s)){const d=[];for(const c of u){if(c.type=="null"){t.nullable=!0;continue}d.push(oo(c))}t[s]=d}else if(o.includes(s)){const d={};for(const[c,f]of Object.entries(u))d[c]=oo(f);t[s]=d}else{if(s==="additionalProperties")continue;t[s]=u}return t}function kc(e){return oo(e)}function Pc(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Rc(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function _o(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=oo(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=oo(t.response));return e}function Co(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function wE(e,t,n,r=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function Ln(e,t){if(typeof t!="string")throw new Error("name must be a string");return wE(e,t,"cachedContents")}function kg(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function lr(e){return wc(e)}function NE(e){return e!=null&&typeof e=="object"&&"name"in e}function IE(e){return e!=null&&typeof e=="object"&&"video"in e}function AE(e){return e!=null&&typeof e=="object"&&"uri"in e}function Pg(e){var t;let n;if(NE(e)&&(n=e.name),!(AE(e)&&(n=e.uri,n===void 0))&&!(IE(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Rg(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Mg(e){for(const t of["models","tunedModels","publisherModels"])if(kE(e,t))return e[t];return[]}function kE(e,t){return e!==null&&typeof e=="object"&&t in e}function PE(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function RE(e,t={}){const n=[],r=new Set;for(const o of e){const i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const s=PE(o,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Dg(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function ME(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Lg(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let i=!1;for(const s of o){if(typeof s!="object"||s===null)continue;const d=s.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function So(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Ug(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DE(e){const t={},n=l(e,["responsesFile"]);n!=null&&a(t,["fileName"],n);const r=l(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>pT(s))),a(t,["inlinedResponses"],i)}const o=l(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["inlinedEmbedContentResponses"],i)}return t}function LE(e){const t={},n=l(e,["predictionsFormat"]);n!=null&&a(t,["format"],n);const r=l(e,["gcsDestination","outputUriPrefix"]);r!=null&&a(t,["gcsUri"],r);const o=l(e,["bigqueryDestination","outputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function UE(e){const t={},n=l(e,["format"]);n!=null&&a(t,["predictionsFormat"],n);const r=l(e,["gcsUri"]);r!=null&&a(t,["gcsDestination","outputUriPrefix"],r);const o=l(e,["bigqueryUri"]);if(o!=null&&a(t,["bigqueryDestination","outputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Ts(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["metadata","displayName"]);r!=null&&a(t,["displayName"],r);const o=l(e,["metadata","state"]);o!=null&&a(t,["state"],Ug(o));const i=l(e,["metadata","createTime"]);i!=null&&a(t,["createTime"],i);const s=l(e,["metadata","endTime"]);s!=null&&a(t,["endTime"],s);const u=l(e,["metadata","updateTime"]);u!=null&&a(t,["updateTime"],u);const d=l(e,["metadata","model"]);d!=null&&a(t,["model"],d);const c=l(e,["metadata","output"]);return c!=null&&a(t,["dest"],DE(Lg(c))),t}function gu(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["displayName"]);r!=null&&a(t,["displayName"],r);const o=l(e,["state"]);o!=null&&a(t,["state"],Ug(o));const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["createTime"]);s!=null&&a(t,["createTime"],s);const u=l(e,["startTime"]);u!=null&&a(t,["startTime"],u);const d=l(e,["endTime"]);d!=null&&a(t,["endTime"],d);const c=l(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);const f=l(e,["model"]);f!=null&&a(t,["model"],f);const p=l(e,["inputConfig"]);p!=null&&a(t,["src"],FE(p));const h=l(e,["outputConfig"]);h!=null&&a(t,["dest"],LE(Lg(h)));const g=l(e,["completionStats"]);return g!=null&&a(t,["completionStats"],g),t}function FE(e){const t={},n=l(e,["instancesFormat"]);n!=null&&a(t,["format"],n);const r=l(e,["gcsSource","uris"]);r!=null&&a(t,["gcsUri"],r);const o=l(e,["bigquerySource","inputUri"]);return o!=null&&a(t,["bigqueryUri"],o),t}function VE(e,t){const n={};if(l(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(t,["fileName"]);r!=null&&a(n,["fileName"],r);const o=l(t,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>fT(e,s))),a(n,["requests","requests"],i)}return n}function bE(e){const t={},n=l(e,["format"]);n!=null&&a(t,["instancesFormat"],n);const r=l(e,["gcsUri"]);r!=null&&a(t,["gcsSource","uris"],r);const o=l(e,["bigqueryUri"]);if(o!=null&&a(t,["bigquerySource","inputUri"],o),l(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function GE(e){const t={},n=l(e,["data"]);if(n!=null&&a(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function zE(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],So(e,r)),n}function HE(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],So(e,r)),n}function BE(e){const t={},n=l(e,["content"]);n!=null&&a(t,["content"],n);const r=l(e,["citationMetadata"]);r!=null&&a(t,["citationMetadata"],qE(r));const o=l(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const i=l(e,["finishReason"]);i!=null&&a(t,["finishReason"],i);const s=l(e,["avgLogprobs"]);s!=null&&a(t,["avgLogprobs"],s);const u=l(e,["groundingMetadata"]);u!=null&&a(t,["groundingMetadata"],u);const d=l(e,["index"]);d!=null&&a(t,["index"],d);const c=l(e,["logprobsResult"]);c!=null&&a(t,["logprobsResult"],c);const f=l(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),a(t,["safetyRatings"],h)}const p=l(e,["urlContextMetadata"]);return p!=null&&a(t,["urlContextMetadata"],p),t}function qE(e){const t={},n=l(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),a(t,["citations"],r)}return t}function Fg(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>_T(i))),a(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function $E(e,t){const n={},r=l(e,["displayName"]);if(t!==void 0&&r!=null&&a(t,["batch","displayName"],r),l(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function OE(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const o=l(e,["dest"]);return t!==void 0&&o!=null&&a(t,["outputConfig"],UE(ME(o))),n}function Cp(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["src"]);o!=null&&a(n,["batch","inputConfig"],VE(e,Dg(e,o)));const i=l(t,["config"]);return i!=null&&$E(i,n),n}function JE(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["model"],ye(e,r));const o=l(t,["src"]);o!=null&&a(n,["inputConfig"],bE(Dg(e,o)));const i=l(t,["config"]);return i!=null&&OE(i,n),n}function YE(e,t){const n={},r=l(e,["displayName"]);return t!==void 0&&r!=null&&a(t,["batch","displayName"],r),n}function WE(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["src"]);o!=null&&a(n,["batch","inputConfig"],tT(e,o));const i=l(t,["config"]);return i!=null&&YE(i,n),n}function KE(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],So(e,r)),n}function XE(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],So(e,r)),n}function QE(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["name"]);r!=null&&a(t,["name"],r);const o=l(e,["done"]);o!=null&&a(t,["done"],o);const i=l(e,["error"]);return i!=null&&a(t,["error"],i),t}function ZE(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["name"]);r!=null&&a(t,["name"],r);const o=l(e,["done"]);o!=null&&a(t,["done"],o);const i=l(e,["error"]);return i!=null&&a(t,["error"],i),t}function jE(e,t){const n={},r=l(t,["contents"]);if(r!=null){let i=Ac(e,r);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["requests[]","request","content"],i)}const o=l(t,["config"]);return o!=null&&(a(n,["_self"],eT(o,n)),XS(n,{"requests[].*":"requests[].request.*"})),n}function eT(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&a(t,["requests[]","taskType"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const i=l(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&a(t,["requests[]","outputDimensionality"],i),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tT(e,t){const n={},r=l(t,["fileName"]);r!=null&&a(n,["file_name"],r);const o=l(t,["inlinedRequests"]);return o!=null&&a(n,["requests"],jE(e,o)),n}function nT(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function rT(e){const t={},n=l(e,["id"]);n!=null&&a(t,["id"],n);const r=l(e,["args"]);r!=null&&a(t,["args"],r);const o=l(e,["name"]);if(o!=null&&a(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function oT(e){const t={},n=l(e,["mode"]);n!=null&&a(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&a(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function iT(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],Fg(rt(o)));const i=l(t,["temperature"]);i!=null&&a(r,["temperature"],i);const s=l(t,["topP"]);s!=null&&a(r,["topP"],s);const u=l(t,["topK"]);u!=null&&a(r,["topK"],u);const d=l(t,["candidateCount"]);d!=null&&a(r,["candidateCount"],d);const c=l(t,["maxOutputTokens"]);c!=null&&a(r,["maxOutputTokens"],c);const f=l(t,["stopSequences"]);f!=null&&a(r,["stopSequences"],f);const p=l(t,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const h=l(t,["logprobs"]);h!=null&&a(r,["logprobs"],h);const g=l(t,["presencePenalty"]);g!=null&&a(r,["presencePenalty"],g);const v=l(t,["frequencyPenalty"]);v!=null&&a(r,["frequencyPenalty"],v);const T=l(t,["seed"]);T!=null&&a(r,["seed"],T);const U=l(t,["responseMimeType"]);U!=null&&a(r,["responseMimeType"],U);const y=l(t,["responseSchema"]);y!=null&&a(r,["responseSchema"],kc(y));const x=l(t,["responseJsonSchema"]);if(x!=null&&a(r,["responseJsonSchema"],x),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=l(t,["safetySettings"]);if(n!==void 0&&_!=null){let ue=_;Array.isArray(ue)&&(ue=ue.map(ve=>CT(ve))),a(n,["safetySettings"],ue)}const E=l(t,["tools"]);if(n!==void 0&&E!=null){let ue=Co(E);Array.isArray(ue)&&(ue=ue.map(ve=>ET(_o(ve)))),a(n,["tools"],ue)}const k=l(t,["toolConfig"]);if(n!==void 0&&k!=null&&a(n,["toolConfig"],ST(k)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=l(t,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],Ln(e,N));const R=l(t,["responseModalities"]);R!=null&&a(r,["responseModalities"],R);const z=l(t,["mediaResolution"]);z!=null&&a(r,["mediaResolution"],z);const J=l(t,["speechConfig"]);if(J!=null&&a(r,["speechConfig"],Pc(J)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=l(t,["thinkingConfig"]);B!=null&&a(r,["thinkingConfig"],B);const se=l(t,["imageConfig"]);return se!=null&&a(r,["imageConfig"],dT(se)),r}function sT(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(c=>BE(c))),a(t,["candidates"],d)}const o=l(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const i=l(e,["promptFeedback"]);i!=null&&a(t,["promptFeedback"],i);const s=l(e,["responseId"]);s!=null&&a(t,["responseId"],s);const u=l(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function lT(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],So(e,r)),n}function aT(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],So(e,r)),n}function uT(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function cT(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],n),t}function dT(e){const t={},n=l(e,["aspectRatio"]);n!=null&&a(t,["aspectRatio"],n);const r=l(e,["imageSize"]);if(r!=null&&a(t,["imageSize"],r),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function fT(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["request","model"],ye(e,r));const o=l(t,["contents"]);if(o!=null){let u=zt(o);Array.isArray(u)&&(u=u.map(d=>Fg(d))),a(n,["request","contents"],u)}const i=l(t,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(t,["config"]);return s!=null&&a(n,["request","generationConfig"],iT(e,s,l(n,["request"],{}))),n}function pT(e){const t={},n=l(e,["response"]);n!=null&&a(t,["response"],sT(n));const r=l(e,["error"]);return r!=null&&a(t,["error"],r),t}function hT(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);if(t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),l(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function mT(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);t!==void 0&&o!=null&&a(t,["_query","pageToken"],o);const i=l(e,["filter"]);return t!==void 0&&i!=null&&a(t,["_query","filter"],i),n}function gT(e){const t={},n=l(e,["config"]);return n!=null&&hT(n,t),t}function yT(e){const t={},n=l(e,["config"]);return n!=null&&mT(n,t),t}function vT(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&a(t,["nextPageToken"],r);const o=l(e,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Ts(s))),a(t,["batchJobs"],i)}return t}function xT(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&a(t,["nextPageToken"],r);const o=l(e,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>gu(s))),a(t,["batchJobs"],i)}return t}function _T(e){const t={},n=l(e,["mediaResolution"]);n!=null&&a(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);const i=l(e,["fileData"]);i!=null&&a(t,["fileData"],nT(i));const s=l(e,["functionCall"]);s!=null&&a(t,["functionCall"],rT(s));const u=l(e,["functionResponse"]);u!=null&&a(t,["functionResponse"],u);const d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],GE(d));const c=l(e,["text"]);c!=null&&a(t,["text"],c);const f=l(e,["thought"]);f!=null&&a(t,["thought"],f);const p=l(e,["thoughtSignature"]);p!=null&&a(t,["thoughtSignature"],p);const h=l(e,["videoMetadata"]);return h!=null&&a(t,["videoMetadata"],h),t}function CT(e){const t={},n=l(e,["category"]);if(n!=null&&a(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(e,["threshold"]);return r!=null&&a(t,["threshold"],r),t}function ST(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],oT(n));const r=l(e,["retrievalConfig"]);return r!=null&&a(t,["retrievalConfig"],r),t}function ET(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(t,["functionDeclarations"],f)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&a(t,["computerUse"],o);const i=l(e,["fileSearch"]);i!=null&&a(t,["fileSearch"],i);const s=l(e,["codeExecution"]);if(s!=null&&a(t,["codeExecution"],s),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],uT(u));const d=l(e,["googleSearch"]);d!=null&&a(t,["googleSearch"],cT(d));const c=l(e,["urlContext"]);return c!=null&&a(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rn;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Rn||(Rn={}));class Pr{constructor(t,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,o)}init(t,n,r){var o,i;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TT extends Dn{constructor(t){super(),this.apiClient=t,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Pr(Rn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(t){const n=Cp(this.apiClient,t),r=n._url,o=Y("{model}:batchGenerateContent",r),u=n.batch.inputConfig.requests,d=u.requests,c=[];for(const f of d){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=h,p.request=g}c.push(p)}return u.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const i=this.getGcsUri(t),s=this.getBigqueryUri(t);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(s)r.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=JE(this.apiClient,t);return u=Y("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>gu(f))}else{const c=Cp(this.apiClient,t);return u=Y("{model}:batchGenerateContent",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ts(f))}}async createEmbeddingsInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=WE(this.apiClient,t);return i=Y("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Ts(d))}}async get(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=aT(this.apiClient,t);return u=Y("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>gu(f))}else{const c=lT(this.apiClient,t);return u=Y("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ts(f))}}async cancel(t){var n,r,o,i;let s="",u={};if(this.apiClient.isVertexAI()){const d=HE(this.apiClient,t);s=Y("batchPredictionJobs/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const d=zE(this.apiClient,t);s=Y("batches/{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=yT(t);return u=Y("batchPredictionJobs",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=xT(f),h=new yp;return Object.assign(h,p),h})}else{const c=gT(t);return u=Y("batches",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=vT(f),h=new yp;return Object.assign(h,p),h})}}async delete(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=XE(this.apiClient,t);return u=Y("batchPredictionJobs/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>ZE(f))}else{const c=KE(this.apiClient,t);return u=Y("batches/{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>QE(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wT(e){const t={},n=l(e,["data"]);if(n!=null&&a(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Sp(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>WT(i))),a(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function NT(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&a(t,["ttl"],r);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const i=l(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const s=l(e,["contents"]);if(t!==void 0&&s!=null){let f=zt(s);Array.isArray(f)&&(f=f.map(p=>Sp(p))),a(t,["contents"],f)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],Sp(rt(u)));const d=l(e,["tools"]);if(t!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>XT(p))),a(t,["tools"],f)}const c=l(e,["toolConfig"]);if(t!==void 0&&c!=null&&a(t,["toolConfig"],KT(c)),l(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function IT(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&a(t,["ttl"],r);const o=l(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);const i=l(e,["displayName"]);t!==void 0&&i!=null&&a(t,["displayName"],i);const s=l(e,["contents"]);if(t!==void 0&&s!=null){let p=zt(s);Array.isArray(p)&&(p=p.map(h=>h)),a(t,["contents"],p)}const u=l(e,["systemInstruction"]);t!==void 0&&u!=null&&a(t,["systemInstruction"],rt(u));const d=l(e,["tools"]);if(t!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(h=>QT(h))),a(t,["tools"],p)}const c=l(e,["toolConfig"]);t!==void 0&&c!=null&&a(t,["toolConfig"],c);const f=l(e,["kmsKeyName"]);return t!==void 0&&f!=null&&a(t,["encryption_spec","kmsKeyName"],f),n}function AT(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["model"],Tg(e,r));const o=l(t,["config"]);return o!=null&&NT(o,n),n}function kT(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["model"],Tg(e,r));const o=l(t,["config"]);return o!=null&&IT(o,n),n}function PT(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],Ln(e,r)),n}function RT(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],Ln(e,r)),n}function MT(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function DT(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function LT(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function UT(e){const t={},n=l(e,["id"]);n!=null&&a(t,["id"],n);const r=l(e,["args"]);r!=null&&a(t,["args"],r);const o=l(e,["name"]);if(o!=null&&a(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function FT(e){const t={},n=l(e,["mode"]);n!=null&&a(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&a(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function VT(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&a(t,["description"],n);const r=l(e,["name"]);r!=null&&a(t,["name"],r);const o=l(e,["parameters"]);o!=null&&a(t,["parameters"],o);const i=l(e,["parametersJsonSchema"]);i!=null&&a(t,["parametersJsonSchema"],i);const s=l(e,["response"]);s!=null&&a(t,["response"],s);const u=l(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function bT(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],Ln(e,r)),n}function GT(e,t){const n={},r=l(t,["name"]);return r!=null&&a(n,["_url","name"],Ln(e,r)),n}function zT(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function HT(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],n),t}function BT(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function qT(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function $T(e){const t={},n=l(e,["config"]);return n!=null&&BT(n,t),t}function OT(e){const t={},n=l(e,["config"]);return n!=null&&qT(n,t),t}function JT(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&a(t,["nextPageToken"],r);const o=l(e,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["cachedContents"],i)}return t}function YT(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&a(t,["nextPageToken"],r);const o=l(e,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["cachedContents"],i)}return t}function WT(e){const t={},n=l(e,["mediaResolution"]);n!=null&&a(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);const i=l(e,["fileData"]);i!=null&&a(t,["fileData"],LT(i));const s=l(e,["functionCall"]);s!=null&&a(t,["functionCall"],UT(s));const u=l(e,["functionResponse"]);u!=null&&a(t,["functionResponse"],u);const d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],wT(d));const c=l(e,["text"]);c!=null&&a(t,["text"],c);const f=l(e,["thought"]);f!=null&&a(t,["thought"],f);const p=l(e,["thoughtSignature"]);p!=null&&a(t,["thoughtSignature"],p);const h=l(e,["videoMetadata"]);return h!=null&&a(t,["videoMetadata"],h),t}function KT(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],FT(n));const r=l(e,["retrievalConfig"]);return r!=null&&a(t,["retrievalConfig"],r),t}function XT(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(t,["functionDeclarations"],f)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&a(t,["computerUse"],o);const i=l(e,["fileSearch"]);i!=null&&a(t,["fileSearch"],i);const s=l(e,["codeExecution"]);if(s!=null&&a(t,["codeExecution"],s),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],zT(u));const d=l(e,["googleSearch"]);d!=null&&a(t,["googleSearch"],HT(d));const c=l(e,["urlContext"]);return c!=null&&a(t,["urlContext"],c),t}function QT(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>VT(h))),a(t,["functionDeclarations"],p)}const r=l(e,["retrieval"]);r!=null&&a(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&a(t,["googleSearchRetrieval"],o);const i=l(e,["computerUse"]);if(i!=null&&a(t,["computerUse"],i),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(e,["codeExecution"]);s!=null&&a(t,["codeExecution"],s);const u=l(e,["enterpriseWebSearch"]);u!=null&&a(t,["enterpriseWebSearch"],u);const d=l(e,["googleMaps"]);d!=null&&a(t,["googleMaps"],d);const c=l(e,["googleSearch"]);c!=null&&a(t,["googleSearch"],c);const f=l(e,["urlContext"]);return f!=null&&a(t,["urlContext"],f),t}function ZT(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&a(t,["ttl"],r);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function jT(e,t){const n={},r=l(e,["ttl"]);t!==void 0&&r!=null&&a(t,["ttl"],r);const o=l(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),n}function ew(e,t){const n={},r=l(t,["name"]);r!=null&&a(n,["_url","name"],Ln(e,r));const o=l(t,["config"]);return o!=null&&ZT(o,n),n}function tw(e,t){const n={},r=l(t,["name"]);r!=null&&a(n,["_url","name"],Ln(e,r));const o=l(t,["config"]);return o!=null&&jT(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nw extends Dn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Pr(Rn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=kT(this.apiClient,t);return u=Y("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=AT(this.apiClient,t);return u=Y("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=GT(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=bT(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=RT(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=DT(f),h=new mp;return Object.assign(h,p),h})}else{const c=PT(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=MT(f),h=new mp;return Object.assign(h,p),h})}}async update(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=tw(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const c=ew(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=OT(t);return u=Y("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=YT(f),h=new gp;return Object.assign(h,p),h})}else{const c=$T(t);return u=Y("cachedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=JT(f),h=new gp;return Object.assign(h,p),h})}}}function Ep(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(e){return this instanceof Ie?(this.v=e,this):new Ie(e)}function io(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(v){return Promise.resolve(v).then(g,p)}}function u(g,v){r[g]&&(o[g]=function(T){return new Promise(function(U,y){i.push([g,T,U,y])>1||d(g,T)})},v&&(o[g]=v(o[g])))}function d(g,v){try{c(r[g](v))}catch(T){h(i[0][3],T)}}function c(g){g.value instanceof Ie?Promise.resolve(g.value.v).then(f,p):h(i[0][2],g)}function f(g){d("next",g)}function p(g){d("throw",g)}function h(g,v){g(v),i.shift(),i.length&&d(i[0][0],i[0][1])}}function ri(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ep=="function"?Ep(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(u,d){s=e[i](s),o(u,d,s.done,s.value)})}}function o(i,s,u,d){Promise.resolve(d).then(function(c){i({value:c,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rw(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Vg(n)}function Vg(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function ow(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Tp(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const o=[];let i=!0;for(;r<n&&e[r].role==="model";)o.push(e[r]),i&&!Vg(e[r])&&(i=!1),r++;i?t.push(...o):t.pop()}return t}class iw{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new sw(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class sw{constructor(t,n,r,o={},i=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),ow(i)}async sendMessage(t){var n;await this.sendPromise;const r=rt(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,u;const d=await o,c=(s=(i=d.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=d.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(u=f.slice(p))!==null&&u!==void 0?u:[]);const g=c?[c]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;const r=rt(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const i=await o;return this.processStreamResponse(i,r)}getHistory(t=!1){const n=t?Tp(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){var r,o;return io(this,arguments,function*(){var s,u,d,c;const f=[];try{for(var p=!0,h=ri(t),g;g=yield Ie(h.next()),s=g.done,!s;p=!0){c=g.value,p=!1;const v=c;if(rw(v)){const T=(o=(r=v.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;T!==void 0&&f.push(T)}yield yield Ie(v)}}catch(v){u={error:v}}finally{try{!p&&!s&&(d=h.return)&&(yield Ie(d.call(h)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(t,n,r){let o=[];n.length>0&&n.every(i=>i.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Tp(r)):this.history.push(t),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nl extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Nl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lw(e){const t={},n=l(e,["file"]);return n!=null&&a(t,["file"],n),t}function aw(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function uw(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","file"],Pg(n)),t}function cw(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function dw(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","file"],Pg(n)),t}function fw(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function pw(e){const t={},n=l(e,["config"]);return n!=null&&fw(n,t),t}function hw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&a(t,["nextPageToken"],r);const o=l(e,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["files"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mw extends Dn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Pr(Rn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=pw(t);return i=Y("files",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),o.then(d=>{const c=hw(d),f=new xE;return Object.assign(f,c),f})}}async createInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lw(t);return i=Y("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const c=aw(d),f=new _E;return Object.assign(f,c),f})}}async get(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=dw(t);return i=Y("files/{file}",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=uw(t);return i=Y("files/{file}",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),o.then(d=>{const c=cw(d),f=new CE;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ws(e){const t={},n=l(e,["data"]);if(n!=null&&a(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function gw(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Mw(i))),a(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function yw(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function vw(e){const t={},n=l(e,["id"]);n!=null&&a(t,["id"],n);const r=l(e,["args"]);r!=null&&a(t,["args"],r);const o=l(e,["name"]);if(o!=null&&a(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function xw(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&a(t,["description"],n);const r=l(e,["name"]);r!=null&&a(t,["name"],r);const o=l(e,["parameters"]);o!=null&&a(t,["parameters"],o);const i=l(e,["parametersJsonSchema"]);i!=null&&a(t,["parametersJsonSchema"],i);const s=l(e,["response"]);s!=null&&a(t,["response"],s);const u=l(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function _w(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&a(t,["modelConfig"],n);const r=l(e,["responseJsonSchema"]);r!=null&&a(t,["responseJsonSchema"],r);const o=l(e,["audioTimestamp"]);o!=null&&a(t,["audioTimestamp"],o);const i=l(e,["candidateCount"]);i!=null&&a(t,["candidateCount"],i);const s=l(e,["enableAffectiveDialog"]);s!=null&&a(t,["enableAffectiveDialog"],s);const u=l(e,["frequencyPenalty"]);u!=null&&a(t,["frequencyPenalty"],u);const d=l(e,["logprobs"]);d!=null&&a(t,["logprobs"],d);const c=l(e,["maxOutputTokens"]);c!=null&&a(t,["maxOutputTokens"],c);const f=l(e,["mediaResolution"]);f!=null&&a(t,["mediaResolution"],f);const p=l(e,["presencePenalty"]);p!=null&&a(t,["presencePenalty"],p);const h=l(e,["responseLogprobs"]);h!=null&&a(t,["responseLogprobs"],h);const g=l(e,["responseMimeType"]);g!=null&&a(t,["responseMimeType"],g);const v=l(e,["responseModalities"]);v!=null&&a(t,["responseModalities"],v);const T=l(e,["responseSchema"]);T!=null&&a(t,["responseSchema"],T);const U=l(e,["routingConfig"]);U!=null&&a(t,["routingConfig"],U);const y=l(e,["seed"]);y!=null&&a(t,["seed"],y);const x=l(e,["speechConfig"]);x!=null&&a(t,["speechConfig"],bg(x));const _=l(e,["stopSequences"]);_!=null&&a(t,["stopSequences"],_);const E=l(e,["temperature"]);E!=null&&a(t,["temperature"],E);const k=l(e,["thinkingConfig"]);k!=null&&a(t,["thinkingConfig"],k);const N=l(e,["topK"]);N!=null&&a(t,["topK"],N);const R=l(e,["topP"]);if(R!=null&&a(t,["topP"],R),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Cw(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function Sw(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],n),t}function Ew(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const i=l(e,["temperature"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig","temperature"],i);const s=l(e,["topP"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","topP"],s);const u=l(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const d=l(e,["maxOutputTokens"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","maxOutputTokens"],d);const c=l(e,["mediaResolution"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","mediaResolution"],c);const f=l(e,["seed"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","seed"],f);const p=l(e,["speechConfig"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","speechConfig"],Rc(p));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","thinkingConfig"],h);const g=l(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=l(e,["systemInstruction"]);t!==void 0&&v!=null&&a(t,["setup","systemInstruction"],gw(rt(v)));const T=l(e,["tools"]);if(t!==void 0&&T!=null){let N=Co(T);Array.isArray(N)&&(N=N.map(R=>Lw(_o(R)))),a(t,["setup","tools"],N)}const U=l(e,["sessionResumption"]);t!==void 0&&U!=null&&a(t,["setup","sessionResumption"],Dw(U));const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&a(t,["setup","inputAudioTranscription"],y);const x=l(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],x);const _=l(e,["realtimeInputConfig"]);t!==void 0&&_!=null&&a(t,["setup","realtimeInputConfig"],_);const E=l(e,["contextWindowCompression"]);t!==void 0&&E!=null&&a(t,["setup","contextWindowCompression"],E);const k=l(e,["proactivity"]);return t!==void 0&&k!=null&&a(t,["setup","proactivity"],k),n}function Tw(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig"],_w(r));const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const i=l(e,["temperature"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig","temperature"],i);const s=l(e,["topP"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","topP"],s);const u=l(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const d=l(e,["maxOutputTokens"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","maxOutputTokens"],d);const c=l(e,["mediaResolution"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","mediaResolution"],c);const f=l(e,["seed"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","seed"],f);const p=l(e,["speechConfig"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","speechConfig"],bg(Rc(p)));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","thinkingConfig"],h);const g=l(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=l(e,["systemInstruction"]);t!==void 0&&v!=null&&a(t,["setup","systemInstruction"],rt(v));const T=l(e,["tools"]);if(t!==void 0&&T!=null){let N=Co(T);Array.isArray(N)&&(N=N.map(R=>Uw(_o(R)))),a(t,["setup","tools"],N)}const U=l(e,["sessionResumption"]);t!==void 0&&U!=null&&a(t,["setup","sessionResumption"],U);const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&a(t,["setup","inputAudioTranscription"],y);const x=l(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],x);const _=l(e,["realtimeInputConfig"]);t!==void 0&&_!=null&&a(t,["setup","realtimeInputConfig"],_);const E=l(e,["contextWindowCompression"]);t!==void 0&&E!=null&&a(t,["setup","contextWindowCompression"],E);const k=l(e,["proactivity"]);return t!==void 0&&k!=null&&a(t,["setup","proactivity"],k),n}function ww(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["setup","model"],ye(e,r));const o=l(t,["config"]);return o!=null&&a(n,["config"],Ew(o,n)),n}function Nw(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["setup","model"],ye(e,r));const o=l(t,["config"]);return o!=null&&a(n,["config"],Tw(o,n)),n}function Iw(e){const t={},n=l(e,["musicGenerationConfig"]);return n!=null&&a(t,["musicGenerationConfig"],n),t}function Aw(e){const t={},n=l(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),a(t,["weightedPrompts"],r)}return t}function kw(e){const t={},n=l(e,["media"]);if(n!=null){let c=wg(n);Array.isArray(c)&&(c=c.map(f=>ws(f))),a(t,["mediaChunks"],c)}const r=l(e,["audio"]);r!=null&&a(t,["audio"],ws(Ig(r)));const o=l(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const i=l(e,["video"]);i!=null&&a(t,["video"],ws(Ng(i)));const s=l(e,["text"]);s!=null&&a(t,["text"],s);const u=l(e,["activityStart"]);u!=null&&a(t,["activityStart"],u);const d=l(e,["activityEnd"]);return d!=null&&a(t,["activityEnd"],d),t}function Pw(e){const t={},n=l(e,["media"]);if(n!=null){let c=wg(n);Array.isArray(c)&&(c=c.map(f=>f)),a(t,["mediaChunks"],c)}const r=l(e,["audio"]);r!=null&&a(t,["audio"],Ig(r));const o=l(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);const i=l(e,["video"]);i!=null&&a(t,["video"],Ng(i));const s=l(e,["text"]);s!=null&&a(t,["text"],s);const u=l(e,["activityStart"]);u!=null&&a(t,["activityStart"],u);const d=l(e,["activityEnd"]);return d!=null&&a(t,["activityEnd"],d),t}function Rw(e){const t={},n=l(e,["setupComplete"]);n!=null&&a(t,["setupComplete"],n);const r=l(e,["serverContent"]);r!=null&&a(t,["serverContent"],r);const o=l(e,["toolCall"]);o!=null&&a(t,["toolCall"],o);const i=l(e,["toolCallCancellation"]);i!=null&&a(t,["toolCallCancellation"],i);const s=l(e,["usageMetadata"]);s!=null&&a(t,["usageMetadata"],Fw(s));const u=l(e,["goAway"]);u!=null&&a(t,["goAway"],u);const d=l(e,["sessionResumptionUpdate"]);return d!=null&&a(t,["sessionResumptionUpdate"],d),t}function Mw(e){const t={},n=l(e,["mediaResolution"]);n!=null&&a(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);const i=l(e,["fileData"]);i!=null&&a(t,["fileData"],yw(i));const s=l(e,["functionCall"]);s!=null&&a(t,["functionCall"],vw(s));const u=l(e,["functionResponse"]);u!=null&&a(t,["functionResponse"],u);const d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],ws(d));const c=l(e,["text"]);c!=null&&a(t,["text"],c);const f=l(e,["thought"]);f!=null&&a(t,["thought"],f);const p=l(e,["thoughtSignature"]);p!=null&&a(t,["thoughtSignature"],p);const h=l(e,["videoMetadata"]);return h!=null&&a(t,["videoMetadata"],h),t}function Dw(e){const t={},n=l(e,["handle"]);if(n!=null&&a(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function bg(e){const t={},n=l(e,["languageCode"]);n!=null&&a(t,["languageCode"],n);const r=l(e,["voiceConfig"]);if(r!=null&&a(t,["voiceConfig"],r),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Lw(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(t,["functionDeclarations"],f)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&a(t,["computerUse"],o);const i=l(e,["fileSearch"]);i!=null&&a(t,["fileSearch"],i);const s=l(e,["codeExecution"]);if(s!=null&&a(t,["codeExecution"],s),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],Cw(u));const d=l(e,["googleSearch"]);d!=null&&a(t,["googleSearch"],Sw(d));const c=l(e,["urlContext"]);return c!=null&&a(t,["urlContext"],c),t}function Uw(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>xw(h))),a(t,["functionDeclarations"],p)}const r=l(e,["retrieval"]);r!=null&&a(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&a(t,["googleSearchRetrieval"],o);const i=l(e,["computerUse"]);if(i!=null&&a(t,["computerUse"],i),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(e,["codeExecution"]);s!=null&&a(t,["codeExecution"],s);const u=l(e,["enterpriseWebSearch"]);u!=null&&a(t,["enterpriseWebSearch"],u);const d=l(e,["googleMaps"]);d!=null&&a(t,["googleMaps"],d);const c=l(e,["googleSearch"]);c!=null&&a(t,["googleSearch"],c);const f=l(e,["urlContext"]);return f!=null&&a(t,["urlContext"],f),t}function Fw(e){const t={},n=l(e,["promptTokenCount"]);n!=null&&a(t,["promptTokenCount"],n);const r=l(e,["cachedContentTokenCount"]);r!=null&&a(t,["cachedContentTokenCount"],r);const o=l(e,["candidatesTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);const i=l(e,["toolUsePromptTokenCount"]);i!=null&&a(t,["toolUsePromptTokenCount"],i);const s=l(e,["thoughtsTokenCount"]);s!=null&&a(t,["thoughtsTokenCount"],s);const u=l(e,["totalTokenCount"]);u!=null&&a(t,["totalTokenCount"],u);const d=l(e,["promptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),a(t,["promptTokensDetails"],g)}const c=l(e,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),a(t,["cacheTokensDetails"],g)}const f=l(e,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>v)),a(t,["responseTokensDetails"],g)}const p=l(e,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(v=>v)),a(t,["toolUsePromptTokensDetails"],g)}const h=l(e,["trafficType"]);return h!=null&&a(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vw(e){const t={},n=l(e,["data"]);if(n!=null&&a(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function bw(e){const t={},n=l(e,["content"]);n!=null&&a(t,["content"],n);const r=l(e,["citationMetadata"]);r!=null&&a(t,["citationMetadata"],Gw(r));const o=l(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);const i=l(e,["finishReason"]);i!=null&&a(t,["finishReason"],i);const s=l(e,["avgLogprobs"]);s!=null&&a(t,["avgLogprobs"],s);const u=l(e,["groundingMetadata"]);u!=null&&a(t,["groundingMetadata"],u);const d=l(e,["index"]);d!=null&&a(t,["index"],d);const c=l(e,["logprobsResult"]);c!=null&&a(t,["logprobsResult"],c);const f=l(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),a(t,["safetyRatings"],h)}const p=l(e,["urlContextMetadata"]);return p!=null&&a(t,["urlContextMetadata"],p),t}function Gw(e){const t={},n=l(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),a(t,["citations"],r)}return t}function zw(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["contents"]);if(o!=null){let i=zt(o);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["contents"],i)}return n}function Hw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),a(t,["tokensInfo"],o)}return t}function Bw(e){const t={},n=l(e,["values"]);n!=null&&a(t,["values"],n);const r=l(e,["statistics"]);return r!=null&&a(t,["statistics"],qw(r)),t}function qw(e){const t={},n=l(e,["truncated"]);n!=null&&a(t,["truncated"],n);const r=l(e,["token_count"]);return r!=null&&a(t,["tokenCount"],r),t}function Il(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>ZN(i))),a(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function $w(e){const t={},n=l(e,["controlType"]);n!=null&&a(t,["controlType"],n);const r=l(e,["enableControlImageComputation"]);return r!=null&&a(t,["computeControl"],r),t}function Ow(e){const t={};if(l(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Jw(e,t){const n={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&a(t,["systemInstruction"],rt(r));const o=l(e,["tools"]);if(t!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>qg(u))),a(t,["tools"],s)}const i=l(e,["generationConfig"]);return t!==void 0&&i!=null&&a(t,["generationConfig"],VN(i)),n}function Yw(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["contents"]);if(o!=null){let s=zt(o);Array.isArray(s)&&(s=s.map(u=>Il(u))),a(n,["contents"],s)}const i=l(t,["config"]);return i!=null&&Ow(i),n}function Ww(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["contents"]);if(o!=null){let s=zt(o);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(t,["config"]);return i!=null&&Jw(i,n),n}function Kw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["totalTokens"]);r!=null&&a(t,["totalTokens"],r);const o=l(e,["cachedContentTokenCount"]);return o!=null&&a(t,["cachedContentTokenCount"],o),t}function Xw(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["totalTokens"]);return r!=null&&a(t,["totalTokens"],r),t}function Qw(e,t){const n={},r=l(t,["model"]);return r!=null&&a(n,["_url","name"],ye(e,r)),n}function Zw(e,t){const n={},r=l(t,["model"]);return r!=null&&a(n,["_url","name"],ye(e,r)),n}function jw(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function eN(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}function tN(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const i=l(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const s=l(e,["aspectRatio"]);t!==void 0&&s!=null&&a(t,["parameters","aspectRatio"],s);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const d=l(e,["seed"]);t!==void 0&&d!=null&&a(t,["parameters","seed"],d);const c=l(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&a(t,["parameters","safetySetting"],c);const f=l(e,["personGeneration"]);t!==void 0&&f!=null&&a(t,["parameters","personGeneration"],f);const p=l(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&a(t,["parameters","includeSafetyAttributes"],p);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&a(t,["parameters","includeRaiReason"],h);const g=l(e,["language"]);t!==void 0&&g!=null&&a(t,["parameters","language"],g);const v=l(e,["outputMimeType"]);t!==void 0&&v!=null&&a(t,["parameters","outputOptions","mimeType"],v);const T=l(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&a(t,["parameters","outputOptions","compressionQuality"],T);const U=l(e,["addWatermark"]);t!==void 0&&U!=null&&a(t,["parameters","addWatermark"],U);const y=l(e,["labels"]);t!==void 0&&y!=null&&a(t,["labels"],y);const x=l(e,["editMode"]);t!==void 0&&x!=null&&a(t,["parameters","editMode"],x);const _=l(e,["baseSteps"]);return t!==void 0&&_!=null&&a(t,["parameters","editConfig","baseSteps"],_),n}function nN(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const i=l(t,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>o1(d))),a(n,["instances[0]","referenceImages"],u)}const s=l(t,["config"]);return s!=null&&tN(s,n),n}function rN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Al(i))),a(t,["generatedImages"],o)}return t}function oN(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&a(t,["requests[]","taskType"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);const i=l(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&a(t,["requests[]","outputDimensionality"],i),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function iN(e,t){const n={},r=l(e,["taskType"]);t!==void 0&&r!=null&&a(t,["instances[]","task_type"],r);const o=l(e,["title"]);t!==void 0&&o!=null&&a(t,["instances[]","title"],o);const i=l(e,["outputDimensionality"]);t!==void 0&&i!=null&&a(t,["parameters","outputDimensionality"],i);const s=l(e,["mimeType"]);t!==void 0&&s!=null&&a(t,["instances[]","mimeType"],s);const u=l(e,["autoTruncate"]);return t!==void 0&&u!=null&&a(t,["parameters","autoTruncate"],u),n}function sN(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["contents"]);if(o!=null){let u=Ac(e,o);Array.isArray(u)&&(u=u.map(d=>d)),a(n,["requests[]","content"],u)}const i=l(t,["config"]);i!=null&&oN(i,n);const s=l(t,["model"]);return s!==void 0&&a(n,["requests[]","model"],ye(e,s)),n}function lN(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["contents"]);if(o!=null){let s=Ac(e,o);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["instances[]","content"],s)}const i=l(t,["config"]);return i!=null&&iN(i,n),n}function aN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["embeddings"],i)}const o=l(e,["metadata"]);return o!=null&&a(t,["metadata"],o),t}function uN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Bw(s))),a(t,["embeddings"],i)}const o=l(e,["metadata"]);return o!=null&&a(t,["metadata"],o),t}function cN(e){const t={},n=l(e,["endpoint"]);n!=null&&a(t,["name"],n);const r=l(e,["deployedModelId"]);return r!=null&&a(t,["deployedModelId"],r),t}function dN(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function fN(e){const t={},n=l(e,["id"]);n!=null&&a(t,["id"],n);const r=l(e,["args"]);r!=null&&a(t,["args"],r);const o=l(e,["name"]);if(o!=null&&a(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function pN(e){const t={},n=l(e,["mode"]);n!=null&&a(t,["mode"],n);const r=l(e,["allowedFunctionNames"]);if(r!=null&&a(t,["allowedFunctionNames"],r),l(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function hN(e){const t={};if(l(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(e,["description"]);n!=null&&a(t,["description"],n);const r=l(e,["name"]);r!=null&&a(t,["name"],r);const o=l(e,["parameters"]);o!=null&&a(t,["parameters"],o);const i=l(e,["parametersJsonSchema"]);i!=null&&a(t,["parametersJsonSchema"],i);const s=l(e,["response"]);s!=null&&a(t,["response"],s);const u=l(e,["responseJsonSchema"]);return u!=null&&a(t,["responseJsonSchema"],u),t}function mN(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],Il(rt(o)));const i=l(t,["temperature"]);i!=null&&a(r,["temperature"],i);const s=l(t,["topP"]);s!=null&&a(r,["topP"],s);const u=l(t,["topK"]);u!=null&&a(r,["topK"],u);const d=l(t,["candidateCount"]);d!=null&&a(r,["candidateCount"],d);const c=l(t,["maxOutputTokens"]);c!=null&&a(r,["maxOutputTokens"],c);const f=l(t,["stopSequences"]);f!=null&&a(r,["stopSequences"],f);const p=l(t,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const h=l(t,["logprobs"]);h!=null&&a(r,["logprobs"],h);const g=l(t,["presencePenalty"]);g!=null&&a(r,["presencePenalty"],g);const v=l(t,["frequencyPenalty"]);v!=null&&a(r,["frequencyPenalty"],v);const T=l(t,["seed"]);T!=null&&a(r,["seed"],T);const U=l(t,["responseMimeType"]);U!=null&&a(r,["responseMimeType"],U);const y=l(t,["responseSchema"]);y!=null&&a(r,["responseSchema"],kc(y));const x=l(t,["responseJsonSchema"]);if(x!=null&&a(r,["responseJsonSchema"],x),l(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=l(t,["safetySettings"]);if(n!==void 0&&_!=null){let ue=_;Array.isArray(ue)&&(ue=ue.map(ve=>i1(ve))),a(n,["safetySettings"],ue)}const E=l(t,["tools"]);if(n!==void 0&&E!=null){let ue=Co(E);Array.isArray(ue)&&(ue=ue.map(ve=>f1(_o(ve)))),a(n,["tools"],ue)}const k=l(t,["toolConfig"]);if(n!==void 0&&k!=null&&a(n,["toolConfig"],d1(k)),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=l(t,["cachedContent"]);n!==void 0&&N!=null&&a(n,["cachedContent"],Ln(e,N));const R=l(t,["responseModalities"]);R!=null&&a(r,["responseModalities"],R);const z=l(t,["mediaResolution"]);z!=null&&a(r,["mediaResolution"],z);const J=l(t,["speechConfig"]);if(J!=null&&a(r,["speechConfig"],Pc(J)),l(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=l(t,["thinkingConfig"]);B!=null&&a(r,["thinkingConfig"],B);const se=l(t,["imageConfig"]);return se!=null&&a(r,["imageConfig"],BN(se)),r}function gN(e,t,n){const r={},o=l(t,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],rt(o));const i=l(t,["temperature"]);i!=null&&a(r,["temperature"],i);const s=l(t,["topP"]);s!=null&&a(r,["topP"],s);const u=l(t,["topK"]);u!=null&&a(r,["topK"],u);const d=l(t,["candidateCount"]);d!=null&&a(r,["candidateCount"],d);const c=l(t,["maxOutputTokens"]);c!=null&&a(r,["maxOutputTokens"],c);const f=l(t,["stopSequences"]);f!=null&&a(r,["stopSequences"],f);const p=l(t,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const h=l(t,["logprobs"]);h!=null&&a(r,["logprobs"],h);const g=l(t,["presencePenalty"]);g!=null&&a(r,["presencePenalty"],g);const v=l(t,["frequencyPenalty"]);v!=null&&a(r,["frequencyPenalty"],v);const T=l(t,["seed"]);T!=null&&a(r,["seed"],T);const U=l(t,["responseMimeType"]);U!=null&&a(r,["responseMimeType"],U);const y=l(t,["responseSchema"]);y!=null&&a(r,["responseSchema"],kc(y));const x=l(t,["responseJsonSchema"]);x!=null&&a(r,["responseJsonSchema"],x);const _=l(t,["routingConfig"]);_!=null&&a(r,["routingConfig"],_);const E=l(t,["modelSelectionConfig"]);E!=null&&a(r,["modelConfig"],E);const k=l(t,["safetySettings"]);if(n!==void 0&&k!=null){let M=k;Array.isArray(M)&&(M=M.map(O=>O)),a(n,["safetySettings"],M)}const N=l(t,["tools"]);if(n!==void 0&&N!=null){let M=Co(N);Array.isArray(M)&&(M=M.map(O=>qg(_o(O)))),a(n,["tools"],M)}const R=l(t,["toolConfig"]);n!==void 0&&R!=null&&a(n,["toolConfig"],R);const z=l(t,["labels"]);n!==void 0&&z!=null&&a(n,["labels"],z);const J=l(t,["cachedContent"]);n!==void 0&&J!=null&&a(n,["cachedContent"],Ln(e,J));const B=l(t,["responseModalities"]);B!=null&&a(r,["responseModalities"],B);const se=l(t,["mediaResolution"]);se!=null&&a(r,["mediaResolution"],se);const ue=l(t,["speechConfig"]);ue!=null&&a(r,["speechConfig"],Bg(Pc(ue)));const ve=l(t,["audioTimestamp"]);ve!=null&&a(r,["audioTimestamp"],ve);const P=l(t,["thinkingConfig"]);P!=null&&a(r,["thinkingConfig"],P);const D=l(t,["imageConfig"]);return D!=null&&a(r,["imageConfig"],qN(D)),r}function wp(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["contents"]);if(o!=null){let s=zt(o);Array.isArray(s)&&(s=s.map(u=>Il(u))),a(n,["contents"],s)}const i=l(t,["config"]);return i!=null&&a(n,["generationConfig"],mN(e,i,n)),n}function Np(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["contents"]);if(o!=null){let s=zt(o);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(t,["config"]);return i!=null&&a(n,["generationConfig"],gN(e,i,n)),n}function Ip(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(c=>bw(c))),a(t,["candidates"],d)}const o=l(e,["modelVersion"]);o!=null&&a(t,["modelVersion"],o);const i=l(e,["promptFeedback"]);i!=null&&a(t,["promptFeedback"],i);const s=l(e,["responseId"]);s!=null&&a(t,["responseId"],s);const u=l(e,["usageMetadata"]);return u!=null&&a(t,["usageMetadata"],u),t}function Ap(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>f)),a(t,["candidates"],c)}const o=l(e,["createTime"]);o!=null&&a(t,["createTime"],o);const i=l(e,["modelVersion"]);i!=null&&a(t,["modelVersion"],i);const s=l(e,["promptFeedback"]);s!=null&&a(t,["promptFeedback"],s);const u=l(e,["responseId"]);u!=null&&a(t,["responseId"],u);const d=l(e,["usageMetadata"]);return d!=null&&a(t,["usageMetadata"],d),t}function yN(e,t){const n={};if(l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const o=l(e,["aspectRatio"]);t!==void 0&&o!=null&&a(t,["parameters","aspectRatio"],o);const i=l(e,["guidanceScale"]);if(t!==void 0&&i!=null&&a(t,["parameters","guidanceScale"],i),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&a(t,["parameters","safetySetting"],s);const u=l(e,["personGeneration"]);t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u);const d=l(e,["includeSafetyAttributes"]);t!==void 0&&d!=null&&a(t,["parameters","includeSafetyAttributes"],d);const c=l(e,["includeRaiReason"]);t!==void 0&&c!=null&&a(t,["parameters","includeRaiReason"],c);const f=l(e,["language"]);t!==void 0&&f!=null&&a(t,["parameters","language"],f);const p=l(e,["outputMimeType"]);t!==void 0&&p!=null&&a(t,["parameters","outputOptions","mimeType"],p);const h=l(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&a(t,["parameters","outputOptions","compressionQuality"],h),l(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=l(e,["imageSize"]);if(t!==void 0&&g!=null&&a(t,["parameters","sampleImageSize"],g),l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function vN(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);const o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);const i=l(e,["numberOfImages"]);t!==void 0&&i!=null&&a(t,["parameters","sampleCount"],i);const s=l(e,["aspectRatio"]);t!==void 0&&s!=null&&a(t,["parameters","aspectRatio"],s);const u=l(e,["guidanceScale"]);t!==void 0&&u!=null&&a(t,["parameters","guidanceScale"],u);const d=l(e,["seed"]);t!==void 0&&d!=null&&a(t,["parameters","seed"],d);const c=l(e,["safetyFilterLevel"]);t!==void 0&&c!=null&&a(t,["parameters","safetySetting"],c);const f=l(e,["personGeneration"]);t!==void 0&&f!=null&&a(t,["parameters","personGeneration"],f);const p=l(e,["includeSafetyAttributes"]);t!==void 0&&p!=null&&a(t,["parameters","includeSafetyAttributes"],p);const h=l(e,["includeRaiReason"]);t!==void 0&&h!=null&&a(t,["parameters","includeRaiReason"],h);const g=l(e,["language"]);t!==void 0&&g!=null&&a(t,["parameters","language"],g);const v=l(e,["outputMimeType"]);t!==void 0&&v!=null&&a(t,["parameters","outputOptions","mimeType"],v);const T=l(e,["outputCompressionQuality"]);t!==void 0&&T!=null&&a(t,["parameters","outputOptions","compressionQuality"],T);const U=l(e,["addWatermark"]);t!==void 0&&U!=null&&a(t,["parameters","addWatermark"],U);const y=l(e,["labels"]);t!==void 0&&y!=null&&a(t,["labels"],y);const x=l(e,["imageSize"]);t!==void 0&&x!=null&&a(t,["parameters","sampleImageSize"],x);const _=l(e,["enhancePrompt"]);return t!==void 0&&_!=null&&a(t,["parameters","enhancePrompt"],_),n}function xN(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const i=l(t,["config"]);return i!=null&&yN(i,n),n}function _N(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const i=l(t,["config"]);return i!=null&&vN(i,n),n}function CN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>DN(s))),a(t,["generatedImages"],i)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],zg(o)),t}function SN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Al(s))),a(t,["generatedImages"],i)}const o=l(e,["positivePromptSafetyAttributes"]);return o!=null&&a(t,["positivePromptSafetyAttributes"],Hg(o)),t}function EN(e,t){const n={},r=l(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r),l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(e,["durationSeconds"]);if(t!==void 0&&o!=null&&a(t,["parameters","durationSeconds"],o),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(e,["aspectRatio"]);t!==void 0&&i!=null&&a(t,["parameters","aspectRatio"],i);const s=l(e,["resolution"]);t!==void 0&&s!=null&&a(t,["parameters","resolution"],s);const u=l(e,["personGeneration"]);if(t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u),l(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=l(e,["negativePrompt"]);t!==void 0&&d!=null&&a(t,["parameters","negativePrompt"],d);const c=l(e,["enhancePrompt"]);if(t!==void 0&&c!=null&&a(t,["parameters","enhancePrompt"],c),l(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(e,["lastFrame"]);t!==void 0&&f!=null&&a(t,["instances[0]","lastFrame"],kl(f));const p=l(e,["referenceImages"]);if(t!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>w1(g))),a(t,["instances[0]","referenceImages"],h)}if(l(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function TN(e,t){const n={},r=l(e,["numberOfVideos"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const o=l(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);const i=l(e,["fps"]);t!==void 0&&i!=null&&a(t,["parameters","fps"],i);const s=l(e,["durationSeconds"]);t!==void 0&&s!=null&&a(t,["parameters","durationSeconds"],s);const u=l(e,["seed"]);t!==void 0&&u!=null&&a(t,["parameters","seed"],u);const d=l(e,["aspectRatio"]);t!==void 0&&d!=null&&a(t,["parameters","aspectRatio"],d);const c=l(e,["resolution"]);t!==void 0&&c!=null&&a(t,["parameters","resolution"],c);const f=l(e,["personGeneration"]);t!==void 0&&f!=null&&a(t,["parameters","personGeneration"],f);const p=l(e,["pubsubTopic"]);t!==void 0&&p!=null&&a(t,["parameters","pubsubTopic"],p);const h=l(e,["negativePrompt"]);t!==void 0&&h!=null&&a(t,["parameters","negativePrompt"],h);const g=l(e,["enhancePrompt"]);t!==void 0&&g!=null&&a(t,["parameters","enhancePrompt"],g);const v=l(e,["generateAudio"]);t!==void 0&&v!=null&&a(t,["parameters","generateAudio"],v);const T=l(e,["lastFrame"]);t!==void 0&&T!=null&&a(t,["instances[0]","lastFrame"],rn(T));const U=l(e,["referenceImages"]);if(t!==void 0&&U!=null){let _=U;Array.isArray(_)&&(_=_.map(E=>N1(E))),a(t,["instances[0]","referenceImages"],_)}const y=l(e,["mask"]);t!==void 0&&y!=null&&a(t,["instances[0]","mask"],T1(y));const x=l(e,["compressionQuality"]);return t!==void 0&&x!=null&&a(t,["parameters","compressionQuality"],x),n}function wN(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);const o=l(e,["done"]);o!=null&&a(t,["done"],o);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response","generateVideoResponse"]);return s!=null&&a(t,["response"],kN(s)),t}function NN(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);const o=l(e,["done"]);o!=null&&a(t,["done"],o);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response"]);return s!=null&&a(t,["response"],PN(s)),t}function IN(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const i=l(t,["image"]);i!=null&&a(n,["instances[0]","image"],kl(i));const s=l(t,["video"]);s!=null&&a(n,["instances[0]","video"],$g(s));const u=l(t,["source"]);u!=null&&RN(u,n);const d=l(t,["config"]);return d!=null&&EN(d,n),n}function AN(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const i=l(t,["image"]);i!=null&&a(n,["instances[0]","image"],rn(i));const s=l(t,["video"]);s!=null&&a(n,["instances[0]","video"],Og(s));const u=l(t,["source"]);u!=null&&MN(u,n);const d=l(t,["config"]);return d!=null&&TN(d,n),n}function kN(e){const t={},n=l(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>UN(s))),a(t,["generatedVideos"],i)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&a(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function PN(e){const t={},n=l(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>FN(s))),a(t,["generatedVideos"],i)}const r=l(e,["raiMediaFilteredCount"]);r!=null&&a(t,["raiMediaFilteredCount"],r);const o=l(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function RN(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&a(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],kl(o));const i=l(e,["video"]);return t!==void 0&&i!=null&&a(t,["instances[0]","video"],$g(i)),n}function MN(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&a(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],rn(o));const i=l(e,["video"]);return t!==void 0&&i!=null&&a(t,["instances[0]","video"],Og(i)),n}function DN(e){const t={},n=l(e,["_self"]);n!=null&&a(t,["image"],$N(n));const r=l(e,["raiFilteredReason"]);r!=null&&a(t,["raiFilteredReason"],r);const o=l(e,["_self"]);return o!=null&&a(t,["safetyAttributes"],zg(o)),t}function Al(e){const t={},n=l(e,["_self"]);n!=null&&a(t,["image"],Gg(n));const r=l(e,["raiFilteredReason"]);r!=null&&a(t,["raiFilteredReason"],r);const o=l(e,["_self"]);o!=null&&a(t,["safetyAttributes"],Hg(o));const i=l(e,["prompt"]);return i!=null&&a(t,["enhancedPrompt"],i),t}function LN(e){const t={},n=l(e,["_self"]);n!=null&&a(t,["mask"],Gg(n));const r=l(e,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),a(t,["labels"],o)}return t}function UN(e){const t={},n=l(e,["video"]);return n!=null&&a(t,["video"],S1(n)),t}function FN(e){const t={},n=l(e,["_self"]);return n!=null&&a(t,["video"],E1(n)),t}function VN(e){const t={},n=l(e,["modelSelectionConfig"]);n!=null&&a(t,["modelConfig"],n);const r=l(e,["responseJsonSchema"]);r!=null&&a(t,["responseJsonSchema"],r);const o=l(e,["audioTimestamp"]);o!=null&&a(t,["audioTimestamp"],o);const i=l(e,["candidateCount"]);i!=null&&a(t,["candidateCount"],i);const s=l(e,["enableAffectiveDialog"]);s!=null&&a(t,["enableAffectiveDialog"],s);const u=l(e,["frequencyPenalty"]);u!=null&&a(t,["frequencyPenalty"],u);const d=l(e,["logprobs"]);d!=null&&a(t,["logprobs"],d);const c=l(e,["maxOutputTokens"]);c!=null&&a(t,["maxOutputTokens"],c);const f=l(e,["mediaResolution"]);f!=null&&a(t,["mediaResolution"],f);const p=l(e,["presencePenalty"]);p!=null&&a(t,["presencePenalty"],p);const h=l(e,["responseLogprobs"]);h!=null&&a(t,["responseLogprobs"],h);const g=l(e,["responseMimeType"]);g!=null&&a(t,["responseMimeType"],g);const v=l(e,["responseModalities"]);v!=null&&a(t,["responseModalities"],v);const T=l(e,["responseSchema"]);T!=null&&a(t,["responseSchema"],T);const U=l(e,["routingConfig"]);U!=null&&a(t,["routingConfig"],U);const y=l(e,["seed"]);y!=null&&a(t,["seed"],y);const x=l(e,["speechConfig"]);x!=null&&a(t,["speechConfig"],Bg(x));const _=l(e,["stopSequences"]);_!=null&&a(t,["stopSequences"],_);const E=l(e,["temperature"]);E!=null&&a(t,["temperature"],E);const k=l(e,["thinkingConfig"]);k!=null&&a(t,["thinkingConfig"],k);const N=l(e,["topK"]);N!=null&&a(t,["topK"],N);const R=l(e,["topP"]);if(R!=null&&a(t,["topP"],R),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function bN(e,t){const n={},r=l(t,["model"]);return r!=null&&a(n,["_url","name"],ye(e,r)),n}function GN(e,t){const n={},r=l(t,["model"]);return r!=null&&a(n,["_url","name"],ye(e,r)),n}function zN(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function HN(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],n),t}function BN(e){const t={},n=l(e,["aspectRatio"]);n!=null&&a(t,["aspectRatio"],n);const r=l(e,["imageSize"]);if(r!=null&&a(t,["imageSize"],r),l(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function qN(e){const t={},n=l(e,["aspectRatio"]);n!=null&&a(t,["aspectRatio"],n);const r=l(e,["imageSize"]);r!=null&&a(t,["imageSize"],r);const o=l(e,["outputMimeType"]);o!=null&&a(t,["imageOutputOptions","mimeType"],o);const i=l(e,["outputCompressionQuality"]);return i!=null&&a(t,["imageOutputOptions","compressionQuality"],i),t}function $N(e){const t={},n=l(e,["bytesBase64Encoded"]);n!=null&&a(t,["imageBytes"],lr(n));const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Gg(e){const t={},n=l(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&a(t,["imageBytes"],lr(r));const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function kl(e){const t={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(e,["imageBytes"]);n!=null&&a(t,["bytesBase64Encoded"],lr(n));const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function rn(e){const t={},n=l(e,["gcsUri"]);n!=null&&a(t,["gcsUri"],n);const r=l(e,["imageBytes"]);r!=null&&a(t,["bytesBase64Encoded"],lr(r));const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function ON(e,t,n){const r={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const i=l(t,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(t,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Rg(e,u)),r}function JN(e,t,n){const r={},o=l(t,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const i=l(t,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(t,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(t,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],Rg(e,u)),r}function YN(e,t){const n={},r=l(t,["config"]);return r!=null&&ON(e,r,n),n}function WN(e,t){const n={},r=l(t,["config"]);return r!=null&&JN(e,r,n),n}function KN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&a(t,["nextPageToken"],r);const o=l(e,["_self"]);if(o!=null){let i=Mg(o);Array.isArray(i)&&(i=i.map(s=>yu(s))),a(t,["models"],i)}return t}function XN(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&a(t,["nextPageToken"],r);const o=l(e,["_self"]);if(o!=null){let i=Mg(o);Array.isArray(i)&&(i=i.map(s=>vu(s))),a(t,["models"],i)}return t}function QN(e){const t={},n=l(e,["maskMode"]);n!=null&&a(t,["maskMode"],n);const r=l(e,["segmentationClasses"]);r!=null&&a(t,["maskClasses"],r);const o=l(e,["maskDilation"]);return o!=null&&a(t,["dilation"],o),t}function yu(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["displayName"]);r!=null&&a(t,["displayName"],r);const o=l(e,["description"]);o!=null&&a(t,["description"],o);const i=l(e,["version"]);i!=null&&a(t,["version"],i);const s=l(e,["_self"]);s!=null&&a(t,["tunedModelInfo"],p1(s));const u=l(e,["inputTokenLimit"]);u!=null&&a(t,["inputTokenLimit"],u);const d=l(e,["outputTokenLimit"]);d!=null&&a(t,["outputTokenLimit"],d);const c=l(e,["supportedGenerationMethods"]);c!=null&&a(t,["supportedActions"],c);const f=l(e,["temperature"]);f!=null&&a(t,["temperature"],f);const p=l(e,["maxTemperature"]);p!=null&&a(t,["maxTemperature"],p);const h=l(e,["topP"]);h!=null&&a(t,["topP"],h);const g=l(e,["topK"]);g!=null&&a(t,["topK"],g);const v=l(e,["thinking"]);return v!=null&&a(t,["thinking"],v),t}function vu(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["displayName"]);r!=null&&a(t,["displayName"],r);const o=l(e,["description"]);o!=null&&a(t,["description"],o);const i=l(e,["versionId"]);i!=null&&a(t,["version"],i);const s=l(e,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>cN(h))),a(t,["endpoints"],p)}const u=l(e,["labels"]);u!=null&&a(t,["labels"],u);const d=l(e,["_self"]);d!=null&&a(t,["tunedModelInfo"],h1(d));const c=l(e,["defaultCheckpointId"]);c!=null&&a(t,["defaultCheckpointId"],c);const f=l(e,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),a(t,["checkpoints"],p)}return t}function ZN(e){const t={},n=l(e,["mediaResolution"]);n!=null&&a(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);const i=l(e,["fileData"]);i!=null&&a(t,["fileData"],dN(i));const s=l(e,["functionCall"]);s!=null&&a(t,["functionCall"],fN(s));const u=l(e,["functionResponse"]);u!=null&&a(t,["functionResponse"],u);const d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],Vw(d));const c=l(e,["text"]);c!=null&&a(t,["text"],c);const f=l(e,["thought"]);f!=null&&a(t,["thought"],f);const p=l(e,["thoughtSignature"]);p!=null&&a(t,["thoughtSignature"],p);const h=l(e,["videoMetadata"]);return h!=null&&a(t,["videoMetadata"],h),t}function jN(e){const t={},n=l(e,["productImage"]);return n!=null&&a(t,["image"],rn(n)),t}function e1(e,t){const n={},r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);const o=l(e,["baseSteps"]);t!==void 0&&o!=null&&a(t,["parameters","baseSteps"],o);const i=l(e,["outputGcsUri"]);t!==void 0&&i!=null&&a(t,["parameters","storageUri"],i);const s=l(e,["seed"]);t!==void 0&&s!=null&&a(t,["parameters","seed"],s);const u=l(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);const d=l(e,["personGeneration"]);t!==void 0&&d!=null&&a(t,["parameters","personGeneration"],d);const c=l(e,["addWatermark"]);t!==void 0&&c!=null&&a(t,["parameters","addWatermark"],c);const f=l(e,["outputMimeType"]);t!==void 0&&f!=null&&a(t,["parameters","outputOptions","mimeType"],f);const p=l(e,["outputCompressionQuality"]);t!==void 0&&p!=null&&a(t,["parameters","outputOptions","compressionQuality"],p);const h=l(e,["enhancePrompt"]);t!==void 0&&h!=null&&a(t,["parameters","enhancePrompt"],h);const g=l(e,["labels"]);return t!==void 0&&g!=null&&a(t,["labels"],g),n}function t1(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["source"]);o!=null&&r1(o,n);const i=l(t,["config"]);return i!=null&&e1(i,n),n}function n1(e){const t={},n=l(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Al(o))),a(t,["generatedImages"],r)}return t}function r1(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&a(t,["instances[0]","prompt"],r);const o=l(e,["personImage"]);t!==void 0&&o!=null&&a(t,["instances[0]","personImage","image"],rn(o));const i=l(e,["productImages"]);if(t!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>jN(u))),a(t,["instances[0]","productImages"],s)}return n}function o1(e){const t={},n=l(e,["referenceImage"]);n!=null&&a(t,["referenceImage"],rn(n));const r=l(e,["referenceId"]);r!=null&&a(t,["referenceId"],r);const o=l(e,["referenceType"]);o!=null&&a(t,["referenceType"],o);const i=l(e,["maskImageConfig"]);i!=null&&a(t,["maskImageConfig"],QN(i));const s=l(e,["controlImageConfig"]);s!=null&&a(t,["controlImageConfig"],$w(s));const u=l(e,["styleImageConfig"]);u!=null&&a(t,["styleImageConfig"],u);const d=l(e,["subjectImageConfig"]);return d!=null&&a(t,["subjectImageConfig"],d),t}function zg(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const r=l(e,["safetyAttributes","scores"]);r!=null&&a(t,["scores"],r);const o=l(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function Hg(e){const t={},n=l(e,["safetyAttributes","categories"]);n!=null&&a(t,["categories"],n);const r=l(e,["safetyAttributes","scores"]);r!=null&&a(t,["scores"],r);const o=l(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function i1(e){const t={},n=l(e,["category"]);if(n!=null&&a(t,["category"],n),l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(e,["threshold"]);return r!=null&&a(t,["threshold"],r),t}function s1(e){const t={},n=l(e,["image"]);return n!=null&&a(t,["image"],rn(n)),t}function l1(e,t){const n={},r=l(e,["mode"]);t!==void 0&&r!=null&&a(t,["parameters","mode"],r);const o=l(e,["maxPredictions"]);t!==void 0&&o!=null&&a(t,["parameters","maxPredictions"],o);const i=l(e,["confidenceThreshold"]);t!==void 0&&i!=null&&a(t,["parameters","confidenceThreshold"],i);const s=l(e,["maskDilation"]);t!==void 0&&s!=null&&a(t,["parameters","maskDilation"],s);const u=l(e,["binaryColorThreshold"]);t!==void 0&&u!=null&&a(t,["parameters","binaryColorThreshold"],u);const d=l(e,["labels"]);return t!==void 0&&d!=null&&a(t,["labels"],d),n}function a1(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["source"]);o!=null&&c1(o,n);const i=l(t,["config"]);return i!=null&&l1(i,n),n}function u1(e){const t={},n=l(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>LN(o))),a(t,["generatedMasks"],r)}return t}function c1(e,t){const n={},r=l(e,["prompt"]);t!==void 0&&r!=null&&a(t,["instances[0]","prompt"],r);const o=l(e,["image"]);t!==void 0&&o!=null&&a(t,["instances[0]","image"],rn(o));const i=l(e,["scribbleImage"]);return t!==void 0&&i!=null&&a(t,["instances[0]","scribble"],s1(i)),n}function Bg(e){const t={},n=l(e,["languageCode"]);n!=null&&a(t,["languageCode"],n);const r=l(e,["voiceConfig"]);if(r!=null&&a(t,["voiceConfig"],r),l(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function d1(e){const t={},n=l(e,["functionCallingConfig"]);n!=null&&a(t,["functionCallingConfig"],pN(n));const r=l(e,["retrievalConfig"]);return r!=null&&a(t,["retrievalConfig"],r),t}function f1(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(t,["functionDeclarations"],f)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&a(t,["computerUse"],o);const i=l(e,["fileSearch"]);i!=null&&a(t,["fileSearch"],i);const s=l(e,["codeExecution"]);if(s!=null&&a(t,["codeExecution"],s),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],zN(u));const d=l(e,["googleSearch"]);d!=null&&a(t,["googleSearch"],HN(d));const c=l(e,["urlContext"]);return c!=null&&a(t,["urlContext"],c),t}function qg(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>hN(h))),a(t,["functionDeclarations"],p)}const r=l(e,["retrieval"]);r!=null&&a(t,["retrieval"],r);const o=l(e,["googleSearchRetrieval"]);o!=null&&a(t,["googleSearchRetrieval"],o);const i=l(e,["computerUse"]);if(i!=null&&a(t,["computerUse"],i),l(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(e,["codeExecution"]);s!=null&&a(t,["codeExecution"],s);const u=l(e,["enterpriseWebSearch"]);u!=null&&a(t,["enterpriseWebSearch"],u);const d=l(e,["googleMaps"]);d!=null&&a(t,["googleMaps"],d);const c=l(e,["googleSearch"]);c!=null&&a(t,["googleSearch"],c);const f=l(e,["urlContext"]);return f!=null&&a(t,["urlContext"],f),t}function p1(e){const t={},n=l(e,["baseModel"]);n!=null&&a(t,["baseModel"],n);const r=l(e,["createTime"]);r!=null&&a(t,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function h1(e){const t={},n=l(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(t,["baseModel"],n);const r=l(e,["createTime"]);r!=null&&a(t,["createTime"],r);const o=l(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function m1(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const o=l(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const i=l(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&a(t,["defaultCheckpointId"],i),n}function g1(e,t){const n={},r=l(e,["displayName"]);t!==void 0&&r!=null&&a(t,["displayName"],r);const o=l(e,["description"]);t!==void 0&&o!=null&&a(t,["description"],o);const i=l(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&a(t,["defaultCheckpointId"],i),n}function y1(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","name"],ye(e,r));const o=l(t,["config"]);return o!=null&&m1(o,n),n}function v1(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["config"]);return o!=null&&g1(o,n),n}function x1(e,t){const n={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);const o=l(e,["safetyFilterLevel"]);t!==void 0&&o!=null&&a(t,["parameters","safetySetting"],o);const i=l(e,["personGeneration"]);t!==void 0&&i!=null&&a(t,["parameters","personGeneration"],i);const s=l(e,["includeRaiReason"]);t!==void 0&&s!=null&&a(t,["parameters","includeRaiReason"],s);const u=l(e,["outputMimeType"]);t!==void 0&&u!=null&&a(t,["parameters","outputOptions","mimeType"],u);const d=l(e,["outputCompressionQuality"]);t!==void 0&&d!=null&&a(t,["parameters","outputOptions","compressionQuality"],d);const c=l(e,["enhanceInputImage"]);t!==void 0&&c!=null&&a(t,["parameters","upscaleConfig","enhanceInputImage"],c);const f=l(e,["imagePreservationFactor"]);t!==void 0&&f!=null&&a(t,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=l(e,["labels"]);t!==void 0&&p!=null&&a(t,["labels"],p);const h=l(e,["numberOfImages"]);t!==void 0&&h!=null&&a(t,["parameters","sampleCount"],h);const g=l(e,["mode"]);return t!==void 0&&g!=null&&a(t,["parameters","mode"],g),n}function _1(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["_url","model"],ye(e,r));const o=l(t,["image"]);o!=null&&a(n,["instances[0]","image"],rn(o));const i=l(t,["upscaleFactor"]);i!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=l(t,["config"]);return s!=null&&x1(s,n),n}function C1(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Al(i))),a(t,["generatedImages"],o)}return t}function S1(e){const t={},n=l(e,["uri"]);n!=null&&a(t,["uri"],n);const r=l(e,["encodedVideo"]);r!=null&&a(t,["videoBytes"],lr(r));const o=l(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function E1(e){const t={},n=l(e,["gcsUri"]);n!=null&&a(t,["uri"],n);const r=l(e,["bytesBase64Encoded"]);r!=null&&a(t,["videoBytes"],lr(r));const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function T1(e){const t={},n=l(e,["image"]);n!=null&&a(t,["_self"],rn(n));const r=l(e,["maskMode"]);return r!=null&&a(t,["maskMode"],r),t}function w1(e){const t={},n=l(e,["image"]);n!=null&&a(t,["image"],kl(n));const r=l(e,["referenceType"]);return r!=null&&a(t,["referenceType"],r),t}function N1(e){const t={},n=l(e,["image"]);n!=null&&a(t,["image"],rn(n));const r=l(e,["referenceType"]);return r!=null&&a(t,["referenceType"],r),t}function $g(e){const t={},n=l(e,["uri"]);n!=null&&a(t,["uri"],n);const r=l(e,["videoBytes"]);r!=null&&a(t,["encodedVideo"],lr(r));const o=l(e,["mimeType"]);return o!=null&&a(t,["encoding"],o),t}function Og(e){const t={},n=l(e,["uri"]);n!=null&&a(t,["gcsUri"],n);const r=l(e,["videoBytes"]);r!=null&&a(t,["bytesBase64Encoded"],lr(r));const o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I1="Content-Type",A1="X-Server-Timeout",k1="User-Agent",xu="x-goog-api-client",P1="1.30.0",R1=`google-genai-sdk/${P1}`,M1="v1beta1",D1="v1beta",kp=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class L1{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:M1,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:D1,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[s,u]of Object.entries(t.queryParams))o.searchParams.append(s,String(u));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),t.abortSignal),this.unaryApiCall(o,i,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[o,i]of Object.entries(n))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),o=this.constructUrl(t.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),t.abortSignal),this.streamApiCall(o,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,o){if(n&&n.timeout||o){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>i.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),t.signal=s}return n&&n.extraBody!==null&&U1(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Pp(o),new hu(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Pp(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){var n;return io(this,arguments,function*(){const o=(n=t==null?void 0:t.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:d}=yield Ie(o.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=i.decode(d,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),g=h.status,v=h.code,T=`got status: ${g}. ${JSON.stringify(p)}`;if(v>=400&&v<600)throw new Nl({message:T,status:v})}}catch(p){if(p.name==="ApiError")throw p}s+=c;let f=s.match(kp);for(;f;){const p=f[1];try{const h=new Response(p,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Ie(new hu(h)),s=s.slice(f[0].length),f=s.match(kp)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=R1+" "+this.clientOptions.userAgentExtra;return t[k1]=n,t[xu]=n,t[I1]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[o,i]of Object.entries(t.headers))r.append(o,i);t.timeout&&t.timeout>0&&r.append(A1,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,s=await i.stat(t);o.sizeBytes=String(s.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const d={file:o},c=this.getFileName(t),f=Y("upload/v1beta/files",d._url),p=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,c,d,n==null?void 0:n.httpOptions);return i.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,r){var o;const i=this.clientOptions.uploader,s=await i.stat(n),u=String(s.size),d=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:s.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${t}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r!=null&&r.customMetadata&&(p.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(p.chunkingConfig=r.chunkingConfig);const h=await this.fetchUploadUrl(c,u,d,f,p,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,o,i,s){var u;let d={};s?d=s:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const c=await this.request({path:t,body:JSON.stringify(i),httpMethod:"POST",httpOptions:d});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=c==null?void 0:c.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Pp(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new Nl({message:o,status:n}):new Error(o)}}function U1(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const i=JSON.parse(e.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,s){const u=Object.assign({},i);for(const d in s)if(Object.prototype.hasOwnProperty.call(s,d)){const c=s[d],f=u[d];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?u[d]=r(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),u[d]=c)}return u}const o=r(n,t);e.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F1="mcp_used/unknown";let V1=!1;function Jg(e){for(const t of e)if(b1(t)||typeof t=="object"&&"inputSchema"in t)return!0;return V1}function Yg(e){var t;const n=(t=e[xu])!==null&&t!==void 0?t:"";e[xu]=(n+` ${F1}`).trimStart()}function b1(e){return e!==null&&typeof e=="object"&&e instanceof Mc}function G1(e,t=100){return io(this,arguments,function*(){let r,o=0;for(;o<t;){const i=yield Ie(e.listTools({cursor:r}));for(const s of i.tools)yield yield Ie(s),o++;if(!i.nextCursor)break;r=i.nextCursor}})}class Mc{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new Mc(t,n)}async initialize(){var t,n,r,o;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var u=!0,d=(n=void 0,ri(G1(f))),c;c=await d.next(),t=c.done,!t;u=!0){o=c.value,u=!1;const p=o;s.push(p);const h=p.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(p){n={error:p}}finally{try{!u&&!t&&(r=d.return)&&await r.call(d)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),RE(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await o.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function z1(e,t,n){const r=new EE;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),t(r)}class H1{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=$1(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),d=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let c=()=>{};const f=new Promise(_=>{c=_}),p=t.callbacks,h=function(){c({})},g=this.apiClient,v={onopen:h,onmessage:_=>{z1(g,p.onmessage,_)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(_){}},T=this.webSocketFactory.create(d,q1(s),v);T.connect(),await f;const x={setup:{model:ye(this.apiClient,t.model)}};return T.send(JSON.stringify(x)),new B1(T,this.apiClient)}}class B1{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Aw(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=Iw(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Kr.PLAY)}pause(){this.sendPlaybackControl(Kr.PAUSE)}stop(){this.sendPlaybackControl(Kr.STOP)}resetContext(){this.sendPlaybackControl(Kr.RESET_CONTEXT)}close(){this.conn.close()}}function q1(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function $1(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function J1(e,t,n){const r=new SE;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const i=JSON.parse(o);if(e.isVertexAI()){const s=Rw(i);Object.assign(r,s)}else Object.assign(r,i);t(r)}class Y1{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new H1(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,o,i,s,u;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const d=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();t.config&&t.config.tools&&Jg(t.config.tools)&&Yg(p);const h=Q1(p);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const J=this.apiClient.getApiKey();let B="BidiGenerateContent",se="key";J!=null&&J.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),B="BidiGenerateContentConstrained",se="access_token"),f=`${d}/ws/google.ai.generativelanguage.${c}.GenerativeService.${B}?${se}=${J}`}let g=()=>{};const v=new Promise(J=>{g=J}),T=t.callbacks,U=function(){var J;(J=T==null?void 0:T.onopen)===null||J===void 0||J.call(T),g({})},y=this.apiClient,x={onopen:U,onmessage:J=>{J1(y,T.onmessage,J)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(J){},onclose:(r=T==null?void 0:T.onclose)!==null&&r!==void 0?r:function(J){}},_=this.webSocketFactory.create(f,X1(h),x);_.connect(),await v;let E=ye(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const J=this.apiClient.getProject(),B=this.apiClient.getLocation();E=`projects/${J}/locations/${B}/`+E}let k={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[nl.AUDIO]}:t.config.responseModalities=[nl.AUDIO]),!((i=t.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(u=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],R=[];for(const J of N)if(this.isCallableTool(J)){const B=J;R.push(await B.tool())}else R.push(J);R.length>0&&(t.config.tools=R);const z={model:E,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?k=Nw(this.apiClient,z):k=ww(this.apiClient,z),delete k.config,_.send(JSON.stringify(k)),new K1(_,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const W1={turnComplete:!0};class K1{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=zt(n.turns),t.isVertexAI()||(r=r.map(o=>Il(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error(O1)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},W1),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Pw(t)}:n={realtimeInput:kw(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function X1(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function Q1(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rp=10;function Mp(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(const s of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(so(s)){o=!0;break}if(!o)return!0;const i=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function so(e){return"callTool"in e&&typeof e.callTool=="function"}function Z1(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>so(o)))!==null&&r!==void 0?r:!1}function Dp(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,o)=>{if(so(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(o)}),n}function Lp(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j1 extends Dn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,o,i,s,u;const d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Z1(n)||Mp(n.config))return await this.generateContentInternal(d);const c=Dp(n);if(c.length>0){const T=c.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let f,p;const h=zt(d.contents),g=(i=(o=(r=d.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Rp;let v=0;for(;v<g&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){const T=f.candidates[0].content,U=[];for(const y of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(so(y)){const _=await y.callTool(f.functionCalls);U.push(..._)}v++,p={role:"user",parts:U},d.contents=zt(d.contents),d.contents.push(T),d.contents.push(p),Lp(d.config)&&(h.push(T),h.push(p))}return Lp(d.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var r,o,i,s,u;if(this.maybeMoveToResponseJsonSchem(n),Mp(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const d=Dp(n);if(d.length>0){const p=d.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(i=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(u=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let i;const s=[];if(r!=null&&r.generatedImages)for(const d of r.generatedImages)d&&(d!=null&&d.safetyAttributes)&&((o=d==null?void 0:d.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=d==null?void 0:d.safetyAttributes:s.push(d);let u;return i?u={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Pr(Rn.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,i,s,u,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((d=(u=n.source)===null||u===void 0?void 0:u.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,o;const i=(n=t.config)===null||n===void 0?void 0:n.tools;if(!i)return t;const s=await Promise.all(i.map(async d=>so(d)?await d.tool():d)),u={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(u.config.tools=s,t.config&&t.config.tools&&Jg(t.config.tools)){const d=(o=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},d);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),Yg(c),u.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(t){var n,r,o;const i=new Map;for(const s of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(so(s)){const u=s,d=await u.tool();for(const c of(o=d.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,u)}}return i}async processAfcStream(t){var n,r,o;const i=(o=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Rp;let s=!1,u=0;const d=await this.initAfcToolsMap(t);return function(c,f,p){var h,g;return io(this,arguments,function*(){for(var v,T,U,y;u<i;){s&&(u++,s=!1);const k=yield Ie(c.processParamsMaybeAddMcpUsage(p)),N=yield Ie(c.generateContentStreamInternal(k)),R=[],z=[];try{for(var x=!0,_=(T=void 0,ri(N)),E;E=yield Ie(_.next()),v=E.done,!v;x=!0){y=E.value,x=!1;const J=y;if(yield yield Ie(J),J.candidates&&(!((h=J.candidates[0])===null||h===void 0)&&h.content)){z.push(J.candidates[0].content);for(const B of(g=J.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<i&&B.functionCall){if(!B.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(B.functionCall.name)){const se=yield Ie(f.get(B.functionCall.name).callTool([B.functionCall]));R.push(...se)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${B.functionCall.name}`)}}}}catch(J){T={error:J}}finally{try{!x&&!v&&(U=_.return)&&(yield Ie(U.call(_)))}finally{if(T)throw T.error}}if(R.length>0){s=!0;const J=new Go;J.candidates=[{content:{role:"user",parts:R}}],yield yield Ie(J);const B=[];B.push(...z),B.push({role:"user",parts:R});const se=zt(p.contents).concat(B);p.contents=se}else break}})}(this,d,t)}async generateContentInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Np(this.apiClient,t);return u=Y("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Ap(f),h=new Go;return Object.assign(h,p),h})}else{const c=wp(this.apiClient,t);return u=Y("{model}:generateContent",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Ip(f),h=new Go;return Object.assign(h,p),h})}}async generateContentStreamInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Np(this.apiClient,t);return u=Y("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return io(this,arguments,function*(){var h,g,v,T;try{for(var U=!0,y=ri(p),x;x=yield Ie(y.next()),h=x.done,!h;U=!0){T=x.value,U=!1;const _=T,E=Ap(yield Ie(_.json()));E.sdkHttpResponse={headers:_.headers};const k=new Go;Object.assign(k,E),yield yield Ie(k)}}catch(_){g={error:_}}finally{try{!U&&!h&&(v=y.return)&&(yield Ie(v.call(y)))}finally{if(g)throw g.error}}})})}else{const c=wp(this.apiClient,t);return u=Y("{model}:streamGenerateContent?alt=sse",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return io(this,arguments,function*(){var h,g,v,T;try{for(var U=!0,y=ri(p),x;x=yield Ie(y.next()),h=x.done,!h;U=!0){T=x.value,U=!1;const _=T,E=Ip(yield Ie(_.json()));E.sdkHttpResponse={headers:_.headers};const k=new Go;Object.assign(k,E),yield yield Ie(k)}}catch(_){g={error:_}}finally{try{!U&&!h&&(v=y.return)&&(yield Ie(v.call(y)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=lN(this.apiClient,t);return u=Y("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=uN(f),h=new up;return Object.assign(h,p),h})}else{const c=sN(this.apiClient,t);return u=Y("{model}:batchEmbedContents",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=aN(f),h=new up;return Object.assign(h,p),h})}}async generateImagesInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=_N(this.apiClient,t);return u=Y("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=SN(f),h=new cp;return Object.assign(h,p),h})}else{const c=xN(this.apiClient,t);return u=Y("{model}:predict",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=CN(f),h=new cp;return Object.assign(h,p),h})}}async editImageInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const u=nN(this.apiClient,t);return i=Y("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),o.then(d=>{const c=rN(d),f=new dE;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const u=_1(this.apiClient,t);return i=Y("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),o.then(d=>{const c=C1(d),f=new fE;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const u=t1(this.apiClient,t);return i=Y("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const c=n1(d),f=new pE;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const u=a1(this.apiClient,t);return i=Y("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const c=u1(d),f=new hE;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=GN(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>vu(f))}else{const c=bN(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>yu(f))}}async listInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=WN(this.apiClient,t);return u=Y("{models_url}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=XN(f),h=new dp;return Object.assign(h,p),h})}else{const c=YN(this.apiClient,t);return u=Y("{models_url}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=KN(f),h=new dp;return Object.assign(h,p),h})}}async update(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=v1(this.apiClient,t);return u=Y("{model}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>vu(f))}else{const c=y1(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>yu(f))}}async delete(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Zw(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=eN(f),h=new fp;return Object.assign(h,p),h})}else{const c=Qw(this.apiClient,t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=jw(f),h=new fp;return Object.assign(h,p),h})}}async countTokens(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=Ww(this.apiClient,t);return u=Y("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Xw(f),h=new pp;return Object.assign(h,p),h})}else{const c=Yw(this.apiClient,t);return u=Y("{model}:countTokens",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Kw(f),h=new pp;return Object.assign(h,p),h})}}async computeTokens(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const u=zw(this.apiClient,t);return i=Y("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),o.then(d=>{const c=Hw(d),f=new mE;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=AN(this.apiClient,t);return u=Y("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=NN(f),h=new rl;return Object.assign(h,p),h})}else{const c=IN(this.apiClient,t);return u=Y("{model}:predictLongRunning",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const p=wN(f),h=new rl;return Object.assign(h,p),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eI extends Dn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=iE(t);return u=Y("{operationName}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const c=oE(t);return u=Y("{operationName}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const u=QS(t);return i=Y("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tI(e){const t={},n=l(e,["data"]);if(n!=null&&a(t,["data"],n),l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function nI(e){const t={},n=l(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>dI(i))),a(t,["parts"],o)}const r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function rI(e,t,n){const r={},o=l(t,["expireTime"]);n!==void 0&&o!=null&&a(n,["expireTime"],o);const i=l(t,["newSessionExpireTime"]);n!==void 0&&i!=null&&a(n,["newSessionExpireTime"],i);const s=l(t,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(t,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],cI(e,u));const d=l(t,["lockAdditionalFields"]);return n!==void 0&&d!=null&&a(n,["fieldMask"],d),r}function oI(e,t){const n={},r=l(t,["config"]);return r!=null&&a(n,["config"],rI(e,r,n)),n}function iI(e){const t={};if(l(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(e,["fileUri"]);n!=null&&a(t,["fileUri"],n);const r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function sI(e){const t={},n=l(e,["id"]);n!=null&&a(t,["id"],n);const r=l(e,["args"]);r!=null&&a(t,["args"],r);const o=l(e,["name"]);if(o!=null&&a(t,["name"],o),l(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function lI(e){const t={};if(l(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(e,["enableWidget"]);return n!=null&&a(t,["enableWidget"],n),t}function aI(e){const t={};if(l(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(e,["timeRangeFilter"]);return n!=null&&a(t,["timeRangeFilter"],n),t}function uI(e,t){const n={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig"],r);const o=l(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);const i=l(e,["temperature"]);t!==void 0&&i!=null&&a(t,["setup","generationConfig","temperature"],i);const s=l(e,["topP"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","topP"],s);const u=l(e,["topK"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topK"],u);const d=l(e,["maxOutputTokens"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","maxOutputTokens"],d);const c=l(e,["mediaResolution"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","mediaResolution"],c);const f=l(e,["seed"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","seed"],f);const p=l(e,["speechConfig"]);t!==void 0&&p!=null&&a(t,["setup","generationConfig","speechConfig"],Rc(p));const h=l(e,["thinkingConfig"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","thinkingConfig"],h);const g=l(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&a(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=l(e,["systemInstruction"]);t!==void 0&&v!=null&&a(t,["setup","systemInstruction"],nI(rt(v)));const T=l(e,["tools"]);if(t!==void 0&&T!=null){let N=Co(T);Array.isArray(N)&&(N=N.map(R=>pI(_o(R)))),a(t,["setup","tools"],N)}const U=l(e,["sessionResumption"]);t!==void 0&&U!=null&&a(t,["setup","sessionResumption"],fI(U));const y=l(e,["inputAudioTranscription"]);t!==void 0&&y!=null&&a(t,["setup","inputAudioTranscription"],y);const x=l(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],x);const _=l(e,["realtimeInputConfig"]);t!==void 0&&_!=null&&a(t,["setup","realtimeInputConfig"],_);const E=l(e,["contextWindowCompression"]);t!==void 0&&E!=null&&a(t,["setup","contextWindowCompression"],E);const k=l(e,["proactivity"]);return t!==void 0&&k!=null&&a(t,["setup","proactivity"],k),n}function cI(e,t){const n={},r=l(t,["model"]);r!=null&&a(n,["setup","model"],ye(e,r));const o=l(t,["config"]);return o!=null&&a(n,["config"],uI(o,n)),n}function dI(e){const t={},n=l(e,["mediaResolution"]);n!=null&&a(t,["mediaResolution"],n);const r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);const o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);const i=l(e,["fileData"]);i!=null&&a(t,["fileData"],iI(i));const s=l(e,["functionCall"]);s!=null&&a(t,["functionCall"],sI(s));const u=l(e,["functionResponse"]);u!=null&&a(t,["functionResponse"],u);const d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],tI(d));const c=l(e,["text"]);c!=null&&a(t,["text"],c);const f=l(e,["thought"]);f!=null&&a(t,["thought"],f);const p=l(e,["thoughtSignature"]);p!=null&&a(t,["thoughtSignature"],p);const h=l(e,["videoMetadata"]);return h!=null&&a(t,["videoMetadata"],h),t}function fI(e){const t={},n=l(e,["handle"]);if(n!=null&&a(t,["handle"],n),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function pI(e){const t={},n=l(e,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),a(t,["functionDeclarations"],f)}if(l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(e,["googleSearchRetrieval"]);r!=null&&a(t,["googleSearchRetrieval"],r);const o=l(e,["computerUse"]);o!=null&&a(t,["computerUse"],o);const i=l(e,["fileSearch"]);i!=null&&a(t,["fileSearch"],i);const s=l(e,["codeExecution"]);if(s!=null&&a(t,["codeExecution"],s),l(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=l(e,["googleMaps"]);u!=null&&a(t,["googleMaps"],lI(u));const d=l(e,["googleSearch"]);d!=null&&a(t,["googleSearch"],aI(d));const c=l(e,["urlContext"]);return c!=null&&a(t,["urlContext"],c),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hI(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(i=>`${n}.${i}`);t.push(...o)}else t.push(n)}return t.join(",")}function mI(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(e.bidiGenerateContentSetup=i,n=i):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const i=hI(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(c=>s.includes(c)?`generationConfig.${c}`:c));const d=[];i&&d.push(i),u.length>0&&d.push(...u),d.length>0?e.fieldMask=d.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class gI extends Dn{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=oI(this.apiClient,t);i=Y("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const d=mI(u,t.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yI(e,t){const n={},r=l(e,["displayName"]);return t!==void 0&&r!=null&&a(t,["displayName"],r),n}function vI(e){const t={},n=l(e,["config"]);return n!=null&&yI(n,t),t}function xI(e,t){const n={},r=l(e,["force"]);return t!==void 0&&r!=null&&a(t,["_query","force"],r),n}function _I(e){const t={},n=l(e,["name"]);n!=null&&a(t,["_url","name"],n);const r=l(e,["config"]);return r!=null&&xI(r,t),t}function CI(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function SI(e,t){const n={},r=l(e,["customMetadata"]);if(t!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["customMetadata"],i)}const o=l(e,["chunkingConfig"]);return t!==void 0&&o!=null&&a(t,["chunkingConfig"],o),n}function EI(e){const t={},n=l(e,["name"]);n!=null&&a(t,["name"],n);const r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);const o=l(e,["done"]);o!=null&&a(t,["done"],o);const i=l(e,["error"]);i!=null&&a(t,["error"],i);const s=l(e,["response"]);return s!=null&&a(t,["response"],wI(s)),t}function TI(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&a(t,["_url","file_search_store_name"],n);const r=l(e,["fileName"]);r!=null&&a(t,["fileName"],r);const o=l(e,["config"]);return o!=null&&SI(o,t),t}function wI(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["parent"]);r!=null&&a(t,["parent"],r);const o=l(e,["documentName"]);return o!=null&&a(t,["documentName"],o),t}function NI(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function II(e){const t={},n=l(e,["config"]);return n!=null&&NI(n,t),t}function AI(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&a(t,["nextPageToken"],r);const o=l(e,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["fileSearchStores"],i)}return t}function kI(e,t){const n={},r=l(e,["mimeType"]);t!==void 0&&r!=null&&a(t,["mimeType"],r);const o=l(e,["displayName"]);t!==void 0&&o!=null&&a(t,["displayName"],o);const i=l(e,["customMetadata"]);if(t!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>d)),a(t,["customMetadata"],u)}const s=l(e,["chunkingConfig"]);return t!==void 0&&s!=null&&a(t,["chunkingConfig"],s),n}function PI(e){const t={},n=l(e,["fileSearchStoreName"]);n!=null&&a(t,["_url","file_search_store_name"],n);const r=l(e,["config"]);return r!=null&&kI(r,t),t}function RI(e){const t={},n=l(e,["sdkHttpResponse"]);return n!=null&&a(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MI(e,t){const n={},r=l(e,["force"]);return t!==void 0&&r!=null&&a(t,["_query","force"],r),n}function DI(e){const t={},n=l(e,["name"]);n!=null&&a(t,["_url","name"],n);const r=l(e,["config"]);return r!=null&&MI(r,t),t}function LI(e){const t={},n=l(e,["name"]);return n!=null&&a(t,["_url","name"],n),t}function UI(e,t){const n={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);const o=l(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),n}function FI(e){const t={},n=l(e,["parent"]);n!=null&&a(t,["_url","parent"],n);const r=l(e,["config"]);return r!=null&&UI(r,t),t}function VI(e){const t={},n=l(e,["sdkHttpResponse"]);n!=null&&a(t,["sdkHttpResponse"],n);const r=l(e,["nextPageToken"]);r!=null&&a(t,["nextPageToken"],r);const o=l(e,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(t,["documents"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bI extends Dn{constructor(t){super(),this.apiClient=t,this.list=async n=>new Pr(Rn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LI(t);return i=Y("{name}",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(t){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=DI(t);o=Y("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=FI(t);return i=Y("{parent}/documents",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const c=VI(d),f=new gE;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GI extends Dn{constructor(t,n=new bI(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new Pr(Rn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vI(t);return i=Y("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async get(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=CI(t);return i=Y("{name}",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}async delete(t){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=_I(t);o=Y("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=II(t);return i=Y("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const c=AI(d),f=new yE;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=PI(t);return i=Y("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const c=RI(d),f=new vE;return Object.assign(f,c),f})}}async importFile(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=TI(t);return i=Y("{file_search_store_name}:importFile",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const c=EI(d),f=new Nc;return Object.assign(f,c),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zI(e,t){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],r),n}function HI(e,t){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],r),n}function BI(e,t,n){const r={};if(l(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&a(t,["displayName"],o),l(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(e,["epochCount"]);t!==void 0&&i!=null&&a(t,["tuningTask","hyperparameters","epochCount"],i);const s=l(e,["learningRateMultiplier"]);if(s!=null&&a(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=l(e,["batchSize"]);t!==void 0&&u!=null&&a(t,["tuningTask","hyperparameters","batchSize"],u);const d=l(e,["learningRate"]);if(t!==void 0&&d!=null&&a(t,["tuningTask","hyperparameters","learningRate"],d),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function qI(e,t,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=l(e,["validationDataset"]);t!==void 0&&g!=null&&a(t,["supervisedTuningSpec"],Up(g))}else if(o==="PREFERENCE_TUNING"){const g=l(e,["validationDataset"]);t!==void 0&&g!=null&&a(t,["preferenceOptimizationSpec"],Up(g))}const i=l(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&a(t,["tunedModelDisplayName"],i);const s=l(e,["description"]);t!==void 0&&s!=null&&a(t,["description"],s);let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=l(e,["epochCount"]);t!==void 0&&g!=null&&a(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(u==="PREFERENCE_TUNING"){const g=l(e,["epochCount"]);t!==void 0&&g!=null&&a(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=l(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&a(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(d==="PREFERENCE_TUNING"){const g=l(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&a(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=l(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&a(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=l(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&a(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=l(e,["adapterSize"]);t!==void 0&&g!=null&&a(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=l(e,["adapterSize"]);t!==void 0&&g!=null&&a(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(l(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=l(e,["labels"]);t!==void 0&&p!=null&&a(t,["labels"],p);const h=l(e,["beta"]);return t!==void 0&&h!=null&&a(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function $I(e,t){const n={},r=l(e,["baseModel"]);r!=null&&a(n,["baseModel"],r);const o=l(e,["preTunedModel"]);o!=null&&a(n,["preTunedModel"],o);const i=l(e,["trainingDataset"]);i!=null&&tA(i);const s=l(e,["config"]);return s!=null&&BI(s,n),n}function OI(e,t){const n={},r=l(e,["baseModel"]);r!=null&&a(n,["baseModel"],r);const o=l(e,["preTunedModel"]);o!=null&&a(n,["preTunedModel"],o);const i=l(e,["trainingDataset"]);i!=null&&nA(i,n,t);const s=l(e,["config"]);return s!=null&&qI(s,n,t),n}function JI(e,t){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],r),n}function YI(e,t){const n={},r=l(e,["name"]);return r!=null&&a(n,["_url","name"],r),n}function WI(e,t,n){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const i=l(e,["pageToken"]);t!==void 0&&i!=null&&a(t,["_query","pageToken"],i);const s=l(e,["filter"]);return t!==void 0&&s!=null&&a(t,["_query","filter"],s),r}function KI(e,t,n){const r={},o=l(e,["pageSize"]);t!==void 0&&o!=null&&a(t,["_query","pageSize"],o);const i=l(e,["pageToken"]);t!==void 0&&i!=null&&a(t,["_query","pageToken"],i);const s=l(e,["filter"]);return t!==void 0&&s!=null&&a(t,["_query","filter"],s),r}function XI(e,t){const n={},r=l(e,["config"]);return r!=null&&WI(r,n),n}function QI(e,t){const n={},r=l(e,["config"]);return r!=null&&KI(r,n),n}function ZI(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const o=l(e,["nextPageToken"]);o!=null&&a(n,["nextPageToken"],o);const i=l(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>Wg(u))),a(n,["tuningJobs"],s)}return n}function jI(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const o=l(e,["nextPageToken"]);o!=null&&a(n,["nextPageToken"],o);const i=l(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>_u(u))),a(n,["tuningJobs"],s)}return n}function eA(e,t){const n={},r=l(e,["name"]);r!=null&&a(n,["model"],r);const o=l(e,["name"]);return o!=null&&a(n,["endpoint"],o),n}function tA(e,t){const n={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(e,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),a(n,["examples","examples"],o)}return n}function nA(e,t,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=l(e,["gcsUri"]);t!==void 0&&s!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=l(e,["gcsUri"]);t!==void 0&&s!=null&&a(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&a(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&a(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(l(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Wg(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&a(n,["name"],o);const i=l(e,["state"]);i!=null&&a(n,["state"],kg(i));const s=l(e,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(e,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const d=l(e,["tuningTask","completeTime"]);d!=null&&a(n,["endTime"],d);const c=l(e,["updateTime"]);c!=null&&a(n,["updateTime"],c);const f=l(e,["description"]);f!=null&&a(n,["description"],f);const p=l(e,["baseModel"]);p!=null&&a(n,["baseModel"],p);const h=l(e,["_self"]);return h!=null&&a(n,["tunedModel"],eA(h)),n}function _u(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&a(n,["name"],o);const i=l(e,["state"]);i!=null&&a(n,["state"],kg(i));const s=l(e,["createTime"]);s!=null&&a(n,["createTime"],s);const u=l(e,["startTime"]);u!=null&&a(n,["startTime"],u);const d=l(e,["endTime"]);d!=null&&a(n,["endTime"],d);const c=l(e,["updateTime"]);c!=null&&a(n,["updateTime"],c);const f=l(e,["error"]);f!=null&&a(n,["error"],f);const p=l(e,["description"]);p!=null&&a(n,["description"],p);const h=l(e,["baseModel"]);h!=null&&a(n,["baseModel"],h);const g=l(e,["tunedModel"]);g!=null&&a(n,["tunedModel"],g);const v=l(e,["preTunedModel"]);v!=null&&a(n,["preTunedModel"],v);const T=l(e,["supervisedTuningSpec"]);T!=null&&a(n,["supervisedTuningSpec"],T);const U=l(e,["preferenceOptimizationSpec"]);U!=null&&a(n,["preferenceOptimizationSpec"],U);const y=l(e,["tuningDataStats"]);y!=null&&a(n,["tuningDataStats"],y);const x=l(e,["encryptionSpec"]);x!=null&&a(n,["encryptionSpec"],x);const _=l(e,["partnerModelTuningSpec"]);_!=null&&a(n,["partnerModelTuningSpec"],_);const E=l(e,["customBaseModel"]);E!=null&&a(n,["customBaseModel"],E);const k=l(e,["experiment"]);k!=null&&a(n,["experiment"],k);const N=l(e,["labels"]);N!=null&&a(n,["labels"],N);const R=l(e,["outputUri"]);R!=null&&a(n,["outputUri"],R);const z=l(e,["pipelineJob"]);z!=null&&a(n,["pipelineJob"],z);const J=l(e,["serviceAccount"]);J!=null&&a(n,["serviceAccount"],J);const B=l(e,["tunedModelDisplayName"]);B!=null&&a(n,["tunedModelDisplayName"],B);const se=l(e,["veoTuningSpec"]);return se!=null&&a(n,["veoTuningSpec"],se),n}function rA(e,t){const n={},r=l(e,["sdkHttpResponse"]);r!=null&&a(n,["sdkHttpResponse"],r);const o=l(e,["name"]);o!=null&&a(n,["name"],o);const i=l(e,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(e,["done"]);s!=null&&a(n,["done"],s);const u=l(e,["error"]);return u!=null&&a(n,["error"],u),n}function Up(e,t){const n={},r=l(e,["gcsUri"]);r!=null&&a(n,["validationDatasetUri"],r);const o=l(e,["vertexDatasetResource"]);return o!=null&&a(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oA extends Dn{constructor(t){super(),this.apiClient=t,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Pr(Rn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),i=await this.tuneMldevInternal(o);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:pu.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=YI(t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>_u(f))}else{const c=JI(t);return u=Y("{name}",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Wg(f))}}async listInternal(t){var n,r,o,i;let s,u="",d={};if(this.apiClient.isVertexAI()){const c=QI(t);return u=Y("tuningJobs",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=jI(f),h=new hp;return Object.assign(h,p),h})}else{const c=XI(t);return u=Y("tunedModels",c._url),d=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=ZI(f),h=new hp;return Object.assign(h,p),h})}}async cancel(t){var n,r,o,i;let s="",u={};if(this.apiClient.isVertexAI()){const d=HI(t);s=Y("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const d=zI(t);s=Y("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const u=OI(t,t);return i=Y("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),o.then(d=>_u(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$I(t);return i=Y("tunedModels",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(c=>{const f=c;return f.sdkHttpResponse={headers:d.headers},f})),o.then(d=>rA(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iA{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const sA=1024*1024*8,lA=3,aA=1e3,uA=2,il="x-goog-upload-status";async function cA(e,t,n){var r;const o=await Kg(e,t,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[il])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function dA(e,t,n){var r;const o=await Kg(e,t,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[il])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Eg(i),u=new Ic;return Object.assign(u,s),u}async function Kg(e,t,n){var r,o;let i=0,s=0,u=new hu(new Response),d="upload";for(i=e.size;s<i;){const c=Math.min(sA,i-s),f=e.slice(s,s+c);s+c>=i&&(d+=", finalize");let p=0,h=aA;for(;p<lA&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[il]));)p++,await pA(h),h=h*uA;if(s+=c,((o=u==null?void 0:u.headers)===null||o===void 0?void 0:o[il])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function fA(e){return{size:e.size,type:e.type}}function pA(e){return new Promise(t=>setTimeout(t,e))}class hA{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await cA(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await dA(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await fA(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mA{create(t,n,r){return new gA(t,n,r)}}class gA{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fp="x-goog-api-key";class yA{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Fp)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Fp,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vA="gl-node/";class xA{constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=KS(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion;const o=new yA(this.apiKey);this.apiClient=new L1({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:vA+"web",uploader:new hA,downloader:new iA}),this.models=new j1(this.apiClient),this.live=new Y1(this.apiClient,o,new mA),this.batches=new TT(this.apiClient),this.chats=new iw(this.models,this.apiClient),this.caches=new nw(this.apiClient),this.files=new mw(this.apiClient),this.operations=new eI(this.apiClient),this.authTokens=new gI(this.apiClient),this.tunings=new oA(this.apiClient),this.fileSearchStores=new GI(this.apiClient)}}var Vp={};const _A="gemini-2.5-flash",CA={type:st.OBJECT,properties:{status:{type:st.STRING,enum:["safe","warning","danger"],description:"Overall safety status of the configuration."},summary:{type:st.STRING,description:"A brief technical summary of the circuit."},issues:{type:st.ARRAY,items:{type:st.STRING},description:"List of potential hazards, incompatibilities, or code violations."},recommendations:{type:st.ARRAY,items:{type:st.STRING},description:"List of suggested improvements or fixes."}},required:["status","summary","issues","recommendations"]},SA=async e=>{if(!Vp.API_KEY)throw new Error("API Key is missing");try{const t=new xA({apiKey:Vp.API_KEY}),n=`
      Analyze the following electrical single-line diagram structure (represented as a list of component trees) for an industrial or commercial setup.
      
      Note: Some fields (Amps, Voltage, Model) may be missing/optional. Infer standard values based on component type if missing, or flag as "Missing Data" if critical for safety.

      Review for:
      1. Amperage cascading logic (if data available).
      2. Voltage compatibility (if data available).
      3. Missing critical components (e.g., transformers without downstream protection).
      4. General best practices for the component types listed.
      
      Circuit Data:
      ${JSON.stringify(e,null,2)}
    `,r=await t.models.generateContent({model:_A,contents:n,config:{responseMimeType:"application/json",responseSchema:CA,systemInstruction:"You are a Senior Electrical Engineer specializing in Single Line Diagrams (SLD) and safety compliance (IEC/NEC standards). Analyze the provided JSON tree structure strictly."}});if(r.text)return JSON.parse(r.text);throw new Error("Empty response from AI")}catch(t){return console.error("Gemini Analysis Error:",t),{status:"warning",summary:"Failed to connect to AI analysis service.",issues:["Could not verify circuit safety due to network or API error."],recommendations:["Check your internet connection and API key settings."]}}},EA={en:{appName:"VoltGraph AI",projects:"Projects",pages:"Pages",addPage:"Add Page",importProject:"Import / Restore",backupAll:"Backup All Projects",backupProject:"Save Project File",restoreSuccess:"Successfully restored projects from backup.",searchPlaceholder:"Search components...",linkComponents:"Link Components",linking:"Linking...",exportLabel:"Export",exportSVG:"Export SVG",toggleOrientation:"Toggle Orientation",toggleTheme:"Toggle Theme",togglePrintMode:"Toggle Print Layout",cleanView:"Clean View (Fullscreen)",exitCleanView:"Exit Clean View",analyze:"Analyze",active:"Active",propertiesActions:"Properties & Actions",quickTips:"Quick Tips",tip1:"Shift+Click to select multiple nodes for bulk editing.",tip2:"Ctrl+C / Ctrl+V to copy and paste subtrees.",tip3:"Del / Backspace to delete selected items.",tip4:"Esc to cancel selection or connection mode.",resetDiagram:"Reset Diagram to Default",saveStatus:{saved:"Saved",saving:"Saving...",unsaved:"Unsaved"},undo:"Undo",redo:"Redo",addFirstNode:"Add Utility Grid (Start)",addStandaloneGen:"Or Add Standalone Generator",addIndependent:"Add Independent Node",addGrid:"Add Grid",addGen:"Add Generator",addTrans:"Add Transformer",defaultDesc:{grid:"Main Supply",gen:"Standby Power",trans:"Step Down/Up",load:"Independent Load"},connectMode:{source:"Select first component (A)...",target:"Select second component (B) to link."},legend:{title:"Component Legend",meter:"Attached Meter"},mode:"Mode",componentTypes:{[W.SYSTEM_ROOT]:"Utility Grid",[W.TRANSFORMER]:"Transformer",[W.METER]:"Meter",[W.DISTRIBUTION_BOARD]:"Distribution Board",[W.BREAKER]:"Breaker",[W.SWITCH]:"Switch",[W.LOAD]:"Load",[W.GENERATOR]:"Generator"},inputPanel:{addConnection:"Add Connection",editComponent:"Edit Component",bulkEdit:"Bulk Edit",itemsSelected:"items selected",newDownstream:"New Downstream Component",editSelected:"Edit Selected Component",parent:"Parent",componentType:"Component Type",name:"Name (Optional)",componentNumber:"Component # (Optional)",model:"Model (Optional)",customColor:"Custom Color",shape:"Shape",uploadIcon:"Upload Custom Icon",removeIcon:"Remove Icon",includesMeter:"Includes Meter Connection",meterNumber:"Meter Number",includesGenerator:"Includes Generator Connection",generatorName:"Generator Name",amperage:"Amperage (A)",voltage:"Voltage (V)",kva:"kVA",description:"Description (Optional)",addToDiagram:"Add to Diagram",saveChanges:"Save Changes",applyBulk:"Apply to All Selected",close:"Close",deleteComponent:"Delete Component",confirmDelete:"Are you sure you want to delete this component and all its children?",downstreamConnections:"Downstream Connections",noConnections:"No outgoing connections.",linkStyle:"Connection Style",strokeColor:"Line Color",lineStyle:"Line Pattern",startMarker:"Start Marker",endMarker:"End Marker",cableSize:"Cable Size (e.g. 4x25mm)",patterns:{solid:"Solid",dashed:"Dashed",dotted:"Dotted"},markers:{none:"None",arrow:"Arrow",circle:"Circle",diamond:"Diamond"},shapes:{rectangle:"Rectangle",circle:"Circle",square:"Square"},groupNode:"Group / Wrap",collapse:"Collapse Children",expand:"Expand Children"},printSettings:{title:"Print Layout Settings",engineer:"Engineer Name",approvedBy:"Approved By",date:"Date",revision:"Revision",organization:"Organization / Company",update:"Update Title Block"},analysis:{title:"AI Circuit Analysis",analyzing:"Analyzing circuit logic with Gemini...",analyzingSub:"Checking amperage coordination, voltage drops, and code compliance.",safe:"Safe Configuration",warning:"Warning Configuration",danger:"Danger Configuration",issues:"Detected Issues",recommendations:"Recommendations",noData:"No analysis data available."},dialogs:{deleteProjectTitle:"Delete Project?",deletePageTitle:"Delete Page?",deleteNodeTitle:"Delete Component?",deletePage:"Are you sure you want to delete this page? This action cannot be undone via history immediately.",deleteProject:"Are you sure you want to delete this entire project?",deleteNode:"Are you sure you want to delete this component and all its connected children?",reset:"Reset everything to default? All unsaved changes will be lost.",detach:"Detach this component? It will be moved to the Utility Grid level.",rootMove:"System Root cannot be moved, only connected TO.",cycle:"Cannot connect a component to its own child (cycle detected).",diagramNotFound:"Diagram not found.",importError:"Failed to import file. Invalid JSON structure.",restoreSuccess:"Projects restored successfully from backup."},export:{title:"Export Options",subtitle:"Choose a format to save or share your diagram.",formats:{svg:"Vector Image (SVG)",png:"Raster Image (PNG)",json:"Project Data (JSON)",excel:"Spreadsheet (CSV)",pdf:"Document (PDF)"},desc:{svg:"Best for high-quality printing and editing in vector software.",png:"Best for sharing on social media, documents, or quick viewing.",json:"Save the raw project data to backup or import later.",excel:"Export component list and data to Excel/CSV.",pdf:"Print diagram to a PDF document."}},csvHeaders:{name:"Name",type:"Type",componentNum:"Component #",model:"Model",amps:"Amps",voltage:"Voltage",kva:"kVA",parent:"Parent",description:"Description",hasMeter:"Has Meter",meterNum:"Meter #",yes:"Yes",no:"No",na:"N/A"},about:{title:"About VoltGraph AI",version:"Version 1.0.0",description:"VoltGraph AI is an intelligent Single-Line Diagram (SLD) generator and analyzer designed for electrical engineers. It helps model electrical systems, visualize connections, and provides AI-powered safety analysis.",developedBy:"Created by",developerName:"Saleh Hamdan"},printLayout:{project:"PROJECT",date:"DATE",engineer:"ENGINEER",rev:"REV",approved:"APPROVED",org:"ORGANIZATION"}},he:{appName:"VoltGraph AI",projects:"",pages:"",addPage:" ",importProject:" / ",backupAll:"   ",backupProject:"  ",restoreSuccess:"   .",searchPlaceholder:" ...",linkComponents:" ",linking:"...",exportLabel:"",exportSVG:" SVG",toggleOrientation:" ",toggleTheme:"  ",togglePrintMode:" ",cleanView:"  ( )",exitCleanView:"  ",analyze:"",active:"",propertiesActions:" ",quickTips:" ",tip1:"Shift+Click     .",tip2:"Ctrl+C / Ctrl+V    .",tip3:"Del / Backspace   .",tip4:"Esc      .",resetDiagram:"   ",saveStatus:{saved:"",saving:"...",unsaved:" "},undo:"",redo:" ",addFirstNode:"   ()",addStandaloneGen:"   ",addIndependent:"  ",addGrid:" ",addGen:"",addTrans:"",defaultDesc:{grid:" ",gen:" ",trans:"/",load:" "},connectMode:{source:"   ()...",target:"   () ."},legend:{title:" ",meter:" "},mode:"",componentTypes:{[W.SYSTEM_ROOT]:" ",[W.TRANSFORMER]:"",[W.METER]:"",[W.DISTRIBUTION_BOARD]:" ",[W.BREAKER]:"",[W.SWITCH]:"",[W.LOAD]:"/",[W.GENERATOR]:""},inputPanel:{addConnection:" ",editComponent:" ",bulkEdit:" ",itemsSelected:" ",newDownstream:"   ",editSelected:"  ",parent:"",componentType:" ",name:" ()",componentNumber:"  ()",model:" ()",customColor:"  ",shape:"",uploadIcon:"  ",removeIcon:" ",includesMeter:"  ",meterNumber:" ",includesGenerator:"  ",generatorName:" ",amperage:" (A)",voltage:" (V)",kva:"kVA",description:" ()",addToDiagram:" ",saveChanges:" ",applyBulk:"   ",close:"",deleteComponent:" ",confirmDelete:"         ?",downstreamConnections:"  ",noConnections:"  .",linkStyle:" ",strokeColor:" ",lineStyle:" ",startMarker:" ",endMarker:" ",cableSize:"  ( 4x25 )",patterns:{solid:"",dashed:"",dotted:""},markers:{none:"",arrow:"",circle:"",diamond:""},shapes:{rectangle:"",circle:"",square:""},groupNode:" / ",collapse:" ",expand:" "},printSettings:{title:"  ",engineer:" ",approvedBy:"  ",date:"",revision:"",organization:" / ",update:" "},analysis:{title:"  ",analyzing:"    Gemini...",analyzingSub:"  ,    .",safe:" ",warning:" ",danger:" ",issues:" ",recommendations:"",noData:"   ."},dialogs:{deleteProjectTitle:" ?",deletePageTitle:" ?",deleteNodeTitle:" ?",deletePage:"      ?",deleteProject:"       ?",deleteNode:"       ?",reset:"   ?     .",detach:"  ?     .",rootMove:"     ,   .",cycle:"       (  ).",diagramNotFound:"  .",importError:"   .  JSON  .",restoreSuccess:"   ."},export:{title:" ",subtitle:"      .",formats:{svg:"  (SVG)",png:" (PNG)",json:"  (JSON)",excel:"  (CSV/Excel)",pdf:" (PDF)"},desc:{svg:"      .",png:"      .",json:"        .",excel:"    /CSV.",pdf:"    PDF."}},csvHeaders:{name:"",type:"",componentNum:" ",model:"",amps:"",voltage:"",kva:"kVA",parent:"",description:"",hasMeter:" ",meterNum:" ",yes:"",no:"",na:" "},about:{title:" VoltGraph AI",version:" 1.0.0",description:"VoltGraph AI     - (SLD)    .      ,       AI.",developedBy:"  ",developerName:" "},printLayout:{project:"",date:"",engineer:"",rev:"",approved:"",org:""}},ar:{appName:"VoltGraph AI",projects:"",pages:"",addPage:" ",importProject:" / ",backupAll:"   ",backupProject:"  ",restoreSuccess:"      .",searchPlaceholder:"  ...",linkComponents:" ",linking:" ...",exportLabel:"",exportSVG:" SVG",toggleOrientation:" ",toggleTheme:" ",togglePrintMode:" ",cleanView:"  ( )",exitCleanView:"   ",analyze:"",active:"",propertiesActions:" ",quickTips:" ",tip1:"Shift+Click     .",tip2:"Ctrl+C / Ctrl+V   .",tip3:"Del / Backspace   .",tip4:"Esc     .",resetDiagram:"   ",saveStatus:{saved:"",saving:" ...",unsaved:" "},undo:"",redo:"",addFirstNode:"   ()",addStandaloneGen:"   ",addIndependent:"  ",addGrid:" ",addGen:"",addTrans:"",defaultDesc:{grid:" ",gen:" ",trans:"/",load:" "},connectMode:{source:"   ()...",target:"   () ."},legend:{title:" ",meter:" "},mode:"",componentTypes:{[W.SYSTEM_ROOT]:" ",[W.TRANSFORMER]:"",[W.METER]:"",[W.DISTRIBUTION_BOARD]:" ",[W.BREAKER]:"",[W.SWITCH]:"",[W.LOAD]:"",[W.GENERATOR]:""},inputPanel:{addConnection:" ",editComponent:" ",bulkEdit:" ",itemsSelected:" ",newDownstream:"  ",editSelected:"  ",parent:"",componentType:" ",name:" ()",componentNumber:"  ()",model:" ()",customColor:" ",shape:"",uploadIcon:"  ",removeIcon:" ",includesMeter:"  ",meterNumber:" ",includesGenerator:"  ",generatorName:" ",amperage:" (A)",voltage:" (V)",kva:"kVA",description:" ()",addToDiagram:"  ",saveChanges:" ",applyBulk:"  ",close:"",deleteComponent:" ",confirmDelete:"         ",downstreamConnections:" ",noConnections:"   .",linkStyle:" ",strokeColor:" ",lineStyle:" ",startMarker:" ",endMarker:" ",cableSize:"  ( 4x25 )",patterns:{solid:"",dashed:"",dotted:""},markers:{none:"",arrow:"",circle:"",diamond:""},shapes:{rectangle:"",circle:"",square:""},groupNode:" / ",collapse:" ",expand:" "},printSettings:{title:"  ",engineer:" ",approvedBy:"   ",date:"",revision:"",organization:" / ",update:" "},analysis:{title:"  ",analyzing:"     Gemini...",analyzingSub:"       .",safe:" ",warning:" ",danger:" ",issues:" ",recommendations:"",noData:"   ."},dialogs:{deleteProjectTitle:" ",deletePageTitle:" ",deleteNodeTitle:" ",deletePage:"       ",deleteProject:"        ",deleteNode:"          ",reset:"         .",detach:"        .",rootMove:"       .",cycle:"     (  ).",diagramNotFound:"  .",importError:"   .  JSON  .",restoreSuccess:"      ."},export:{title:" ",subtitle:"     .",formats:{svg:"  (SVG)",png:" (PNG)",json:"  (JSON)",excel:"  (CSV/Excel)",pdf:" (PDF)"},desc:{svg:"    .",png:"     .",json:"    .",excel:"     Excel/CSV.",pdf:"    PDF."}},csvHeaders:{name:"",type:"",componentNum:" ",model:"",amps:"",voltage:"",kva:"kVA",parent:"",description:"",hasMeter:" ",meterNum:" ",yes:"",no:"",na:" "},about:{title:" VoltGraph AI",version:" 1.0.0",description:"VoltGraph AI        (SLD)   .             .",developedBy:"  ",developerName:" "},printLayout:{project:"",date:"",engineer:"",rev:"",approved:"",org:""}}},vn=e=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,Xg=(e,t)=>{if(e.id===t)return e;for(const n of e.children){const r=Xg(n,t);if(r)return r}return null},ht=(e,t)=>{for(const n of e){if(n.id===t)return n;const r=Xg(n,t);if(r)return r}return null},Jo=(e,t,n)=>e.id===t?{...e,children:[...e.children,n]}:{...e,children:e.children.map(r=>Jo(r,t,n))},Yo=(e,t,n)=>e.id===t?{...e,...n}:{...e,children:e.children.map(r=>Yo(r,t,n))},Qg=(e,t,n)=>{if(e.id===t){const r=e.extraConnections||[];return r.includes(n)?e:{...e,extraConnections:[...r,n]}}return{...e,children:e.children.map(r=>Qg(r,t,n))}},Zg=(e,t)=>{let n={...e};return n.extraConnections&&n.extraConnections.includes(t)&&(n.extraConnections=n.extraConnections.filter(r=>r!==t)),n.children=n.children.map(r=>Zg(r,t)),n},Cu=(e,t)=>e.children.some(r=>r.id===t)?{...e,children:e.children.filter(r=>r.id!==t)}:{...e,children:e.children.map(r=>Cu(r,t))},jg=e=>{const t=vn(String(e.type));return{...e,id:t,children:e.children.map(n=>jg(n)),extraConnections:[]}};function TA(){const[e,t]=K.useState(()=>{try{const S=localStorage.getItem("voltgraph_data");let w=S?JSON.parse(S):[bo];return w=w.map(A=>({...A,pages:A.pages.map(F=>F.rootNode&&!F.items?{...F,items:[F.rootNode],rootNode:void 0}:F)})),w}catch(S){return console.error("Failed to load data from local storage",S),[bo]}}),[n,r]=K.useState([]),[o,i]=K.useState([]),[s,u]=K.useState(e[0].id),[d,c]=K.useState(e[0].pages[0].id),[f,p]=K.useState(null),[h,g]=K.useState(new Set),[v,T]=K.useState("node"),[U,y]=K.useState(null),[x,_]=K.useState(null),[E,k]=K.useState(!1),[N,R]=K.useState(!1),[z,J]=K.useState(null),[B,se]=K.useState(""),[ue,ve]=K.useState("horizontal"),[P,D]=K.useState(!0),[M,O]=K.useState(!1),[L,G]=K.useState(!1),[H,j]=K.useState(!1),[ne,Ve]=K.useState(void 0),[ce,le]=K.useState(!1),[he,Ge]=K.useState("en"),[ze,on]=K.useState("light"),[Eo,qt]=K.useState(!1),$=EA[he],Ct=he==="he"||he==="ar",gn=ze==="dark",[Xe,Li]=K.useState(null),[Un,ar]=K.useState(""),[ur,Fn]=K.useState("saved"),[Dt,He]=K.useState(!1),[Lt,ct]=K.useState(null),[cr,dr]=K.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),Rr=K.useRef(null),St=e.find(S=>S.id===s)||e[0],Se=St.pages.find(S=>S.id===d)||St.pages[0],Mr=(S,w,A)=>{dr({isOpen:!0,title:S,message:w,onConfirm:()=>{A(),dr(F=>({...F,isOpen:!1}))}})},xe=K.useCallback(()=>{r(S=>[...S,JSON.parse(JSON.stringify(e))]),i([])},[e]),To=K.useCallback(()=>{if(n.length===0)return;const S=n[n.length-1],w=n.slice(0,-1);i(F=>[JSON.parse(JSON.stringify(e)),...F]),t(S),r(w);const A=S.find(F=>F.id===s);!A&&S.length>0?(u(S[0].id),c(S[0].pages[0].id)):A&&(A.pages.find(X=>X.id===d)||c(A.pages[0].id))},[n,e,s,d]),$t=K.useCallback(()=>{if(o.length===0)return;const S=o[0],w=o.slice(1);r(F=>[...F,JSON.parse(JSON.stringify(e))]),t(S),i(w);const A=S.find(F=>F.id===s);!A&&S.length>0?(u(S[0].id),c(S[0].pages[0].id)):A&&(A.pages.find(X=>X.id===d)||c(A.pages[0].id))},[o,e,s,d]),Ee=K.useCallback(S=>{t(w=>w.map(A=>A.id!==s?A:{...A,pages:A.pages.map(F=>F.id!==d?F:S(F))}))},[s,d]),wo=K.useCallback(S=>{t(w=>w.map(A=>A.id!==s?A:{...A,printMetadata:S}))},[s]),Ui=K.useCallback(S=>{t(w=>w.map(A=>A.id!==s?A:{...A,name:S}))},[s]),Vn=K.useCallback(()=>{if(f){const S=ht(Se.items,f.id);if(S)try{const w=JSON.parse(JSON.stringify(S));y(w)}catch(w){console.error("Copy failed:",w)}}},[f,Se.items]),No=K.useCallback(()=>{if(!U)return;xe();const w=jg(U);w.name=`${w.name} (Copy)`,Ee(A=>{if(f){const F=f,X=A.items.map(te=>Jo(te,F.id,w));return{...A,items:X}}else return{...A,items:[...A.items,w]}})},[U,f,xe,Ee]),Dr=S=>{S.size!==0&&(xe(),Ee(w=>{let A=w.items.filter(te=>!S.has(te.id));const F=te=>({...te,children:te.children.filter(re=>!S.has(re.id)).map(F)});A=A.map(F);const X=te=>{var re;return{...te,extraConnections:(re=te.extraConnections)==null?void 0:re.filter(me=>!S.has(me)),children:te.children.map(X)}};return A=A.map(X),{...w,items:A}}),g(new Set),p(null),He(!1),ct(null))},Lr=S=>{xe(),Ee(w=>{let A;return w.items.some(F=>F.id===S.id)?A=w.items.filter(F=>F.id!==S.id):A=w.items.map(F=>Cu(F,S.id)),A=A.map(F=>Zg(F,S.id)),{...w,items:A}}),(f==null?void 0:f.id)===S.id&&(p(null),T("node")),He(!1),ct(null)},bn=K.useCallback(S=>{const w=S||f;w&&Mr(`${$.dialogs.deleteNodeTitle}`,`${$.dialogs.deleteNode}`,()=>Lr(w))},[f,$,Ee,xe]),C=()=>{if(!f||!x)return;const S=f.id,w=x;xe(),Ee(A=>{var re;const F=ht(A.items,S);if(F&&((re=F.extraConnections)!=null&&re.includes(w))){const me=oe=>{var ae;return oe.id===S?{...oe,extraConnections:(ae=oe.extraConnections)==null?void 0:ae.filter(fe=>fe!==w)}:{...oe,children:oe.children.map(me)}};return{...A,items:A.items.map(me)}}const X=ht(A.items,S);if(!X)return A;const te=A.items.map(me=>{const oe=ae=>ae.id===w?{...ae,children:ae.children.filter(fe=>fe.id!==S)}:{...ae,children:ae.children.map(oe)};return oe(me)});return{...A,items:[...te,X]}}),p(null),_(null),T("node")},I=(S,w)=>{const A=ht(Se.items,w);A&&(p(A),_(S),T("link"),g(new Set))};K.useEffect(()=>{const S=w=>{const A=w.ctrlKey||w.metaKey,F=w.target;F.tagName==="INPUT"||F.tagName==="TEXTAREA"||(A&&w.key.toLowerCase()==="z"&&(w.preventDefault(),w.shiftKey?$t():To()),A&&w.key.toLowerCase()==="y"&&(w.preventDefault(),$t()),(w.key==="Delete"||w.key==="Backspace")&&(h.size>0?window.confirm(`${$.dialogs.deleteNode}`)&&Dr(h):f&&window.confirm(`${$.dialogs.deleteNode}`)&&Lr(f)),A&&w.key.toLowerCase()==="c"&&(w.preventDefault(),Vn()),A&&w.key.toLowerCase()==="v"&&(w.preventDefault(),No()),w.key==="Escape"&&(w.preventDefault(),ce?le(!1):(T("node"),p(null),g(new Set),He(!1),ct(null))))};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[f,h,U,s,d,To,$t,Vn,No,$,Ee,xe,ce]),K.useEffect(()=>{p(null),T("node"),He(!1),ct(null),g(new Set)},[d,s]),K.useEffect(()=>{Fn("saving");const S=setTimeout(()=>{try{localStorage.setItem("voltgraph_data",JSON.stringify(e)),Fn("saved")}catch{Fn("unsaved")}},1e3);return()=>clearTimeout(S)},[e]),K.useEffect(()=>{document.documentElement.dir=Ct?"rtl":"ltr",document.documentElement.lang=he},[Ct,he]);const b=()=>"#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"),Q=()=>{p(null),T("node"),g(new Set),He(!1),ct(null),qt(!1)},V=(S,w)=>{if(S===w)return;let A=S,F=w;const X=ht(Se.items,A),te=ht(Se.items,F);if(!X||!te)return;const re=X.type===W.GENERATOR||X.type===W.SYSTEM_ROOT,me=te.type===W.GENERATOR||te.type===W.SYSTEM_ROOT;if(Se.items.some(_e=>_e.id===A)&&re&&!me){const _e=A;A=F,F=_e}const ae=ht(Se.items,A);if(!ae)return;const fe=Se.items.some(_e=>_e.id===A);xe(),Ee(_e=>{var Ze,ft;if(fe){let pt=[..._e.items],je=ae;pt=pt.filter(Ml=>Ml.id!==A);const Gn=ht(pt,F),Io=Gn&&Gn.children.length>0?(Ze=Gn.children[0].connectionStyle)==null?void 0:Ze.strokeColor:b(),l0={...je,connectionStyle:{...je.connectionStyle,strokeColor:Io}};return pt=pt.map(Ml=>Jo(Ml,F,l0)),{..._e,items:pt}}else{if((ft=ae.extraConnections)!=null&&ft.includes(F))return _e;if(ae.children.some(je=>je.id===F))return alert(`${$.dialogs.cycle}`),_e;const pt=_e.items.map(je=>Qg(je,A,F));return{..._e,items:pt}}})},ee=(S,w)=>{if(Dt)if(!Lt)ct(S);else{if(Lt&&S.id===Lt.id){ct(null);return}Lt&&V(Lt.id,S.id),ct(null),He(!1)}else w?g(A=>{const F=new Set(A);if(F.has(S.id)?F.delete(S.id):F.add(S.id),F.size===1){const X=Array.from(F)[0],te=ht(Se.items,X);te&&p(te)}else p(null);return F}):(p(S),g(new Set([S.id])),T("node"))},ie=S=>{confirm(`${$.dialogs.detach}`)&&(xe(),Ee(w=>{const A=ht(w.items,S);if(!A)return w;let F=w.items.map(X=>Cu(X,S));return F.push(A),{...w,items:F}}))},de=S=>{const w=ht(Se.items,S);w&&(ct(w),He(!0))},De=S=>{const w=ht(Se.items,S);w&&(p(w),g(new Set([w.id])),T("node"))},we=S=>{xe(),qt(!1);let w=$.componentTypes[S],A="Independent Node";switch(S){case W.SYSTEM_ROOT:A=$.defaultDesc.grid;break;case W.GENERATOR:A=$.defaultDesc.gen;break;case W.TRANSFORMER:A=$.defaultDesc.trans;break;case W.LOAD:A=$.defaultDesc.load;break}const F={id:vn(String(S).toLowerCase()),name:w,type:S,description:A,children:[],extraConnections:[],isCollapsed:!1,connectionStyle:Es,manualX:0,manualY:0};Ee(X=>({...X,items:[...X.items,F]}))},Et=S=>{f&&(xe(),Ee(w=>{const A=ht(w.items,f.id)||f;let F=b();if(A.children&&A.children.length>0){const re=A.children[0].connectionStyle;re&&re.strokeColor&&(F=re.strokeColor)}const X={id:vn(String(S.type)),name:S.name||String(S.type),type:S.type,componentNumber:S.componentNumber,model:S.model,amps:S.amps,voltage:S.voltage,kva:S.kva,description:S.description,customColor:S.customColor,hasMeter:S.hasMeter,meterNumber:S.meterNumber,hasGeneratorConnection:S.hasGeneratorConnection,generatorName:S.generatorName,shape:S.shape,customImage:S.customImage,children:[],extraConnections:[],connectionStyle:{...Es,strokeColor:F},isCollapsed:!1},te=w.items.map(re=>Jo(re,f.id,X));return{...w,items:te}}))},Tt=S=>{xe();let w=b();const A=(X,te)=>{if(X.children.some(re=>re.id===te))return X;for(const re of X.children){const me=A(re,te);if(me)return me}return null};let F=null;for(const X of Se.items)if(F=A(X,S.id),F)break;if(F&&F.children.length>0){const X=F.children[0].connectionStyle;X!=null&&X.strokeColor&&(w=X.strokeColor)}Ee(X=>{const te={...S,id:vn(String(S.type)),name:`${S.name} Copy`,children:[],extraConnections:[],connectionStyle:{...Es,strokeColor:w},isCollapsed:!1},re=X.items.map(me=>Jo(me,S.id,te));return{...X,items:re}})},Ut=S=>{f&&(xe(),Ee(w=>{const A=w.items.map(X=>Yo(X,f.id,{name:S.name||f.name,componentNumber:S.componentNumber,type:S.type,model:S.model,amps:S.amps,voltage:S.voltage,kva:S.kva,description:S.description,customColor:S.customColor,hasMeter:S.hasMeter,meterNumber:S.meterNumber,hasGeneratorConnection:S.hasGeneratorConnection,generatorName:S.generatorName,shape:S.shape,customImage:S.customImage})),F=ht(A,f.id);return F&&p(F),{...w,items:A}}))},sn=S=>{xe(),Ee(w=>{let A=w.items;return h.forEach(F=>{A=A.map(X=>Yo(X,F,S))}),{...w,items:A}})},dt=S=>{f&&(xe(),Ee(w=>{const A=w.items.map(F=>Yo(F,f.id,{connectionStyle:S}));return{...w,items:A}}))},Ot=S=>{const w=new Map(S.map(A=>[A.id,A]));Ee(A=>{const F=X=>{const te=w.get(X.id);let re=X;return te&&(re={...X,manualX:te.x,manualY:te.y}),{...re,children:re.children.map(F)}};return{...A,items:A.items.map(F)}})},wt=S=>{xe(),Ee(w=>{const A=w.items.map(F=>Yo(F,S.id,{isCollapsed:!S.isCollapsed}));return{...w,items:A}})},$e=S=>{S.type!==W.SYSTEM_ROOT&&(xe(),Ee(w=>{const F={id:`GROUP-${Date.now()}`,name:"New Group",type:W.DISTRIBUTION_BOARD,description:"Grouped Components",children:[S],extraConnections:[],connectionStyle:S.connectionStyle,isCollapsed:!1},X=(re,me,oe)=>re.children.some(ae=>ae.id===me)?{...re,children:re.children.map(ae=>ae.id===me?oe:ae)}:{...re,children:re.children.map(ae=>X(ae,me,oe))},te=w.items.map(re=>X(re,S.id,F));return{...w,items:te}}))},ln=async()=>{if(Se.items.length===0){const S=$.dialogs&&$.dialogs.diagramNotFound?String($.dialogs.diagramNotFound):"Diagram not found.";alert(S);return}R(!0),k(!0),J(null);try{const S=await SA(Se.items);J(S)}catch(S){const w=S,A=w instanceof Error?w.message:String(w);console.error(A)}finally{k(!1)}},Jt=()=>{const S=document.getElementById("diagram-svg");if(!S)return null;const w=S.cloneNode(!0);w.querySelectorAll("circle[stroke-dasharray], rect[stroke-dasharray]").forEach(oe=>{var ae;return(ae=oe.parentElement)==null?void 0:ae.remove()}),w.querySelectorAll(".print-layout-edit-btn").forEach(oe=>oe.remove());const X=S.querySelector("g"),te=w.querySelector("g");if(X&&te){const oe=X.getBBox(),ae=50,fe=oe.width+ae*2,_e=oe.height+ae*2;w.setAttribute("width",fe.toString()),w.setAttribute("height",_e.toString()),w.setAttribute("viewBox",`0 0 ${fe} ${_e}`),w.style.backgroundColor="#ffffff",te.setAttribute("transform",`translate(${-oe.x+ae}, ${-oe.y+ae})`),w.setAttribute("direction",Ct?"rtl":"ltr")}let me=new XMLSerializer().serializeToString(w);return me.match(/^<svg[^>]+xmlns="http\:\/\/www\.w3\.org\/2000\/svg"/)||(me=me.replace(/^<svg/,'<svg xmlns="http://www.w3.org/2000/svg"')),me},Qe=(S,w)=>{const A=document.createElement("a");A.href=S,A.download=w,document.body.appendChild(A),A.click(),document.body.removeChild(A)},Ur=()=>{const S="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),w=new Date().toISOString().slice(0,10);Qe(S,`VoltGraph_FullBackup_${w}.json`)},Pl=S=>{const w=S.name.trim().replace(/[^\w\u0590-\u05FF\u0600-\u06FF\s-]/g,"_"),A="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(S,null,2));Qe(A,`${w}_ProjectBackup.json`)},Rl=S=>{const w=St.name.trim().replace(/[^\w\u0590-\u05FF\u0600-\u06FF\s-]/g,"_"),A=Se.name.trim().replace(/[^\w\u0590-\u05FF\u0600-\u06FF\s-]/g,"_"),F=`${w} - ${A}`;if(S==="json"){const te="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(St,null,2));Qe(te,`${F}.json`),O(!1);return}if(S==="excel"){const te=[],re=["name","type","componentNum","model","amps","voltage","kva","parent","description","hasMeter","meterNum"],me=(oe,ae)=>{const fe={};fe[$.csvHeaders.name]=oe.name,fe[$.csvHeaders.type]=$.componentTypes[oe.type]||oe.type,fe[$.csvHeaders.componentNum]=oe.componentNumber||"",fe[$.csvHeaders.model]=oe.model||"",fe[$.csvHeaders.amps]=oe.amps||"",fe[$.csvHeaders.voltage]=oe.voltage||"",fe[$.csvHeaders.kva]=oe.kva||"",fe[$.csvHeaders.parent]=ae,fe[$.csvHeaders.description]=oe.description||"",fe[$.csvHeaders.hasMeter]=oe.hasMeter?$.csvHeaders.yes:$.csvHeaders.no,fe[$.csvHeaders.meterNum]=oe.meterNumber||"",te.push(fe),oe.children.forEach(_e=>me(_e,oe.name))};if(Se.items.forEach(oe=>me(oe,$.csvHeaders.na)),te.length>0){const oe={name:$.csvHeaders.name,type:$.csvHeaders.type,componentNum:$.csvHeaders.componentNum,model:$.csvHeaders.model,amps:$.csvHeaders.amps,voltage:$.csvHeaders.voltage,kva:$.csvHeaders.kva,parent:$.csvHeaders.parent,description:$.csvHeaders.description,hasMeter:$.csvHeaders.hasMeter,meterNum:$.csvHeaders.meterNum},ae=re.map(ft=>oe[ft]),fe=[ae.join(","),...te.map(ft=>ae.map(pt=>{const je=ft[pt];return`"${(je!=null?String(je):"").replace(/"/g,'""')}"`}).join(","))].join(`
`),_e=new Blob(["\uFEFF"+fe],{type:"text/csv;charset=utf-8;"}),Ze=URL.createObjectURL(_e);Qe(Ze,`${F}.csv`)}O(!1);return}const X=Jt();if(X){if(S==="pdf"){const te=document.createElement("canvas"),oe=new DOMParser().parseFromString(X,"image/svg+xml").documentElement,ae=parseFloat(oe.getAttribute("width")||"800"),fe=parseFloat(oe.getAttribute("height")||"600"),_e=3;te.width=ae*_e,te.height=fe*_e;const Ze=te.getContext("2d");if(!Ze)return;Ze.scale(_e,_e);const ft=new Image,pt=new Blob([X],{type:"image/svg+xml;charset=utf-8"}),je=URL.createObjectURL(pt);ft.onload=()=>{Ze.fillStyle="#ffffff",Ze.fillRect(0,0,ae,fe),Ze.drawImage(ft,0,0,ae,fe);const Gn=te.toDataURL("image/png"),Io=window.open("","_blank");Io&&(Io.document.write(`
                      <html dir="${Ct?"rtl":"ltr"}" lang="${he}">
                          <head><title>${F}</title><style>body{margin:0;display:flex;justify-content:center;}img{max-width:100%;}</style></head>
                          <body><img src="${Gn}" onload="setTimeout(() => { window.print(); window.close(); }, 500);" /></body>
                      </html>
                  `),Io.document.close()),URL.revokeObjectURL(je)},ft.src=je,O(!1);return}if(S==="svg"){const te="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(X);Qe(te,`${F}.svg`)}else if(S==="png"){const te=document.createElement("canvas"),oe=new DOMParser().parseFromString(X,"image/svg+xml").documentElement,ae=parseFloat(oe.getAttribute("width")||"800"),fe=parseFloat(oe.getAttribute("height")||"600"),_e=2;te.width=ae*_e,te.height=fe*_e;const Ze=te.getContext("2d");if(!Ze)return;Ze.scale(_e,_e);const ft=new Image,pt=new Blob([X],{type:"image/svg+xml;charset=utf-8"}),je=URL.createObjectURL(pt);ft.onload=()=>{Ze.fillStyle="#ffffff",Ze.fillRect(0,0,ae,fe),Ze.drawImage(ft,0,0,ae,fe),URL.revokeObjectURL(je);const Gn=te.toDataURL("image/png");Qe(Gn,`${F}.png`)},ft.src=je}O(!1)}},Dc=S=>{var F;const w=(F=S.target.files)==null?void 0:F[0];if(!w)return;const A=new FileReader;A.onload=X=>{try{const te=A.result;if(typeof te!="string")return;let re=JSON.parse(te);if(Array.isArray(re)){xe();const me=re.map(oe=>{if(!oe.pages)return null;const ae=oe.pages.map(fe=>fe.rootNode&&!fe.items?{...fe,items:[fe.rootNode],rootNode:void 0}:fe);return{...oe,id:vn("proj"),pages:ae}}).filter(Boolean);me.length>0?(t(oe=>[...oe,...me]),alert(`${$.dialogs.restoreSuccess}`)):alert(`${$.dialogs.importError}`)}else re.pages&&re.pages[0].rootNode&&!re.pages[0].items&&(re={...re,pages:re.pages.map(me=>({...me,items:[me.rootNode],rootNode:void 0}))}),re.id&&re.pages?(xe(),e.some(oe=>oe.id===re.id)&&(re={...re,id:vn("proj")}),t(oe=>[...oe,re]),u(re.id),c(re.pages[0].id)):alert(`${$.dialogs.importError}`)}catch{alert(`${$.dialogs.importError}`)}Rr.current&&(Rr.current.value="")},A.readAsText(w)},fr=()=>{xe();const S={id:vn("proj"),name:`${$.projects} ${e.length+1}`,pages:[{id:vn("page"),name:"Page 1",items:[]}]};t([...e,S]),u(S.id),c(S.pages[0].id)},Lc=()=>{xe();const S={id:vn("page"),name:`${$.pages} ${St.pages.length+1}`,items:[]};t(w=>w.map(A=>A.id===s?{...A,pages:[...A.pages,S]}:A)),c(S.id)},t0=(S,w)=>{const A=e.find(X=>X.id===S);if(!A||A.pages.length<=1){alert("Cannot delete last page.");return}xe();const F=A.pages.filter(X=>X.id!==w);t(X=>X.map(te=>te.id===S?{...te,pages:F}:te)),d===w&&c(F[0].id)},n0=(S,w)=>{Mr(`${$.dialogs.deletePageTitle}`,`${$.dialogs.deletePage}`,()=>t0(S,w))},r0=S=>{if(e.length<=1)return;xe();const w=e.filter(A=>A.id!==S);t(w),s===S&&(u(w[0].id),c(w[0].pages[0].id))},o0=S=>{Mr(`${$.dialogs.deleteProjectTitle}`,`${$.dialogs.deleteProject}`,()=>r0(S))},Uc=(S,w)=>{Li(S),ar(w)},Fi=()=>{if(!Xe)return;const S=e.findIndex(w=>w.id===Xe);S!==-1?e[S].name!==Un&&(xe(),t(w=>w.map((A,F)=>F===S?{...A,name:Un}:A))):St.pages.some(w=>w.id===Xe)&&(xe(),t(w=>w.map(A=>A.id!==s?A:{...A,pages:A.pages.map(F=>F.id===Xe?{...F,name:Un}:F)}))),Li(null),ar("")},i0=()=>{confirm(`${$.dialogs.reset}`)&&(xe(),t([bo]),u(bo.id),c(bo.pages[0].id),p(null),He(!1))},s0=K.useMemo(()=>{if(!B.trim())return null;const S=new Set,w=B.toLowerCase(),A=F=>{(F.name&&F.name.toLowerCase().includes(w)||F.model&&F.model.toLowerCase().includes(w)||F.componentNumber&&F.componentNumber.toLowerCase().includes(w)||F.meterNumber&&F.meterNumber.toLowerCase().includes(w)||F.type.toLowerCase().includes(w))&&S.add(F.id),F.children.forEach(A)};return Se.items.forEach(A),S},[Se.items,B]),Vi=K.useCallback(S=>{j(!0),D(!0),p(null),g(new Set),T("node"),He(!1),ct(null),Ve(S)},[]);return m.jsxs("div",{className:`min-h-screen flex flex-col font-sans ${gn?"text-slate-200 bg-slate-900":"text-slate-800 bg-slate-50"} ${Ct?"rtl":"ltr"}`,dir:Ct?"rtl":"ltr",children:[!ce&&m.jsxs("nav",{className:"bg-slate-900 border-b border-slate-800 px-6 py-3 flex items-center justify-between sticky top-0 z-40 shadow-md",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:()=>D(!P),className:"p-2 hover:bg-slate-800 rounded text-slate-400 hover:text-white transition-colors",children:m.jsx("span",{className:"material-icons-round",children:"menu"})}),m.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded flex items-center justify-center shadow-lg",children:m.jsx("span",{className:"material-icons-round text-white text-lg",children:"electrical_services"})}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("h1",{className:"text-xl font-bold text-white tracking-tight hidden sm:block leading-none",children:$.appName}),m.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[m.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${ur==="saved"?"bg-green-500":ur==="saving"?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),m.jsx("span",{className:"text-[10px] text-slate-500 font-medium uppercase tracking-wider",children:$.saveStatus[ur]})]})]})]}),m.jsxs("div",{className:"flex-1 max-w-md mx-6 relative",children:[m.jsx("span",{className:`absolute top-1/2 -translate-y-1/2 material-icons-round text-slate-500 ${Ct?"right-3":"left-3"}`,children:"search"}),m.jsx("input",{type:"text",placeholder:$.searchPlaceholder,value:B,onChange:S=>se(S.target.value),className:`w-full bg-slate-800 border border-slate-700 rounded-full py-2 text-sm text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all placeholder-slate-500 ${Ct?"pr-10 pl-4":"pl-10 pr-4"}`})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[H&&m.jsx("button",{onClick:()=>{Vi()},className:"p-2 bg-blue-600 text-white border border-blue-500 shadow-lg shadow-blue-900/20 rounded-lg animate-pulse hover:bg-blue-500 transition-colors",title:$.printSettings.title,children:m.jsx("span",{className:"material-icons-round",children:"settings"})}),m.jsxs("div",{className:"relative",children:[m.jsxs("button",{onClick:()=>qt(!Eo),className:"p-2 text-slate-400 hover:text-white bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700 flex items-center gap-2",title:$.addIndependent,children:[m.jsx("span",{className:"material-icons-round text-green-400",children:"add_circle_outline"}),m.jsx("span",{className:"text-xs font-medium hidden md:block",children:$.addIndependent}),m.jsx("span",{className:"material-icons-round text-sm",children:"expand_more"})]}),Eo&&m.jsxs("div",{className:`absolute top-full mt-2 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden animate-fadeIn ${Ct?"left-0":"right-0"}`,children:[m.jsxs("button",{onClick:()=>we(W.SYSTEM_ROOT),className:"w-full text-left px-4 py-3 text-sm text-slate-300 hover:bg-slate-700 hover:text-white flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-slate-400",children:"domain"}),$.addGrid]}),m.jsxs("button",{onClick:()=>we(W.GENERATOR),className:"w-full text-left px-4 py-3 text-sm text-slate-300 hover:bg-slate-700 hover:text-white flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-red-400",children:"settings_power"}),$.addGen]}),m.jsxs("button",{onClick:()=>we(W.TRANSFORMER),className:"w-full text-left px-4 py-3 text-sm text-slate-300 hover:bg-slate-700 hover:text-white flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-yellow-400",children:"electric_bolt"}),$.addTrans]})]})]}),m.jsxs("div",{className:"flex bg-slate-800 rounded-lg border border-slate-700 overflow-hidden mr-2",children:[m.jsx("button",{onClick:To,disabled:n.length===0,className:"px-3 py-2 text-slate-400 hover:text-white hover:bg-slate-700 disabled:opacity-30",children:m.jsx("span",{className:"material-icons-round text-sm",children:"undo"})}),m.jsx("div",{className:"w-px bg-slate-700"}),m.jsx("button",{onClick:$t,disabled:o.length===0,className:"px-3 py-2 text-slate-400 hover:text-white hover:bg-slate-700 disabled:opacity-30",children:m.jsx("span",{className:"material-icons-round text-sm",children:"redo"})})]}),m.jsx("div",{className:"flex bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:["en","he","ar"].map(S=>m.jsx("button",{onClick:()=>Ge(S),className:`px-2 py-1 text-xs font-medium ${he===S?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-700"}`,children:S.toUpperCase()},S))}),m.jsx("button",{onClick:()=>G(!0),className:"p-2 text-slate-400 hover:text-white bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700",title:"About",children:m.jsx("span",{className:"material-icons-round",children:"info"})}),m.jsx("button",{onClick:()=>{const S=!H;j(S),S&&Vi()},className:`p-2 text-slate-400 hover:text-white rounded-lg border border-slate-700 ${H?"bg-blue-600 text-white":"bg-slate-800 hover:bg-slate-700"}`,title:$.togglePrintMode,children:m.jsx("span",{className:"material-icons-round",children:"picture_as_pdf"})}),m.jsx("button",{onClick:()=>le(!0),className:"p-2 text-slate-400 hover:text-white bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700",title:$.cleanView,children:m.jsx("span",{className:"material-icons-round",children:"fullscreen"})}),m.jsx("button",{onClick:()=>on(S=>S==="light"?"dark":"light"),className:"p-2 text-slate-400 hover:text-white bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700",children:m.jsx("span",{className:"material-icons-round",children:ze==="light"?"dark_mode":"light_mode"})}),m.jsxs("button",{onClick:()=>{He(!Dt),ct(null),Dt||p(null)},className:`p-2 rounded-lg transition-colors flex items-center gap-2 border ${Dt?"bg-amber-600 text-white border-amber-500 shadow-lg":"text-slate-400 hover:text-white bg-slate-800 hover:bg-slate-700 border-slate-700"}`,title:$.linkComponents,children:[m.jsx("span",{className:"material-icons-round",children:"link"}),Dt&&m.jsx("span",{className:"text-xs font-bold px-1",children:$.linking})]}),m.jsx("button",{onClick:()=>ve(S=>S==="horizontal"?"vertical":"horizontal"),className:"p-2 text-slate-400 hover:text-white bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700",children:m.jsx("span",{className:"material-icons-round transform transition-transform duration-300",style:{rotate:ue==="vertical"?"90deg":"0deg"},children:"schema"})}),m.jsx("button",{onClick:()=>O(!0),className:"p-2 text-slate-400 hover:text-white bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-700",children:m.jsx("span",{className:"material-icons-round",children:"save_alt"})}),m.jsxs("button",{onClick:ln,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white px-4 py-2 rounded-lg font-medium shadow-lg transition-all flex items-center gap-2 text-sm",children:[m.jsx("span",{className:"material-icons-round text-lg",children:"auto_awesome"}),$.analyze]})]})]}),m.jsxs("main",{className:"flex-1 flex overflow-hidden relative",children:[P&&!ce&&m.jsxs("aside",{className:"w-64 bg-slate-900 border-r border-slate-800 flex flex-col",children:[m.jsxs("div",{className:"p-4 border-b border-slate-800 flex items-center justify-between",children:[m.jsx("h2",{className:"font-bold text-slate-300 text-sm uppercase tracking-wider",children:$.projects}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx("input",{type:"file",ref:Rr,onChange:Dc,accept:".json",className:"hidden"}),m.jsx("button",{onClick:Ur,className:"text-slate-400 hover:text-green-400 p-1 hover:bg-slate-800 rounded",title:$.backupAll,children:m.jsx("span",{className:"material-icons-round text-lg",children:"archive"})}),m.jsx("button",{onClick:()=>{var S;return(S=Rr.current)==null?void 0:S.click()},className:"text-slate-400 hover:text-white p-1 hover:bg-slate-800 rounded",title:$.importProject,children:m.jsx("span",{className:"material-icons-round text-lg",children:"upload_file"})}),m.jsx("button",{onClick:fr,className:"text-blue-400 hover:text-blue-300 p-1 hover:bg-slate-800 rounded",title:"Add Project",children:m.jsx("span",{className:"material-icons-round text-lg",children:"add_box"})})]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-4",children:e.map(S=>m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:`px-3 py-2 rounded flex items-center justify-between group ${s===S.id?"bg-slate-800 text-white":"text-slate-400 hover:bg-slate-800/50"}`,onClick:()=>{u(S.id),c(S.pages[0].id)},children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 overflow-hidden",children:[m.jsx("span",{className:"material-icons-round text-sm shrink-0",children:"folder"}),Xe===S.id?m.jsx("input",{type:"text",value:Un,onChange:w=>ar(w.target.value),onBlur:Fi,onKeyDown:w=>w.key==="Enter"&&Fi(),autoFocus:!0,className:"w-full bg-slate-700 border border-slate-600 rounded px-1 py-0.5 text-xs text-white",onClick:w=>w.stopPropagation()}):m.jsx("span",{className:"font-medium text-sm truncate",children:S.name})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[Xe!==S.id&&m.jsx("button",{onClick:w=>{w.stopPropagation(),Pl(S)},className:"text-slate-600 hover:text-green-400",title:$.backupProject,children:m.jsx("span",{className:"material-icons-round text-sm",children:"save_alt"})}),Xe!==S.id&&m.jsx("button",{onClick:w=>{w.stopPropagation(),Uc(S.id,S.name)},className:"text-slate-600 hover:text-blue-400",children:m.jsx("span",{className:"material-icons-round text-sm",children:"edit"})}),e.length>1&&Xe!==S.id&&m.jsx("button",{onClick:w=>{w.stopPropagation(),o0(S.id)},className:"text-slate-600 hover:text-red-400",children:m.jsx("span",{className:"material-icons-round text-sm",children:"delete"})})]})]}),s===S.id&&m.jsxs("div",{className:`space-y-1 border-slate-800 mx-2 ${Ct?"border-r-2 pr-4":"border-l-2 pl-4"}`,children:[S.pages.map(w=>m.jsxs("div",{className:`px-3 py-1.5 rounded cursor-pointer flex items-center justify-between group ${d===w.id?"bg-blue-600/20 text-blue-400":"text-slate-500 hover:text-slate-300"}`,onClick:()=>c(w.id),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 overflow-hidden",children:[m.jsx("span",{className:"material-icons-round text-xs shrink-0",children:"description"}),Xe===w.id?m.jsx("input",{type:"text",value:Un,onChange:A=>ar(A.target.value),onBlur:Fi,onKeyDown:A=>A.key==="Enter"&&Fi(),autoFocus:!0,className:"w-full bg-slate-700 border border-slate-600 rounded px-1 py-0.5 text-xs text-white",onClick:A=>A.stopPropagation()}):m.jsx("span",{className:"text-xs truncate",children:w.name})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[Xe!==w.id&&m.jsx("button",{onClick:A=>{A.stopPropagation(),Uc(w.id,w.name)},className:"text-slate-600 hover:text-blue-400",children:m.jsx("span",{className:"material-icons-round text-[10px]",children:"edit"})}),S.pages.length>1&&Xe!==w.id&&m.jsx("button",{onClick:A=>{A.stopPropagation(),n0(S.id,w.id)},className:"text-slate-600 hover:text-red-400",children:m.jsx("span",{className:"material-icons-round text-[10px]",children:"close"})})]})]},w.id)),m.jsxs("button",{onClick:Lc,className:`px-3 py-1.5 w-full text-xs text-slate-600 hover:text-blue-400 flex items-center gap-2 ${Ct?"text-right":"text-left"}`,children:[m.jsx("span",{className:"material-icons-round text-sm",children:"add"}),$.addPage]})]})]},S.id))})]}),m.jsxs("div",{className:"flex-1 relative p-4 flex flex-col bg-slate-950/50 overflow-hidden",children:[ce&&m.jsxs("button",{onClick:()=>le(!1),className:"absolute top-4 right-4 z-50 px-4 py-2 bg-slate-800/80 backdrop-blur border border-slate-700 rounded-full text-white text-sm hover:bg-slate-700 transition-colors flex items-center gap-2 shadow-lg",children:[m.jsx("span",{className:"material-icons-round text-base",children:"fullscreen_exit"}),$.exitCleanView]}),!ce&&m.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{className:"text-xs text-slate-500",children:[$.active,":"]}),m.jsxs("span",{className:"text-sm font-medium text-slate-200",children:[St.name," / ",Se.name]})]}),Dt&&m.jsx("div",{className:"bg-amber-900/40 border border-amber-700/50 px-3 py-1 rounded text-xs text-amber-300 animate-pulse font-bold",children:Lt?$.connectMode.target:$.connectMode.source})]}),m.jsx("div",{className:`flex-1 rounded-xl border shadow-xl relative overflow-hidden ${Dt?"border-amber-600/50 shadow-amber-900/20":"border-slate-800"} ${ze==="light"?"bg-white":"bg-slate-900"}`,children:m.jsx(GS,{data:Se.items,onNodeClick:ee,onLinkClick:I,onDuplicateChild:Tt,onDeleteNode:bn,onToggleCollapse:wt,onGroupNode:$e,onNodeMove:Ot,onAddRoot:()=>we(W.SYSTEM_ROOT),onAddGenerator:()=>we(W.GENERATOR),onBackgroundClick:Q,selectedNodeId:(f==null?void 0:f.id)||null,multiSelection:h,selectedLinkId:v==="link"&&(f==null?void 0:f.id)||null,orientation:ue,searchMatches:s0,isConnectMode:Dt,connectionSourceId:(Lt==null?void 0:Lt.id)||null,isPrintMode:H,activeProject:St,onDisconnectLink:C,onEditPrintSettings:Vi,t:$,language:he,theme:ze})})]}),!ce&&m.jsxs("aside",{className:"w-96 bg-slate-900 border-l border-slate-800 overflow-y-auto flex flex-col z-30 shadow-2xl",children:[H&&!f?m.jsxs("div",{className:"flex flex-col h-full",children:[m.jsx("div",{className:"p-4 border-b border-slate-800 bg-slate-800/30",children:m.jsxs("button",{onClick:()=>Vi(),className:"w-full py-2 px-4 bg-blue-600/20 text-blue-400 border border-blue-500/30 rounded-lg hover:bg-blue-600/30 transition-colors flex items-center justify-center gap-2 mb-2",children:[m.jsx("span",{className:"material-icons-round text-sm",children:"edit"}),m.jsx("span",{className:"text-sm font-bold",children:$.printSettings.title})]})}),m.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:m.jsx(HS,{metadata:St.printMetadata||Tc,projectName:St.name,onChange:wo,onUpdateProjectName:Ui,onClose:()=>j(!1),focusField:ne,t:$},s)})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"p-4 border-b border-slate-800 bg-slate-800/30",children:m.jsxs("h2",{className:"font-bold text-slate-200 flex items-center gap-2",children:[m.jsx("span",{className:"material-icons-round text-blue-400",children:"tune"}),$.propertiesActions]})}),m.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:m.jsx(zS,{selectedNode:f,selectionMode:v,multiSelectionCount:h.size,onAdd:Et,onAddIndependent:we,onEdit:Ut,onBulkEdit:sn,onEditConnection:dt,onDelete:()=>{h.size>0?confirm(`${$.dialogs.deleteNode}`)&&Dr(h):f&&bn(f)},onCancel:()=>{p(null),g(new Set),T("node")},onDetach:ie,onStartConnection:de,onNavigate:De,onDisconnectLink:C,t:$})})]}),m.jsx("div",{className:"p-4 border-t border-slate-800 text-center",children:m.jsx("button",{onClick:i0,className:"text-xs text-red-400 hover:text-red-300 hover:underline transition-colors",children:$.resetDiagram})})]})]}),m.jsx(BS,{isOpen:N,onClose:()=>R(!1),loading:E,result:z,t:$}),m.jsx(qS,{isOpen:cr.isOpen,title:cr.title,message:cr.message,onConfirm:cr.onConfirm,onCancel:()=>dr(S=>({...S,isOpen:!1})),t:$}),m.jsx($S,{isOpen:M,onClose:()=>O(!1),onExport:Rl,t:$}),m.jsx(OS,{isOpen:L,onClose:()=>G(!1),t:$})]})}const e0=document.getElementById("root");if(!e0)throw new Error("Could not find root element to mount to");const wA=da.createRoot(e0);wA.render(m.jsx(T0.StrictMode,{children:m.jsx(TA,{})}));
